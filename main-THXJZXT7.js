var XD=Object.defineProperty,eC=Object.defineProperties;var tC=Object.getOwnPropertyDescriptors;var Uo=Object.getOwnPropertySymbols;var Eh=Object.prototype.hasOwnProperty,Mh=Object.prototype.propertyIsEnumerable;var bh=(t,e,n)=>e in t?XD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,g=(t,e)=>{for(var n in e||={})Eh.call(e,n)&&bh(t,n,e[n]);if(Uo)for(var n of Uo(e))Mh.call(e,n)&&bh(t,n,e[n]);return t},F=(t,e)=>eC(t,tC(e));var Sh=(t,e)=>{var n={};for(var r in t)Eh.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Uo)for(var r of Uo(t))e.indexOf(r)<0&&Mh.call(t,r)&&(n[r]=t[r]);return n};var xh=null;var kl=1,Ih=Symbol("SIGNAL");function Be(t){let e=xh;return xh=t,e}var Th={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function nC(t){if(!(Pl(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===kl)){if(!t.producerMustRecompute(t)&&!Ol(t)){t.dirty=!1,t.lastCleanEpoch=kl;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=kl}}function Ah(t){return t&&(t.nextProducerIndex=0),Be(t)}function _h(t,e){if(Be(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Pl(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Rl(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Ol(t){zo(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(nC(n),r!==n.version))return!0}return!1}function Nh(t){if(zo(t),Pl(t))for(let e=0;e<t.producerNode.length;e++)Rl(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Rl(t,e){if(rC(t),zo(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Rl(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];zo(i),i.producerIndexOfThis[r]=e}}function Pl(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function zo(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function rC(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function iC(){throw new Error}var oC=iC;function kh(t){oC=t}function A(t){return typeof t=="function"}function Cr(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Wo=Cr(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function _i(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var he=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(A(r))try{r()}catch(o){e=o instanceof Wo?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Oh(o)}catch(s){e=e??[],s instanceof Wo?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Wo(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Oh(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&_i(n,e)}remove(e){let{_finalizers:n}=this;n&&_i(n,e),e instanceof t&&e._removeParent(this)}};he.EMPTY=(()=>{let t=new he;return t.closed=!0,t})();var Fl=he.EMPTY;function Go(t){return t instanceof he||t&&"closed"in t&&A(t.remove)&&A(t.add)&&A(t.unsubscribe)}function Oh(t){A(t)?t():t.unsubscribe()}var vt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var wr={setTimeout(t,e,...n){let{delegate:r}=wr;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=wr;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function qo(t){wr.setTimeout(()=>{let{onUnhandledError:e}=vt;if(e)e(t);else throw t})}function Ni(){}var Rh=Ll("C",void 0,void 0);function Ph(t){return Ll("E",void 0,t)}function Fh(t){return Ll("N",t,void 0)}function Ll(t,e,n){return{kind:t,value:e,error:n}}var Pn=null;function br(t){if(vt.useDeprecatedSynchronousErrorHandling){let e=!Pn;if(e&&(Pn={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Pn;if(Pn=null,n)throw r}}else t()}function Lh(t){vt.useDeprecatedSynchronousErrorHandling&&Pn&&(Pn.errorThrown=!0,Pn.error=t)}var Fn=class extends he{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Go(e)&&e.add(this)):this.destination=lC}static create(e,n,r){return new Er(e,n,r)}next(e){this.isStopped?jl(Fh(e),this):this._next(e)}error(e){this.isStopped?jl(Ph(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?jl(Rh,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},sC=Function.prototype.bind;function Vl(t,e){return sC.call(t,e)}var Bl=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Yo(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Yo(r)}else Yo(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Yo(n)}}},Er=class extends Fn{constructor(e,n,r){super();let i;if(A(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&vt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Vl(e.next,o),error:e.error&&Vl(e.error,o),complete:e.complete&&Vl(e.complete,o)}):i=e}this.destination=new Bl(i)}};function Yo(t){vt.useDeprecatedSynchronousErrorHandling?Lh(t):qo(t)}function aC(t){throw t}function jl(t,e){let{onStoppedNotification:n}=vt;n&&wr.setTimeout(()=>n(t,e))}var lC={closed:!0,next:Ni,error:aC,complete:Ni};var Mr=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Qe(t){return t}function $l(...t){return Hl(t)}function Hl(t){return t.length===0?Qe:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var Y=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=uC(n)?n:new Er(n,r,i);return br(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Vh(r),new r((i,o)=>{let s=new Er({next:a=>{try{n(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Mr](){return this}pipe(...n){return Hl(n)(this)}toPromise(n){return n=Vh(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function Vh(t){var e;return(e=t??vt.Promise)!==null&&e!==void 0?e:Promise}function cC(t){return t&&A(t.next)&&A(t.error)&&A(t.complete)}function uC(t){return t&&t instanceof Fn||cC(t)&&Go(t)}function Ul(t){return A(t?.lift)}function U(t){return e=>{if(Ul(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function B(t,e,n,r,i){return new zl(t,e,n,r,i)}var zl=class extends Fn{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Sr(){return U((t,e)=>{let n=null;t._refCount++;let r=B(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var xr=class extends Y{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Ul(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new he;let n=this.getSubject();e.add(this.source.subscribe(B(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=he.EMPTY)}return e}refCount(){return Sr()(this)}};var jh=Cr(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var le=(()=>{class t extends Y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Ko(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new jh}next(n){br(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){br(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){br(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Fl:(this.currentObservers=null,o.push(n),new he(()=>{this.currentObservers=null,_i(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new Y;return n.source=this,n}}return t.create=(e,n)=>new Ko(e,n),t})(),Ko=class extends le{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Fl}};var ce=class extends le{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var at=new Y(t=>t.complete());function Bh(t){return t&&A(t.schedule)}function $h(t){return t[t.length-1]}function Zo(t){return A($h(t))?t.pop():void 0}function on(t){return Bh($h(t))?t.pop():void 0}function Uh(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function Hh(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ln(t){return this instanceof Ln?(this.v=t,this):new Ln(t)}function zh(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(f){r[f]&&(i[f]=function(h){return new Promise(function(p,m){o.push([f,h,p,m])>1||a(f,h)})})}function a(f,h){try{l(r[f](h))}catch(p){d(o[0][3],p)}}function l(f){f.value instanceof Ln?Promise.resolve(f.value.v).then(c,u):d(o[0][2],f)}function c(f){a("next",f)}function u(f){a("throw",f)}function d(f,h){f(h),o.shift(),o.length&&a(o[0][0],o[0][1])}}function Wh(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Hh=="function"?Hh(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,l){s=t[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}var Jo=t=>t&&typeof t.length=="number"&&typeof t!="function";function Qo(t){return A(t?.then)}function Xo(t){return A(t[Mr])}function es(t){return Symbol.asyncIterator&&A(t?.[Symbol.asyncIterator])}function ts(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function dC(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ns=dC();function rs(t){return A(t?.[ns])}function is(t){return zh(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Ln(n.read());if(i)return yield Ln(void 0);yield yield Ln(r)}}finally{n.releaseLock()}})}function ss(t){return A(t?.getReader)}function ue(t){if(t instanceof Y)return t;if(t!=null){if(Xo(t))return fC(t);if(Jo(t))return hC(t);if(Qo(t))return pC(t);if(es(t))return Gh(t);if(rs(t))return mC(t);if(ss(t))return gC(t)}throw ts(t)}function fC(t){return new Y(e=>{let n=t[Mr]();if(A(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function hC(t){return new Y(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function pC(t){return new Y(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,qo)})}function mC(t){return new Y(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Gh(t){return new Y(e=>{yC(t,e).catch(n=>e.error(n))})}function gC(t){return Gh(is(t))}function yC(t,e){var n,r,i,o;return Uh(this,void 0,void 0,function*(){try{for(n=Wh(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function We(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function as(t,e=0){return U((n,r)=>{n.subscribe(B(r,i=>We(r,t,()=>r.next(i),e),()=>We(r,t,()=>r.complete(),e),i=>We(r,t,()=>r.error(i),e)))})}function ls(t,e=0){return U((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function qh(t,e){return ue(t).pipe(ls(e),as(e))}function Yh(t,e){return ue(t).pipe(ls(e),as(e))}function Kh(t,e){return new Y(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Zh(t,e){return new Y(n=>{let r;return We(n,e,()=>{r=t[ns](),We(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>A(r?.return)&&r.return()})}function cs(t,e){if(!t)throw new Error("Iterable cannot be null");return new Y(n=>{We(n,e,()=>{let r=t[Symbol.asyncIterator]();We(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Jh(t,e){return cs(is(t),e)}function Qh(t,e){if(t!=null){if(Xo(t))return qh(t,e);if(Jo(t))return Kh(t,e);if(Qo(t))return Yh(t,e);if(es(t))return cs(t,e);if(rs(t))return Zh(t,e);if(ss(t))return Jh(t,e)}throw ts(t)}function ie(t,e){return e?Qh(t,e):ue(t)}function T(...t){let e=on(t);return ie(t,e)}function Ir(t,e){let n=A(t)?t:()=>t,r=i=>i.error(n());return new Y(e?i=>e.schedule(r,0,i):r)}function Wl(t){return!!t&&(t instanceof Y||A(t.lift)&&A(t.subscribe))}var Gt=Cr(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function $(t,e){return U((n,r)=>{let i=0;n.subscribe(B(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:vC}=Array;function DC(t,e){return vC(e)?t(...e):t(e)}function us(t){return $(e=>DC(t,e))}var{isArray:CC}=Array,{getPrototypeOf:wC,prototype:bC,keys:EC}=Object;function ds(t){if(t.length===1){let e=t[0];if(CC(e))return{args:e,keys:null};if(MC(e)){let n=EC(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function MC(t){return t&&typeof t=="object"&&wC(t)===bC}function fs(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function hs(...t){let e=on(t),n=Zo(t),{args:r,keys:i}=ds(t);if(r.length===0)return ie([],e);let o=new Y(SC(r,e,i?s=>fs(i,s):Qe));return n?o.pipe(us(n)):o}function SC(t,e,n=Qe){return r=>{Xh(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let l=0;l<i;l++)Xh(e,()=>{let c=ie(t[l],e),u=!1;c.subscribe(B(r,d=>{o[l]=d,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Xh(t,e,n){t?We(n,t,e):e()}function ep(t,e,n,r,i,o,s,a){let l=[],c=0,u=0,d=!1,f=()=>{d&&!l.length&&!c&&e.complete()},h=m=>c<r?p(m):l.push(m),p=m=>{o&&e.next(m),c++;let v=!1;ue(n(m,u++)).subscribe(B(e,y=>{i?.(y),o?h(y):e.next(y)},()=>{v=!0},void 0,()=>{if(v)try{for(c--;l.length&&c<r;){let y=l.shift();s?We(e,s,()=>p(y)):p(y)}f()}catch(y){e.error(y)}}))};return t.subscribe(B(e,h,()=>{d=!0,f()})),()=>{a?.()}}function pe(t,e,n=1/0){return A(e)?pe((r,i)=>$((o,s)=>e(r,o,i,s))(ue(t(r,i))),n):(typeof e=="number"&&(n=e),U((r,i)=>ep(r,i,t,n)))}function Tr(t=1/0){return pe(Qe,t)}function tp(){return Tr(1)}function Ar(...t){return tp()(ie(t,on(t)))}function ps(t){return new Y(e=>{ue(t()).subscribe(e)})}function Gl(...t){let e=Zo(t),{args:n,keys:r}=ds(t),i=new Y(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),l=s,c=s;for(let u=0;u<s;u++){let d=!1;ue(n[u]).subscribe(B(o,f=>{d||(d=!0,c--),a[u]=f},()=>l--,void 0,()=>{(!l||!d)&&(c||o.next(r?fs(r,a):a),o.complete())}))}});return e?i.pipe(us(e)):i}function Dt(t,e){return U((n,r)=>{let i=0;n.subscribe(B(r,o=>t.call(e,o,i++)&&r.next(o)))})}function sn(t){return U((e,n)=>{let r=null,i=!1,o;r=e.subscribe(B(n,void 0,void 0,s=>{o=ue(t(s,sn(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function np(t,e,n,r,i){return(o,s)=>{let a=n,l=e,c=0;o.subscribe(B(s,u=>{let d=c++;l=a?t(l,u,d):(a=!0,u),r&&s.next(l)},i&&(()=>{a&&s.next(l),s.complete()})))}}function _r(t,e){return A(e)?pe(t,e,1):pe(t,1)}function an(t){return U((e,n)=>{let r=!1;e.subscribe(B(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function qt(t){return t<=0?()=>at:U((e,n)=>{let r=0;e.subscribe(B(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function ql(t){return $(()=>t)}function ms(t=xC){return U((e,n)=>{let r=!1;e.subscribe(B(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function xC(){return new Gt}function ki(t){return U((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function xt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Dt((i,o)=>t(i,o,r)):Qe,qt(1),n?an(e):ms(()=>new Gt))}function Nr(t){return t<=0?()=>at:U((e,n)=>{let r=[];e.subscribe(B(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Yl(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Dt((i,o)=>t(i,o,r)):Qe,Nr(1),n?an(e):ms(()=>new Gt))}function Kl(t,e){return U(np(t,e,arguments.length>=2,!0))}function kr(...t){let e=on(t);return U((n,r)=>{(e?Ar(t,n,e):Ar(t,n)).subscribe(r)})}function Ct(t,e){return U((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(B(r,l=>{i?.unsubscribe();let c=0,u=o++;ue(t(l,u)).subscribe(i=B(r,d=>r.next(e?e(l,d,u,c++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Zl(t){return U((e,n)=>{ue(t).subscribe(B(n,()=>n.complete(),Ni)),!n.closed&&e.subscribe(n)})}function ve(t,e,n){let r=A(t)||e||n?{next:t,error:e,complete:n}:t;return r?U((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(B(o,l=>{var c;(c=r.next)===null||c===void 0||c.call(r,l),o.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},l=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,l),o.error(l)},()=>{var l,c;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):Qe}var $p="https://g.co/ng/security#xss",M=class extends Error{constructor(e,n){super(ou(e,n)),this.code=e}};function ou(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function X(t){for(let e in t)if(t[e]===X)return e;throw Error("Could not find renamed property on target object.")}function IC(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Ge(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Ge).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function rp(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var TC=X({__forward_ref__:X});function fn(t){return t.__forward_ref__=fn,t.toString=function(){return Ge(this())},t}function $e(t){return Hp(t)?t():t}function Hp(t){return typeof t=="function"&&t.hasOwnProperty(TC)&&t.__forward_ref__===fn}function Up(t){return t&&!!t.\u0275providers}var AC=X({\u0275cmp:X}),_C=X({\u0275dir:X}),NC=X({\u0275pipe:X}),kC=X({\u0275mod:X}),Ss=X({\u0275fac:X}),Oi=X({__NG_ELEMENT_ID__:X}),ip=X({__NG_ENV_ID__:X});function Gs(t){return typeof t=="string"?t:t==null?"":String(t)}function OC(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Gs(t)}function RC(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new M(-200,`Circular dependency in DI detected for ${t}${n}`)}function su(t,e){throw new M(-201,!1)}function PC(t,e){t==null&&FC(e,t,null,"!=")}function FC(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(r==null?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function S(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function hn(t){return{providers:t.providers||[],imports:t.imports||[]}}function qs(t){return op(t,Wp)||op(t,Gp)}function zp(t){return qs(t)!==null}function op(t,e){return t.hasOwnProperty(e)?t[e]:null}function LC(t){let e=t&&(t[Wp]||t[Gp]);return e||null}function sp(t){return t&&(t.hasOwnProperty(ap)||t.hasOwnProperty(VC))?t[ap]:null}var Wp=X({\u0275prov:X}),ap=X({\u0275inj:X}),Gp=X({ngInjectableDef:X}),VC=X({ngInjectorDef:X}),L=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(L||{}),hc;function qp(){return hc}function lt(t){let e=hc;return hc=t,e}function Yp(t,e,n){let r=qs(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&L.Optional)return null;if(e!==void 0)return e;su(t,"Injector")}var Vn=globalThis;var N=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=S({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};var jC={},Ri=jC,BC="__NG_DI_FLAG__",xs="ngTempTokenPath",$C="ngTokenPath",HC=/\n/gm,UC="\u0275",lp="__source",Lr;function zC(){return Lr}function ln(t){let e=Lr;return Lr=t,e}function WC(t,e=L.Default){if(Lr===void 0)throw new M(-203,!1);return Lr===null?Yp(t,void 0,e):Lr.get(t,e&L.Optional?null:void 0,e)}function V(t,e=L.Default){return(qp()||WC)($e(t),e)}function D(t,e=L.Default){return V(t,Ys(e))}function Ys(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function pc(t){let e=[];for(let n=0;n<t.length;n++){let r=$e(t[n]);if(Array.isArray(r)){if(r.length===0)throw new M(900,!1);let i,o=L.Default;for(let s=0;s<r.length;s++){let a=r[s],l=GC(a);typeof l=="number"?l===-1?i=a.token:o|=l:i=a}e.push(V(i,o))}else e.push(V(r))}return e}function GC(t){return t[BC]}function qC(t,e,n,r){let i=t[xs];throw e[lp]&&i.unshift(e[lp]),t.message=YC(`
`+t.message,i,n,r),t[$C]=i,t[xs]=null,t}function YC(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==UC?t.slice(2):t;let i=Ge(e);if(Array.isArray(e))i=e.map(Ge).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Ge(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(HC,`
  `)}`}function Ks(t){return{toString:t}.toString()}var Kp=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Kp||{}),_t=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(_t||{}),jr={},ct=[],Ee=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Ee||{});function Zp(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function mc(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];KC(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function Jp(t){return t===3||t===4||t===6}function KC(t){return t.charCodeAt(0)===64}function Pi(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?cp(t,n,i,null,e[++r]):cp(t,n,i,null,null))}}return t}function cp(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var Qp="ng-template";function ZC(t,e,n){let r=0,i=!0;for(;r<t.length;){let o=t[r++];if(typeof o=="string"&&i){let s=t[r++];if(n&&o==="class"&&Zp(s.toLowerCase(),e,0)!==-1)return!0}else if(o===1){for(;r<t.length&&typeof(o=t[r++])=="string";)if(o.toLowerCase()===e)return!0;return!1}else typeof o=="number"&&(i=!1)}return!1}function Xp(t){return t.type===4&&t.value!==Qp}function JC(t,e,n){let r=t.type===4&&!n?Qp:t.value;return e===r}function QC(t,e,n){let r=4,i=t.attrs||[],o=tw(i),s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!wt(r)&&!wt(l))return!1;if(s&&wt(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!JC(t,l,n)||l===""&&e.length===1){if(wt(r))return!1;s=!0}}else{let c=r&8?l:e[++a];if(r&8&&t.attrs!==null){if(!ZC(t.attrs,c,n)){if(wt(r))return!1;s=!0}continue}let u=r&8?"class":l,d=XC(u,i,Xp(t),n);if(d===-1){if(wt(r))return!1;s=!0;continue}if(c!==""){let f;d>o?f="":f=i[d+1].toLowerCase();let h=r&8?f:null;if(h&&Zp(h,c,0)!==-1||r&2&&c!==f){if(wt(r))return!1;s=!0}}}}return wt(r)||s}function wt(t){return(t&1)===0}function XC(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return nw(e,t)}function em(t,e,n=!1){for(let r=0;r<e.length;r++)if(QC(t,e[r],n))return!0;return!1}function ew(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if(!(n&1))return e[n+1]}return null}function tw(t){for(let e=0;e<t.length;e++){let n=t[e];if(Jp(n))return e}return t.length}function nw(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function rw(t,e){e:for(let n=0;n<e.length;n++){let r=e[n];if(t.length===r.length){for(let i=0;i<t.length;i++)if(t[i]!==r[i])continue e;return!0}}return!1}function up(t,e){return t?":not("+e.trim()+")":e}function iw(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!wt(s)&&(e+=up(o,i),i=""),r=s,o=o||!wt(r);n++}return i!==""&&(e+=up(o,i)),e}function ow(t){return t.map(iw).join(",")}function sw(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!wt(i))break;i=o}r++}return{attrs:e,classes:n}}function ke(t){return Ks(()=>{let e=om(t),n=F(g({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Kp.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||_t.Emulated,styles:t.styles||ct,_:null,schemas:t.schemas||null,tView:null,id:""});sm(n);let r=t.dependencies;return n.directiveDefs=fp(r,!1),n.pipeDefs=fp(r,!0),n.id=cw(n),n})}function aw(t){return $n(t)||tm(t)}function lw(t){return t!==null}function pn(t){return Ks(()=>({type:t.type,bootstrap:t.bootstrap||ct,declarations:t.declarations||ct,imports:t.imports||ct,exports:t.exports||ct,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function dp(t,e){if(t==null)return jr;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=Ee.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==Ee.None?[r,a]:r,e[o]=s):n[o]=r}return n}function Oe(t){return Ks(()=>{let e=om(t);return sm(e),e})}function $n(t){return t[AC]||null}function tm(t){return t[_C]||null}function nm(t){return t[NC]||null}function rm(t){let e=$n(t)||tm(t)||nm(t);return e!==null?e.standalone:!1}function im(t,e){let n=t[kC]||null;if(!n&&e===!0)throw new Error(`Type ${Ge(t)} does not have '\u0275mod' property.`);return n}function om(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||jr,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||ct,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:dp(t.inputs,e),outputs:dp(t.outputs),debugInfo:null}}function sm(t){t.features?.forEach(e=>e(t))}function fp(t,e){if(!t)return null;let n=e?nm:aw;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(lw)}function cw(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}var Zt=0,O=1,x=2,Me=3,bt=4,Xe=5,Br=6,Fi=7,He=8,$r=9,Yt=10,De=11,Li=12,hp=13,qr=14,ut=15,Yi=16,Or=17,At=18,Zs=19,am=20,cn=21,Jl=22,Hn=23,Nt=25,lm=1;var Un=7,Is=8,Hr=9,Ne=10,au=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(au||{});function jn(t){return Array.isArray(t)&&typeof t[lm]=="object"}function Jt(t){return Array.isArray(t)&&t[lm]===!0}function cm(t){return(t.flags&4)!==0}function Js(t){return t.componentOffset>-1}function lu(t){return(t.flags&1)===1}function un(t){return!!t.template}function uw(t){return(t[x]&512)!==0}function Ur(t,e){let n=t.hasOwnProperty(Ss);return n?t[Ss]:null}var gc=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function um(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Rt(){return dm}function dm(t){return t.type.prototype.ngOnChanges&&(t.setInput=fw),dw}Rt.ngInherit=!0;function dw(){let t=hm(this),e=t?.current;if(e){let n=t.previous;if(n===jr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function fw(t,e,n,r,i){let o=this.declaredInputs[r],s=hm(t)||hw(t,{previous:jr,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[o];a[o]=new gc(c&&c.currentValue,n,l===jr),um(t,e,i,n)}var fm="__ngSimpleChanges__";function hm(t){return t[fm]||null}function hw(t,e){return t[fm]=e}var pp=null;var It=function(t,e,n){pp?.(t,e,n)},pm="svg",pw="math",mw=!1;function gw(){return mw}function kt(t){for(;Array.isArray(t);)t=t[Zt];return t}function mm(t,e){return kt(e[t])}function ft(t,e){return kt(e[t.index])}function cu(t,e){return t.data[e]}function mn(t,e){let n=e[t];return jn(n)?n:n[Zt]}function yw(t){return(t[x]&4)===4}function uu(t){return(t[x]&128)===128}function vw(t){return Jt(t[Me])}function Ts(t,e){return e==null?null:t[e]}function gm(t){t[Or]=0}function Dw(t){t[x]&1024||(t[x]|=1024,uu(t)&&Vi(t))}function Cw(t,e){for(;t>0;)e=e[qr],t--;return e}function ym(t){return t[x]&9216||t[Hn]?.dirty}function yc(t){ym(t)?Vi(t):t[x]&64&&(gw()?(t[x]|=1024,Vi(t)):t[Yt].changeDetectionScheduler?.notify())}function Vi(t){t[Yt].changeDetectionScheduler?.notify();let e=ji(t);for(;e!==null&&!(e[x]&8192||(e[x]|=8192,!uu(e)));)e=ji(e)}function vm(t,e){if((t[x]&256)===256)throw new M(911,!1);t[cn]===null&&(t[cn]=[]),t[cn].push(e)}function ww(t,e){if(t[cn]===null)return;let n=t[cn].indexOf(e);n!==-1&&t[cn].splice(n,1)}function ji(t){let e=t[Me];return Jt(e)?e[Me]:e}var j={lFrame:Im(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function bw(){return j.lFrame.elementDepthCount}function Ew(){j.lFrame.elementDepthCount++}function Mw(){j.lFrame.elementDepthCount--}function Dm(){return j.bindingsEnabled}function Cm(){return j.skipHydrationRootTNode!==null}function Sw(t){return j.skipHydrationRootTNode===t}function xw(){j.skipHydrationRootTNode=null}function W(){return j.lFrame.lView}function Ue(){return j.lFrame.tView}function gn(t){return j.lFrame.contextLView=t,t[He]}function yn(t){return j.lFrame.contextLView=null,t}function qe(){let t=wm();for(;t!==null&&t.type===64;)t=t.parent;return t}function wm(){return j.lFrame.currentTNode}function Iw(){let t=j.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Ki(t,e){let n=j.lFrame;n.currentTNode=t,n.isParent=e}function bm(){return j.lFrame.isParent}function Em(){j.lFrame.isParent=!1}function Tw(t){return j.lFrame.bindingIndex=t}function Qs(){return j.lFrame.bindingIndex++}function Aw(t){let e=j.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function _w(){return j.lFrame.inI18n}function Nw(t,e){let n=j.lFrame;n.bindingIndex=n.bindingRootIndex=t,vc(e)}function kw(){return j.lFrame.currentDirectiveIndex}function vc(t){j.lFrame.currentDirectiveIndex=t}function Ow(t){let e=j.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Mm(){return j.lFrame.currentQueryIndex}function du(t){j.lFrame.currentQueryIndex=t}function Rw(t){let e=t[O];return e.type===2?e.declTNode:e.type===1?t[Xe]:null}function Sm(t,e,n){if(n&L.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&L.Host);)if(i=Rw(o),i===null||(o=o[qr],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=j.lFrame=xm();return r.currentTNode=e,r.lView=t,!0}function fu(t){let e=xm(),n=t[O];j.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function xm(){let t=j.lFrame,e=t===null?null:t.child;return e===null?Im(t):e}function Im(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function Tm(){let t=j.lFrame;return j.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Am=Tm;function hu(){let t=Tm();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Pw(t){return(j.lFrame.contextLView=Cw(t,j.lFrame.contextLView))[He]}function Zn(){return j.lFrame.selectedIndex}function zn(t){j.lFrame.selectedIndex=t}function _m(){let t=j.lFrame;return cu(t.tView,t.selectedIndex)}function Zi(){j.lFrame.currentNamespace=pm}function Fw(){return j.lFrame.currentNamespace}var Nm=!0;function pu(){return Nm}function mu(t){Nm=t}function Lw(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=dm(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function gu(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),l&&(t.viewHooks??=[]).push(-n,l),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function Ds(t,e,n){km(t,e,3,n)}function Cs(t,e,n,r){(t[x]&3)===n&&km(t,e,n,r)}function Ql(t,e){let n=t[x];(n&3)===e&&(n&=16383,n+=1,t[x]=n)}function km(t,e,n,r){let i=r!==void 0?t[Or]&65535:0,o=r??-1,s=e.length-1,a=0;for(let l=i;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(t[Or]+=65536),(a<o||o==-1)&&(Vw(t,n,e,l),t[Or]=(t[Or]&4294901760)+l+2),l++}function mp(t,e){It(4,t,e);let n=Be(null);try{e.call(t)}finally{Be(n),It(5,t,e)}}function Vw(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[x]>>14<t[Or]>>16&&(t[x]&3)===e&&(t[x]+=16384,mp(a,o)):mp(a,o)}var Vr=-1,Wn=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function jw(t){return t instanceof Wn}function Bw(t){return(t.flags&8)!==0}function $w(t){return(t.flags&16)!==0}function Om(t){return t!==Vr}function As(t){return t&32767}function Hw(t){return t>>16}function _s(t,e){let n=Hw(t),r=e;for(;n>0;)r=r[qr],n--;return r}var Dc=!0;function gp(t){let e=Dc;return Dc=t,e}var Uw=256,Rm=Uw-1,Pm=5,zw=0,Tt={};function Ww(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Oi)&&(r=n[Oi]),r==null&&(r=n[Oi]=zw++);let i=r&Rm,o=1<<i;e.data[t+(i>>Pm)]|=o}function Ns(t,e){let n=Fm(t,e);if(n!==-1)return n;let r=e[O];r.firstCreatePass&&(t.injectorIndex=e.length,Xl(r.data,t),Xl(e,null),Xl(r.blueprint,null));let i=yu(t,e),o=t.injectorIndex;if(Om(i)){let s=As(i),a=_s(i,e),l=a[O].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|l[s+c]}return e[o+8]=i,o}function Xl(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Fm(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function yu(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=$m(i),r===null)return Vr;if(n++,i=i[qr],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Vr}function Cc(t,e,n){Ww(t,e,n)}function Gw(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(Jp(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function Lm(t,e,n){if(n&L.Optional||t!==void 0)return t;su(e,"NodeInjector")}function Vm(t,e,n,r){if(n&L.Optional&&r===void 0&&(r=null),!(n&(L.Self|L.Host))){let i=t[$r],o=lt(void 0);try{return i?i.get(e,r,n&L.Optional):Yp(e,r,n&L.Optional)}finally{lt(o)}}return Lm(r,e,n)}function jm(t,e,n,r=L.Default,i){if(t!==null){if(e[x]&2048&&!(r&L.Self)){let s=Zw(t,e,n,r,Tt);if(s!==Tt)return s}let o=Bm(t,e,n,r,Tt);if(o!==Tt)return o}return Vm(e,n,r,i)}function Bm(t,e,n,r,i){let o=Yw(n);if(typeof o=="function"){if(!Sm(e,t,r))return r&L.Host?Lm(i,n,r):Vm(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&L.Optional))su(n);else return s}finally{Am()}}else if(typeof o=="number"){let s=null,a=Fm(t,e),l=Vr,c=r&L.Host?e[ut][Xe]:null;for((a===-1||r&L.SkipSelf)&&(l=a===-1?yu(t,e):e[a+8],l===Vr||!vp(r,!1)?a=-1:(s=e[O],a=As(l),e=_s(l,e)));a!==-1;){let u=e[O];if(yp(o,a,u.data)){let d=qw(a,e,n,s,r,c);if(d!==Tt)return d}l=e[a+8],l!==Vr&&vp(r,e[O].data[a+8]===c)&&yp(o,a,e)?(s=u,a=As(l),e=_s(l,e)):a=-1}}return i}function qw(t,e,n,r,i,o){let s=e[O],a=s.data[t+8],l=r==null?Js(a)&&Dc:r!=s&&(a.type&3)!==0,c=i&L.Host&&o===a,u=ws(a,s,n,l,c);return u!==null?Gn(e,s,u,a):Tt}function ws(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,l=t.directiveStart,c=t.directiveEnd,u=o>>20,d=r?a:a+u,f=i?a+u:c;for(let h=d;h<f;h++){let p=s[h];if(h<l&&n===p||h>=l&&p.type===n)return h}if(i){let h=s[l];if(h&&un(h)&&h.type===n)return l}return null}function Gn(t,e,n,r){let i=t[n],o=e.data;if(jw(i)){let s=i;s.resolving&&RC(OC(o[n]));let a=gp(s.canSeeViewProviders);s.resolving=!0;let l,c=s.injectImpl?lt(s.injectImpl):null,u=Sm(t,r,L.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&Lw(n,o[n],e)}finally{c!==null&&lt(c),gp(a),s.resolving=!1,Am()}}return i}function Yw(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Oi)?t[Oi]:void 0;return typeof e=="number"?e>=0?e&Rm:Kw:e}function yp(t,e,n){let r=1<<t;return!!(n[e+(t>>Pm)]&r)}function vp(t,e){return!(t&L.Self)&&!(t&L.Host&&e)}var Bn=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return jm(this._tNode,this._lView,e,Ys(r),n)}};function Kw(){return new Bn(qe(),W())}function Jn(t){return Ks(()=>{let e=t.prototype.constructor,n=e[Ss]||wc(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Ss]||wc(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function wc(t){return Hp(t)?()=>{let e=wc($e(t));return e&&e()}:Ur(t)}function Zw(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[x]&2048&&!(s[x]&512);){let a=Bm(o,s,n,r|L.Self,Tt);if(a!==Tt)return a;let l=o.parent;if(!l){let c=s[am];if(c){let u=c.get(n,Tt,r);if(u!==Tt)return u}l=$m(s),s=s[qr]}o=l}return i}function $m(t){let e=t[O],n=e.type;return n===2?e.declTNode:n===1?t[Xe]:null}function vu(t){return Gw(qe(),t)}function Jw(t){return typeof t=="function"}function Qw(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function Xw(t){return t.flat(Number.POSITIVE_INFINITY)}function Du(t,e){t.forEach(n=>Array.isArray(n)?Du(n,e):e(n))}function Hm(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ks(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function eb(t,e){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function tb(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function nb(t,e,n){let r=Ji(t,e);return r>=0?t[r|1]=n:(r=~r,tb(t,r,e,n)),r}function ec(t,e){let n=Ji(t,e);if(n>=0)return t[n|1]}function Ji(t,e){return rb(t,e,1)}function rb(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var zr=new N("ENVIRONMENT_INITIALIZER"),Um=new N("INJECTOR",-1),zm=new N("INJECTOR_DEF_TYPES"),Os=class{get(e,n=Ri){if(n===Ri){let r=new Error(`NullInjectorError: No provider for ${Ge(e)}!`);throw r.name="NullInjectorError",r}return n}};function Xs(t){return{\u0275providers:t}}function ib(...t){return{\u0275providers:Wm(!0,t),\u0275fromNgModule:!0}}function Wm(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Du(e,s=>{let a=s;bc(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Gm(i,o),n}function Gm(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Cu(i,o=>{e(o,r)})}}function bc(t,e,n,r){if(t=$e(t),!t)return!1;let i=null,o=sp(t),s=!o&&$n(t);if(!o&&!s){let l=t.ngModule;if(o=sp(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)bc(c,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let c;try{Du(o.imports,u=>{bc(u,e,n,r)&&(c||=[],c.push(u))})}finally{}c!==void 0&&Gm(c,e)}if(!a){let c=Ur(i)||(()=>new i);e({provide:i,useFactory:c,deps:ct},i),e({provide:zm,useValue:i,multi:!0},i),e({provide:zr,useValue:()=>V(i),multi:!0},i)}let l=o.providers;if(l!=null&&!a){let c=t;Cu(l,u=>{e(u,c)})}}else return!1;return i!==t&&t.providers!==void 0}function Cu(t,e){for(let n of t)Up(n)&&(n=n.\u0275providers),Array.isArray(n)?Cu(n,e):e(n)}var ob=X({provide:String,useValue:X});function qm(t){return t!==null&&typeof t=="object"&&ob in t}function sb(t){return!!(t&&t.useExisting)}function ab(t){return!!(t&&t.useFactory)}function Wr(t){return typeof t=="function"}function lb(t){return!!t.useClass}var ea=new N("Set Injector scope."),bs={},cb={},tc;function wu(){return tc===void 0&&(tc=new Os),tc}var dt=class{},Bi=class extends dt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Mc(e,s=>this.processProvider(s)),this.records.set(Um,Rr(void 0,this)),i.has("environment")&&this.records.set(dt,Rr(void 0,this));let o=this.records.get(ea);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(zm,ct,L.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=ln(this),r=lt(void 0),i;try{return e()}finally{ln(n),lt(r)}}get(e,n=Ri,r=L.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(ip))return e[ip](this);r=Ys(r);let i,o=ln(this),s=lt(void 0);try{if(!(r&L.SkipSelf)){let l=this.records.get(e);if(l===void 0){let c=pb(e)&&qs(e);c&&this.injectableDefInScope(c)?l=Rr(Ec(e),bs):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=r&L.Self?wu():this.parent;return n=r&L.Optional&&n===Ri?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[xs]=a[xs]||[]).unshift(Ge(e)),o)throw a;return qC(a,e,"R3InjectorError",this.source)}else throw a}finally{lt(s),ln(o)}}resolveInjectorInitializers(){let e=ln(this),n=lt(void 0),r;try{let i=this.get(zr,ct,L.Self);for(let o of i)o()}finally{ln(e),lt(n)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Ge(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new M(205,!1)}processProvider(e){e=$e(e);let n=Wr(e)?e:$e(e&&e.provide),r=db(e);if(!Wr(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Rr(void 0,bs,!0),i.factory=()=>pc(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===bs&&(n.value=cb,n.value=n.factory()),typeof n.value=="object"&&n.value&&hb(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;let n=$e(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Ec(t){let e=qs(t),n=e!==null?e.factory:Ur(t);if(n!==null)return n;if(t instanceof N)throw new M(204,!1);if(t instanceof Function)return ub(t);throw new M(204,!1)}function ub(t){if(t.length>0)throw new M(204,!1);let n=LC(t);return n!==null?()=>n.factory(t):()=>new t}function db(t){if(qm(t))return Rr(void 0,t.useValue);{let e=Ym(t);return Rr(e,bs)}}function Ym(t,e,n){let r;if(Wr(t)){let i=$e(t);return Ur(i)||Ec(i)}else if(qm(t))r=()=>$e(t.useValue);else if(ab(t))r=()=>t.useFactory(...pc(t.deps||[]));else if(sb(t))r=()=>V($e(t.useExisting));else{let i=$e(t&&(t.useClass||t.provide));if(fb(t))r=()=>new i(...pc(t.deps));else return Ur(i)||Ec(i)}return r}function Rr(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function fb(t){return!!t.deps}function hb(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function pb(t){return typeof t=="function"||typeof t=="object"&&t instanceof N}function Mc(t,e){for(let n of t)Array.isArray(n)?Mc(n,e):n&&Up(n)?Mc(n.\u0275providers,e):e(n)}function vn(t,e){t instanceof Bi&&t.assertNotDestroyed();let n,r=ln(t),i=lt(void 0);try{return e()}finally{ln(r),lt(i)}}function mb(t){if(!qp()&&!zC())throw new M(-203,!1)}function Dp(t,e=null,n=null,r){let i=Km(t,e,n,r);return i.resolveInjectorInitializers(),i}function Km(t,e=null,n=null,r,i=new Set){let o=[n||ct,ib(t)];return r=r||(typeof t=="object"?void 0:Ge(t)),new Bi(o,e||wu(),r||null,i)}var Pt=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return Dp({name:""},i,r,"");{let o=r.name??"";return Dp({name:o},r.parent,r.providers,o)}}};e.THROW_IF_NOT_FOUND=Ri,e.NULL=new Os,e.\u0275prov=S({token:e,providedIn:"any",factory:()=>V(Um)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var Sc;function Zm(t){Sc=t}function gb(){if(Sc!==void 0)return Sc;if(typeof document<"u")return document;throw new M(210,!1)}var bu=new N("AppId",{providedIn:"root",factory:()=>yb}),yb="ng",Eu=new N("Platform Initializer"),Qn=new N("Platform ID",{providedIn:"platform",factory:()=>"unknown"});var Mu=new N("CSP nonce",{providedIn:"root",factory:()=>gb().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function Jm(t){return t instanceof Function?t():t}function vb(t){return(t??D(Pt)).get(Qn)==="browser"}function Qm(t){return(t.flags&128)===128}var Kt=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Kt||{});var Xm=new Map,Db=0;function Cb(){return Db++}function wb(t){Xm.set(t[Zs],t)}function bb(t){Xm.delete(t[Zs])}var Cp="__ngContext__";function qn(t,e){jn(e)?(t[Cp]=e[Zs],wb(e)):t[Cp]=e}var Eb;function Su(t,e){return Eb(t,e)}function Pr(t,e,n,r,i){if(r!=null){let o,s=!1;Jt(r)?o=r:jn(r)&&(s=!0,r=r[Zt]);let a=kt(r);t===0&&n!==null?i==null?ig(e,n,a):Rs(e,n,a,i||null,!0):t===1&&n!==null?Rs(e,n,a,i||null,!0):t===2?Vb(e,a,s):t===3&&e.destroyNode(a),o!=null&&Bb(e,t,o,n,i)}}function Mb(t,e){return t.createText(e)}function Sb(t,e,n){t.setValue(e,n)}function eg(t,e,n){return t.createElement(e,n)}function xb(t,e){tg(t,e),e[Zt]=null,e[Xe]=null}function Ib(t,e,n,r,i,o){r[Zt]=i,r[Xe]=e,na(t,r,n,1,i,o)}function tg(t,e){na(t,e,e[De],2,null,null)}function Tb(t){let e=t[Li];if(!e)return nc(t[O],t);for(;e;){let n=null;if(jn(e))n=e[Li];else{let r=e[Ne];r&&(n=r)}if(!n){for(;e&&!e[bt]&&e!==t;)jn(e)&&nc(e[O],e),e=e[Me];e===null&&(e=t),jn(e)&&nc(e[O],e),n=e&&e[bt]}e=n}}function Ab(t,e,n,r){let i=Ne+r,o=n.length;r>0&&(n[i-1][bt]=e),r<o-Ne?(e[bt]=n[i],Hm(n,Ne+r,e)):(n.push(e),e[bt]=null),e[Me]=n;let s=e[Yi];s!==null&&n!==s&&_b(s,e);let a=e[At];a!==null&&a.insertView(t),yc(e),e[x]|=128}function _b(t,e){let n=t[Hr],i=e[Me][Me][ut];e[ut]!==i&&(t[x]|=au.HasTransplantedViews),n===null?t[Hr]=[e]:n.push(e)}function ng(t,e){let n=t[Hr],r=n.indexOf(e);n.splice(r,1)}function $i(t,e){if(t.length<=Ne)return;let n=Ne+e,r=t[n];if(r){let i=r[Yi];i!==null&&i!==t&&ng(i,r),e>0&&(t[n-1][bt]=r[bt]);let o=ks(t,Ne+e);xb(r[O],r);let s=o[At];s!==null&&s.detachView(o[O]),r[Me]=null,r[bt]=null,r[x]&=-129}return r}function ta(t,e){if(!(e[x]&256)){let n=e[De];n.destroyNode&&na(t,e,n,3,null,null),Tb(e)}}function nc(t,e){if(!(e[x]&256)){e[x]&=-129,e[x]|=256,e[Hn]&&Nh(e[Hn]),kb(t,e),Nb(t,e),e[O].type===1&&e[De].destroy();let n=e[Yi];if(n!==null&&Jt(e[Me])){n!==e[Me]&&ng(n,e);let r=e[At];r!==null&&r.detachView(t)}bb(e)}}function Nb(t,e){let n=t.cleanup,r=e[Fi];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[Fi]=null);let i=e[cn];if(i!==null){e[cn]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function kb(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Wn)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],l=o[s+1];It(4,a,l);try{l.call(a)}finally{It(5,a,l)}}else{It(4,i,o);try{o.call(i)}finally{It(5,i,o)}}}}}function rg(t,e,n){return Ob(t,e.parent,n)}function Ob(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Zt];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===_t.None||o===_t.Emulated)return null}return ft(r,n)}}function Rs(t,e,n,r,i){t.insertBefore(e,n,r,i)}function ig(t,e,n){t.appendChild(e,n)}function wp(t,e,n,r,i){r!==null?Rs(t,e,n,r,i):ig(t,e,n)}function Rb(t,e,n,r){t.removeChild(e,n,r)}function xu(t,e){return t.parentNode(e)}function Pb(t,e){return t.nextSibling(e)}function og(t,e,n){return Lb(t,e,n)}function Fb(t,e,n){return t.type&40?ft(t,n):null}var Lb=Fb,bp;function Iu(t,e,n,r){let i=rg(t,r,e),o=e[De],s=r.parent||e[Xe],a=og(s,r,e);if(i!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)wp(o,i,n[l],a,!1);else wp(o,i,n,a,!1);bp!==void 0&&bp(o,r,e,n,i)}function Es(t,e){if(e!==null){let n=e.type;if(n&3)return ft(e,t);if(n&4)return xc(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Es(t,r);{let i=t[e.index];return Jt(i)?xc(-1,i):kt(i)}}else{if(n&32)return Su(e,t)()||kt(t[e.index]);{let r=sg(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ji(t[ut]);return Es(i,r)}else return Es(t,e.next)}}}return null}function sg(t,e){if(e!==null){let r=t[ut][Xe],i=e.projection;return r.projection[i]}return null}function xc(t,e){let n=Ne+t+1;if(n<e.length){let r=e[n],i=r[O].firstChild;if(i!==null)return Es(r,i)}return e[Un]}function Vb(t,e,n){let r=xu(t,e);r&&Rb(t,r,e,n)}function Tu(t,e,n,r,i,o,s){for(;n!=null;){let a=r[n.index],l=n.type;if(s&&e===0&&(a&&qn(kt(a),r),n.flags|=2),(n.flags&32)!==32)if(l&8)Tu(t,e,n.child,r,i,o,!1),Pr(e,t,i,a,o);else if(l&32){let c=Su(n,r),u;for(;u=c();)Pr(e,t,i,u,o);Pr(e,t,i,a,o)}else l&16?ag(t,e,r,n,i,o):Pr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function na(t,e,n,r,i,o){Tu(n,r,t.firstChild,e,i,o,!1)}function jb(t,e,n){let r=e[De],i=rg(t,n,e),o=n.parent||e[Xe],s=og(o,n,e);ag(r,0,e,n,i,s)}function ag(t,e,n,r,i,o){let s=n[ut],l=s[Xe].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];Pr(e,t,i,u,o)}else{let c=l,u=s[Me];Qm(r)&&(c.flags|=128),Tu(t,e,c,u,i,o,!0)}}function Bb(t,e,n,r,i){let o=n[Un],s=kt(n);o!==s&&Pr(e,t,r,o,i);for(let a=Ne;a<n.length;a++){let l=n[a];na(l[O],l,t,e,r,o)}}function $b(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Kt.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Kt.Important),t.setStyle(n,r,i,o))}}function Hb(t,e,n){t.setAttribute(e,"style",n)}function lg(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function cg(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&mc(t,e,r),i!==null&&lg(t,e,i),o!==null&&Hb(t,e,o)}var gs;function Ub(){if(gs===void 0&&(gs=null,Vn.trustedTypes))try{gs=Vn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return gs}function Ep(t){return Ub()?.createScriptURL(t)||t}var Ps=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${$p})`}};function Qi(t){return t instanceof Ps?t.changingThisBreaksApplicationSecurity:t}function Au(t,e){let n=zb(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${$p})`)}return n===e}function zb(t){return t instanceof Ps&&t.getTypeName()||null}var Wb=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function ug(t){return t=String(t),t.match(Wb)?t:"unsafe:"+t}var ra=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(ra||{});function Gb(t){let e=fg();return e?e.sanitize(ra.URL,t)||"":Au(t,"URL")?Qi(t):ug(Gs(t))}function qb(t){let e=fg();if(e)return Ep(e.sanitize(ra.RESOURCE_URL,t)||"");if(Au(t,"ResourceURL"))return Ep(Qi(t));throw new M(904,!1)}function Yb(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?qb:Gb}function dg(t,e,n){return Yb(e,n)(t)}function fg(){let t=W();return t&&t[Yt].sanitizer}var Ic=class{};var Kb="h",Zb="b";var Jb=()=>null;function _u(t,e,n=!1){return Jb(t,e,n)}var Tc=class{},Fs=class{};function Qb(t){let e=Error(`No component factory found for ${Ge(t)}.`);return e[Xb]=t,e}var Xb="ngComponent";var Ac=class{resolveComponentFactory(e){throw Qb(e)}},ia=(()=>{let e=class e{};e.NULL=new Ac;let t=e;return t})();function eE(){return Yr(qe(),W())}function Yr(t,e){return new me(ft(t,e))}var me=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=eE;let t=e;return t})();function tE(t){return t instanceof me?t.nativeElement:t}var Hi=class{},Et=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>nE();let t=e;return t})();function nE(){let t=W(),e=qe(),n=mn(e.index,t);return(jn(n)?n:t)[De]}var rE=(()=>{let e=class e{};e.\u0275prov=S({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),rc={};function Ls(t,e,n,r,i=!1){for(;n!==null;){let o=e[n.index];o!==null&&r.push(kt(o)),Jt(o)&&iE(o,r);let s=n.type;if(s&8)Ls(t,e,n.child,r);else if(s&32){let a=Su(n,e),l;for(;l=a();)r.push(l)}else if(s&16){let a=sg(e,n);if(Array.isArray(a))r.push(...a);else{let l=ji(e[ut]);Ls(l[O],l,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function iE(t,e){for(let n=Ne;n<t.length;n++){let r=t[n],i=r[O].firstChild;i!==null&&Ls(r[O],r,i,e)}t[Un]!==t[Zt]&&e.push(t[Un])}var hg=[];function oE(t){return t[Hn]??sE(t)}function sE(t){let e=hg.pop()??Object.create(lE);return e.lView=t,e}function aE(t){t.lView[Hn]!==t&&(t.lView=null,hg.push(t))}var lE=F(g({},Th),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Vi(t.lView)},consumerOnSignalRead(){this.lView[Hn]=this}});function pg(t){return gg(t[Li])}function mg(t){return gg(t[bt])}function gg(t){for(;t!==null&&!Jt(t);)t=t[bt];return t}var cE="ngOriginalError";function ic(t){return t[cE]}var Ot=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&ic(e);for(;n&&ic(n);)n=ic(n);return n||null}},yg=new N("",{providedIn:"root",factory:()=>D(Ot).handleError.bind(void 0)});var vg=!1,uE=new N("",{providedIn:"root",factory:()=>vg});var Kr={};function Se(t=1){Dg(Ue(),W(),Zn()+t,!1)}function Dg(t,e,n,r){if(!r)if((e[x]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Ds(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Cs(e,o,0,n)}zn(n)}function I(t,e=L.Default){let n=W();if(n===null)return V(t,e);let r=qe();return jm(r,n,$e(t),e)}function Cg(t,e,n,r,i,o){let s=Be(null);try{let a=null;i&Ee.SignalBased&&(a=e[r][Ih]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Ee.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):um(e,a,r,o)}finally{Be(s)}}function dE(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)zn(~i);else{let o=i,s=n[++r],a=n[++r];Nw(s,o);let l=e[o];a(2,l)}}}finally{zn(-1)}}function oa(t,e,n,r,i,o,s,a,l,c,u){let d=e.blueprint.slice();return d[Zt]=i,d[x]=r|4|128|8|64,(c!==null||t&&t[x]&2048)&&(d[x]|=2048),gm(d),d[Me]=d[qr]=t,d[He]=n,d[Yt]=s||t&&t[Yt],d[De]=a||t&&t[De],d[$r]=l||t&&t[$r]||null,d[Xe]=o,d[Zs]=Cb(),d[Br]=u,d[am]=c,d[ut]=e.type==2?t[ut]:d,d}function Xi(t,e,n,r,i){let o=t.data[e];if(o===null)o=fE(t,e,n,r,i),_w()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=Iw();o.injectorIndex=s===null?-1:s.injectorIndex}return Ki(o,!0),o}function fE(t,e,n,r,i){let o=wm(),s=bm(),a=s?o:o&&o.parent,l=t.data[e]=vE(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=l),o!==null&&(s?o.child==null&&l.parent!==null&&(o.child=l):o.next===null&&(o.next=l,l.prev=o)),l}function wg(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function bg(t,e,n,r,i){let o=Zn(),s=r&2;try{zn(-1),s&&e.length>Nt&&Dg(t,e,Nt,!1),It(s?2:0,i),n(r,i)}finally{zn(o),It(s?3:1,i)}}function Eg(t,e,n){if(cm(e)){let r=Be(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{Be(r)}}}function Mg(t,e,n){Dm()&&(SE(t,e,n,ft(n,e)),(n.flags&64)===64&&Ag(t,e,n))}function Sg(t,e,n=ft){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function xg(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Nu(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Nu(t,e,n,r,i,o,s,a,l,c,u){let d=Nt+r,f=d+i,h=hE(d,f),p=typeof c=="function"?c():c;return h[O]={type:t,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1,ssrId:u}}function hE(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Kr);return n}function pE(t,e,n,r){let o=r.get(uE,vg)||n===_t.ShadowDom,s=t.selectRootElement(e,o);return mE(s),s}function mE(t){gE(t)}var gE=()=>null;function yE(t,e,n,r){let i=kg(e);i.push(n),t.firstCreatePass&&Og(t).push(r,i.length-1)}function vE(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Cm()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Mp(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,l=Ee.None;Array.isArray(s)?(a=s[0],l=s[1]):a=s;let c=o;if(i!==null){if(!i.hasOwnProperty(o))continue;c=i[o]}t===0?Sp(r,n,c,a,l):Sp(r,n,c,a)}return r}function Sp(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function DE(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],l=null,c=null;for(let u=r;u<i;u++){let d=o[u],f=n?n.get(d):null,h=f?f.inputs:null,p=f?f.outputs:null;l=Mp(0,d.inputs,u,l,h),c=Mp(1,d.outputs,u,c,p);let m=l!==null&&s!==null&&!Xp(e)?FE(l,u,s):null;a.push(m)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}function CE(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function wE(t,e,n,r,i,o,s,a){let l=ft(e,n),c=e.inputs,u;!a&&c!=null&&(u=c[r])?(ku(t,n,u,r,i),Js(e)&&bE(n,e.index)):e.type&3?(r=CE(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(l,r,i)):e.type&12}function bE(t,e){let n=mn(e,t);n[x]&16||(n[x]|=64)}function Ig(t,e,n,r){if(Dm()){let i=r===null?null:{"":-1},o=IE(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&Tg(t,e,n,s,i,a),i&&TE(n,r,i)}n.mergedAttrs=Pi(n.mergedAttrs,n.attrs)}function Tg(t,e,n,r,i,o){for(let c=0;c<r.length;c++)Cc(Ns(n,e),t,r[c].type);_E(n,t.data.length,r.length);for(let c=0;c<r.length;c++){let u=r[c];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,l=wg(t,e,r.length,null);for(let c=0;c<r.length;c++){let u=r[c];n.mergedAttrs=Pi(n.mergedAttrs,u.hostAttrs),NE(t,n,e,l,u),AE(l,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),l++}DE(t,n,o)}function EE(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;ME(s)!=a&&s.push(a),s.push(n,r,o)}}function ME(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function SE(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;Js(n)&&kE(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Ns(n,e),qn(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let l=t.data[a],c=Gn(e,t,a,n);if(qn(c,e),s!==null&&PE(e,a-i,c,l,n,s),un(l)){let u=mn(n.index,e);u[He]=Gn(e,t,a,n)}}}function Ag(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=kw();try{zn(o);for(let a=r;a<i;a++){let l=t.data[a],c=e[a];vc(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&xE(l,c)}}finally{zn(-1),vc(s)}}function xE(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function IE(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(em(e,s.selectors,!1))if(r||(r=[]),un(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let l=a.length;_c(t,e,l)}else r.unshift(s),_c(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function _c(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function TE(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new M(-301,!1);r.push(e[i],o)}}}function AE(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;un(e)&&(n[""]=t)}}function _E(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function NE(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Ur(i.type,!0)),s=new Wn(o,un(i),I);t.blueprint[r]=s,n[r]=s,EE(t,e,r,wg(t,n,i.hostVars,Kr),i)}function kE(t,e,n){let r=ft(e,t),i=xg(n),o=t[Yt].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=sa(t,oa(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function OE(t,e,n,r,i,o){let s=ft(t,e);RE(e[De],s,o,t.value,n,r,i)}function RE(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?Gs(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function PE(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let l=s[a++],c=s[a++],u=s[a++],d=s[a++];Cg(r,n,l,c,u,d)}}function FE(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function _g(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Ng(t,e){let n=t.contentQueries;if(n!==null){let r=Be(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];du(o),a.contentQueries(2,e[s],s)}}}finally{Be(r)}}}function sa(t,e){return t[Li]?t[hp][bt]=e:t[Li]=e,t[hp]=e,e}function Nc(t,e,n){du(0);let r=Be(null);try{e(t,n)}finally{Be(r)}}function kg(t){return t[Fi]||(t[Fi]=[])}function Og(t){return t.cleanup||(t.cleanup=[])}function Rg(t,e){let n=t[$r],r=n?n.get(Ot,null):null;r&&r.handleError(e)}function ku(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],l=n[o++],c=e[s],u=t.data[s];Cg(u,c,r,a,l,i)}}function LE(t,e,n){let r=mm(e,t);Sb(t[De],r,n)}var VE=100;function jE(t,e=!0){let n=t[Yt],r=n.rendererFactory,i=!1;i||r.begin?.();try{BE(t)}catch(o){throw e&&Rg(t,o),o}finally{i||(r.end?.(),n.inlineEffectRunner?.flush())}}function BE(t){kc(t,0);let e=0;for(;ym(t);){if(e===VE)throw new M(103,!1);e++,kc(t,1)}}function $E(t,e,n,r){let i=e[x];if((i&256)===256)return;let o=!1;!o&&e[Yt].inlineEffectRunner?.flush(),fu(e);let s=null,a=null;!o&&HE(t)&&(a=oE(e),s=Ah(a));try{gm(e),Tw(t.bindingStartIndex),n!==null&&bg(t,e,n,2,r);let l=(i&3)===3;if(!o)if(l){let d=t.preOrderCheckHooks;d!==null&&Ds(e,d,null)}else{let d=t.preOrderHooks;d!==null&&Cs(e,d,0,null),Ql(e,0)}if(UE(e),Pg(e,0),t.contentQueries!==null&&Ng(t,e),!o)if(l){let d=t.contentCheckHooks;d!==null&&Ds(e,d)}else{let d=t.contentHooks;d!==null&&Cs(e,d,1),Ql(e,1)}dE(t,e);let c=t.components;c!==null&&Lg(e,c,0);let u=t.viewQuery;if(u!==null&&Nc(2,u,r),!o)if(l){let d=t.viewCheckHooks;d!==null&&Ds(e,d)}else{let d=t.viewHooks;d!==null&&Cs(e,d,2),Ql(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Jl]){for(let d of e[Jl])d();e[Jl]=null}o||(e[x]&=-73)}catch(l){throw Vi(e),l}finally{a!==null&&(_h(a,s),aE(a)),hu()}}function HE(t){return t.type!==2}function Pg(t,e){for(let n=pg(t);n!==null;n=mg(n))for(let r=Ne;r<n.length;r++){let i=n[r];Fg(i,e)}}function UE(t){for(let e=pg(t);e!==null;e=mg(e)){if(!(e[x]&au.HasTransplantedViews))continue;let n=e[Hr];for(let r=0;r<n.length;r++){let i=n[r],o=i[Me];Dw(i)}}}function zE(t,e,n){let r=mn(e,t);Fg(r,n)}function Fg(t,e){uu(t)&&kc(t,e)}function kc(t,e){let r=t[O],i=t[x],o=t[Hn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Ol(o)),o&&(o.dirty=!1),t[x]&=-9217,s)$E(r,t,r.template,t[He]);else if(i&8192){Pg(t,1);let a=r.components;a!==null&&Lg(t,a,1)}}function Lg(t,e,n){for(let r=0;r<e.length;r++)zE(t,e[r],n)}function Ou(t){for(t[Yt].changeDetectionScheduler?.notify();t;){t[x]|=64;let e=ji(t);if(uw(t)&&!e)return t;t=e}return null}var Yn=class{get rootNodes(){let e=this._lView,n=e[O];return Ls(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[He]}set context(e){this._lView[He]=e}get destroyed(){return(this._lView[x]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Me];if(Jt(e)){let n=e[Is],r=n?n.indexOf(this):-1;r>-1&&($i(e,r),ks(n,r))}this._attachedToViewContainer=!1}ta(this._lView[O],this._lView)}onDestroy(e){vm(this._lView,e)}markForCheck(){Ou(this._cdRefInjectingView||this._lView)}detach(){this._lView[x]&=-129}reattach(){yc(this._lView),this._lView[x]|=128}detectChanges(){this._lView[x]|=1024,jE(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new M(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,tg(this._lView[O],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new M(902,!1);this._appRef=e,yc(this._lView)}},Zr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=WE;let t=e;return t})();function WE(t){return GE(qe(),W(),(t&16)===16)}function GE(t,e,n){if(Js(t)&&!n){let r=mn(t.index,e);return new Yn(r,r)}else if(t.type&47){let r=e[ut];return new Yn(r,e)}return null}var Vg=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=qE,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Oc=class extends Vg{constructor(e){super(),this._lView=e}onDestroy(e){return vm(this._lView,e),()=>ww(this._lView,e)}};function qE(){return new Oc(W())}var xp=new Set;function aa(t){xp.has(t)||(xp.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Rc=class extends le{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=oc(o),i&&(i=oc(i)),s&&(s=oc(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof he&&e.add(a),a}};function oc(t){return e=>{setTimeout(t,void 0,e)}}var be=Rc;function Ip(...t){}function YE(){let t=typeof Vn.requestAnimationFrame=="function",e=Vn[t?"requestAnimationFrame":"setTimeout"],n=Vn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var Q=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new be(!1),this.onMicrotaskEmpty=new be(!1),this.onStable=new be(!1),this.onError=new be(!1),typeof Zone>"u")throw new M(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=YE().nativeRequestAnimationFrame,JE(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new M(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new M(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,KE,Ip,Ip);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},KE={};function Ru(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function ZE(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Vn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Pc(t),t.isCheckStableRunning=!0,Ru(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Pc(t))}function JE(t){let e=()=>{ZE(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(QE(a))return n.invokeTask(i,o,s,a);try{return Tp(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Ap(t)}},onInvoke:(n,r,i,o,s,a,l)=>{try{return Tp(t),n.invoke(i,o,s,a,l)}finally{t.shouldCoalesceRunChangeDetection&&e(),Ap(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,Pc(t),Ru(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function Pc(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Tp(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Ap(t){t._nesting--,Ru(t)}function QE(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var Fr=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Fr||{}),XE={destroy(){}};function Pu(t,e){!e&&mb(Pu);let n=e?.injector??D(Pt);if(!vb(n))return XE;aa("NgAfterNextRender");let r=n.get(Fu),i=r.handler??=new Lc,o=e?.phase??Fr.MixedReadWrite,s=()=>{i.unregister(l),a()},a=n.get(Vg).onDestroy(s),l=new Fc(n,o,()=>{s(),t()});return i.register(l),{destroy:s}}var Fc=class{constructor(e,n,r){this.phase=n,this.callbackFn=r,this.zone=e.get(Q),this.errorHandler=e.get(Ot,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},Lc=class{constructor(){this.executingCallbacks=!1,this.buckets={[Fr.EarlyRead]:new Set,[Fr.Write]:new Set,[Fr.MixedReadWrite]:new Set,[Fr.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){let e=!1;this.executingCallbacks=!0;for(let n of Object.values(this.buckets))for(let r of n)e=!0,r.invoke();this.executingCallbacks=!1;for(let n of this.deferredCallbacks)this.buckets[n.phase].add(n);return this.deferredCallbacks.clear(),e}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Fu=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let o of r)o();return!!this.handler?.execute()||r.length>0}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=S({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function eM(t,e){let n=mn(e,t),r=n[O];tM(r,n);let i=n[Zt];i!==null&&n[Br]===null&&(n[Br]=_u(i,n[$r])),Lu(r,n,n[He])}function tM(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Lu(t,e,n){fu(e);try{let r=t.viewQuery;r!==null&&Nc(1,r,n);let i=t.template;i!==null&&bg(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Ng(t,e),t.staticViewQueries&&Nc(2,t.viewQuery,n);let o=t.components;o!==null&&nM(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[x]&=-5,hu()}}function nM(t,e){for(let n=0;n<e.length;n++)eM(t,e[n])}function Vc(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=rp(i,a);else if(o==2){let l=a,c=e[++s];r=rp(r,l+": "+c+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Vs=class extends ia{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=$n(e);return new Ui(n,this.ngModule)}};function _p(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function rM(t){let e=t.toLowerCase();return e==="svg"?pm:e==="math"?pw:null}var jc=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Ys(r);let i=this.injector.get(e,rc,r);return i!==rc||n===rc?i:this.parentInjector.get(e,n,r)}},Ui=class extends Fs{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=_p(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return _p(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=ow(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){i=i||this.ngModule;let o=i instanceof dt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let s=o?new jc(e,o):e,a=s.get(Hi,null);if(a===null)throw new M(407,!1);let l=s.get(rE,null),c=s.get(Fu,null),u=s.get(Ic,null),d={rendererFactory:a,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:c,changeDetectionScheduler:u},f=a.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",p=r?pE(f,r,this.componentDef.encapsulation,s):eg(f,h,rM(h)),m=512;this.componentDef.signals?m|=4096:this.componentDef.onPush||(m|=16);let v=null;p!==null&&(v=_u(p,s,!0));let y=Nu(0,null,null,1,0,null,null,null,null,null,null),b=oa(null,y,null,m,null,null,d,f,s,null,v);fu(b);let J,ne;try{let ee=this.componentDef,ae,Je=null;ee.findHostDirectiveDefs?(ae=[],Je=new Map,ee.findHostDirectiveDefs(ee,ae,Je),ae.push(ee)):ae=[ee];let yt=iM(b,p),Rn=oM(yt,p,ee,ae,b,d,f);ne=cu(y,Nt),p&&lM(f,ee,p,r),n!==void 0&&cM(ne,this.ngContentSelectors,n),J=aM(Rn,ee,ae,Je,b,[uM]),Lu(y,b,null)}finally{hu()}return new Bc(this.componentType,J,Yr(ne,b),b,ne)}},Bc=class extends Tc{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Yn(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;ku(o[O],o,i,e,n),this.previousInputValues.set(e,n);let s=mn(this._tNode.index,o);Ou(s)}}get injector(){return new Bn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function iM(t,e){let n=t[O],r=Nt;return t[r]=e,Xi(n,r,2,"#host",null)}function oM(t,e,n,r,i,o,s){let a=i[O];sM(r,t,e,s);let l=null;e!==null&&(l=_u(e,i[$r]));let c=o.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=oa(i,xg(n),null,u,i[t.index],t,o,c,null,null,l);return a.firstCreatePass&&_c(a,t,r.length-1),sa(i,d),i[t.index]=d}function sM(t,e,n,r){for(let i of t)e.mergedAttrs=Pi(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Vc(e,e.mergedAttrs,!0),n!==null&&cg(r,n,e))}function aM(t,e,n,r,i,o){let s=qe(),a=i[O],l=ft(s,i);Tg(a,i,s,n,null,r);for(let u=0;u<n.length;u++){let d=s.directiveStart+u,f=Gn(i,a,d,s);qn(f,i)}Ag(a,i,s),l&&qn(l,i);let c=Gn(i,a,s.directiveStart+s.componentOffset,s);if(t[He]=i[He]=c,o!==null)for(let u of o)u(c,e);return Eg(a,s,t),c}function lM(t,e,n,r){if(r)mc(t,n,["ng-version","17.1.1"]);else{let{attrs:i,classes:o}=sw(e.selectors[0]);i&&mc(t,n,i),o&&o.length>0&&lg(t,n,o.join(" "))}}function cM(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function uM(){let t=qe();gu(W()[O],t)}function dM(t){return Object.getPrototypeOf(t.prototype).constructor}function Qt(t){let e=dM(t.type),n=!0,r=[t];for(;e;){let i;if(un(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new M(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=ys(t.inputs),s.inputTransforms=ys(t.inputTransforms),s.declaredInputs=ys(t.declaredInputs),s.outputs=ys(t.outputs);let a=i.hostBindings;a&&gM(t,a);let l=i.viewQuery,c=i.contentQueries;if(l&&pM(t,l),c&&mM(t,c),fM(t,i),IC(t.outputs,i.outputs),un(i)&&i.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===Qt&&(n=!1)}}e=Object.getPrototypeOf(e)}hM(r)}function fM(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function hM(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Pi(i.hostAttrs,n=Pi(n,i.hostAttrs))}}function ys(t){return t===jr?{}:t===ct?[]:t}function pM(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function mM(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function gM(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function Vu(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var mL=new RegExp(`^(\\d+)*(${Zb}|${Kb})*(.*)`);var yM=()=>null;function js(t,e){return yM(t,e)}function ju(t,e,n,r){let i=e.tView,s=t[x]&4096?4096:16,a=oa(t,i,n,s,null,e,null,null,null,r?.injector??null,r?.dehydratedView??null),l=t[e.index];a[Yi]=l;let c=t[At];return c!==null&&(a[At]=c.createEmbeddedView(i)),Lu(i,a,n),a}function vM(t,e){let n=Ne+e;if(n<t.length)return t[n]}function Bs(t,e){return!e||e.firstChild===null||Qm(t)}function Bu(t,e,n,r=!0){let i=e[O];if(Ab(i,e,t,n),r){let s=xc(n,t),a=e[De],l=xu(a,t[Un]);l!==null&&Ib(i,t[Xe],a,e,l,s)}let o=e[Br];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function DM(t,e){let n=$i(t,e);return n!==void 0&&ta(n[O],n),n}var Jr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=CM;let t=e;return t})();function CM(){let t=qe();return Bg(t,W())}var wM=Jr,jg=class extends wM{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Yr(this._hostTNode,this._hostLView)}get injector(){return new Bn(this._hostTNode,this._hostLView)}get parentInjector(){let e=yu(this._hostTNode,this._hostLView);if(Om(e)){let n=_s(e,this._hostLView),r=As(e),i=n[O].data[r+8];return new Bn(i,n)}else return new Bn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=Np(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Ne}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=js(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,Bs(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!Jw(e),a;if(s)a=n;else{let p=n||{};a=p.index,r=p.injector,i=p.projectableNodes,o=p.environmentInjector||p.ngModuleRef}let l=s?e:new Ui($n(e)),c=r||this.parentInjector;if(!o&&l.ngModule==null){let m=(s?c:this.parentInjector).get(dt,null);m&&(o=m)}let u=$n(l.componentType??{}),d=js(this._lContainer,u?.id??null),f=d?.firstChild??null,h=l.create(c,i,f,o);return this.insertImpl(h.hostView,a,Bs(this._hostTNode,d)),h}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(vw(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[Me],c=new jg(l,l[Xe],l[Me]);c.detach(c.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Bu(s,i,o,r),e.attachToViewContainerRef(),Hm(sc(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=Np(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=$i(this._lContainer,n);r&&(ks(sc(this._lContainer),n),ta(r[O],r))}detach(e){let n=this._adjustIndex(e,-1),r=$i(this._lContainer,n);return r&&ks(sc(this._lContainer),n)!=null?new Yn(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function Np(t){return t[Is]}function sc(t){return t[Is]||(t[Is]=[])}function Bg(t,e){let n,r=e[t.index];return Jt(r)?n=r:(n=_g(r,e,null,t),e[t.index]=n,sa(e,n)),EM(n,e,t,r),new jg(n,t,e)}function bM(t,e){let n=t[De],r=n.createComment(""),i=ft(e,t),o=xu(n,i);return Rs(n,o,r,Pb(n,i),!1),r}var EM=xM,MM=()=>!1;function SM(t,e,n){return MM(t,e,n)}function xM(t,e,n,r){if(t[Un])return;let i;n.type&8?i=kt(r):i=bM(e,n),t[Un]=i}function eo(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function IM(t,e,n,r,i,o,s,a,l){let c=e.consts,u=Xi(e,t,4,s||null,Ts(c,a));Ig(e,n,u,Ts(c,l)),gu(e,u);let d=u.tView=Nu(2,u,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function $c(t,e,n,r,i,o,s,a){let l=W(),c=Ue(),u=t+Nt,d=c.firstCreatePass?IM(u,c,l,e,n,r,i,o,s):c.data[u];Ki(d,!1);let f=TM(c,l,d,t);pu()&&Iu(c,l,f,d),qn(f,l);let h=_g(f,l,f,d);return l[u]=h,sa(l,h),SM(h,d,l),lu(d)&&Mg(c,l,d),s!=null&&Sg(l,d,a),$c}var TM=AM;function AM(t,e,n,r){return mu(!0),e[De].createComment("")}function Qr(t,e,n,r){let i=W(),o=Qs();if(eo(i,o,e)){let s=Ue(),a=_m();OE(a,i,t,e,n,r)}return Qr}function _M(t,e,n,r){return eo(t,Qs(),n)?e+Gs(n)+r:Kr}function vs(t,e){return t<<17|e<<2}function Kn(t){return t>>17&32767}function NM(t){return(t&2)==2}function kM(t,e){return t&131071|e<<17}function Hc(t){return t|2}function Gr(t){return(t&131068)>>2}function ac(t,e){return t&-131069|e<<2}function OM(t){return(t&1)===1}function Uc(t){return t|1}function RM(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Kn(s),l=Gr(s);t[r]=n;let c=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||Ji(d,u)>0)&&(c=!0)}else u=n;if(i)if(l!==0){let f=Kn(t[a+1]);t[r+1]=vs(f,a),f!==0&&(t[f+1]=ac(t[f+1],r)),t[a+1]=kM(t[a+1],r)}else t[r+1]=vs(a,0),a!==0&&(t[a+1]=ac(t[a+1],r)),a=r;else t[r+1]=vs(l,0),a===0?a=r:t[l+1]=ac(t[l+1],r),l=r;c&&(t[r+1]=Hc(t[r+1])),kp(t,u,r,!0),kp(t,u,r,!1),PM(e,u,t,r,o),s=vs(a,l),o?e.classBindings=s:e.styleBindings=s}function PM(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Ji(o,e)>=0&&(n[r+1]=Uc(n[r+1]))}function kp(t,e,n,r){let i=t[n+1],o=e===null,s=r?Kn(i):Gr(i),a=!1;for(;s!==0&&(a===!1||o);){let l=t[s],c=t[s+1];FM(l,e)&&(a=!0,t[s+1]=r?Uc(c):Hc(c)),s=r?Kn(c):Gr(c)}a&&(t[n+1]=r?Hc(i):Uc(i))}function FM(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Ji(t,e)>=0:!1}function et(t,e,n){let r=W(),i=Qs();if(eo(r,i,e)){let o=Ue(),s=_m();wE(o,s,r,t,e,r[De],n,!1)}return et}function Op(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";ku(t,n,o[s],s,r)}function $u(t,e){return LM(t,e,null,!0),$u}function LM(t,e,n,r){let i=W(),o=Ue(),s=Aw(2);if(o.firstUpdatePass&&jM(o,t,s,r),e!==Kr&&eo(i,s,e)){let a=o.data[Zn()];zM(o,a,i,i[De],t,i[s+1]=WM(e,n),r,s)}}function VM(t,e){return e>=t.expandoStartIndex}function jM(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Zn()],s=VM(t,n);GM(o,r)&&e===null&&!s&&(e=!1),e=BM(i,o,e,r),RM(i,o,e,n,s,r)}}function BM(t,e,n,r){let i=Ow(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=lc(null,t,e,n,r),n=zi(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=lc(i,t,e,n,r),o===null){let l=$M(t,e,r);l!==void 0&&Array.isArray(l)&&(l=lc(null,t,e,l[1],r),l=zi(l,e.attrs,r),HM(t,e,r,l))}else o=UM(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function $M(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Gr(r)!==0)return t[Kn(r)]}function HM(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Kn(i)]=r}function UM(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=zi(r,s,n)}return zi(r,e.attrs,n)}function lc(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=zi(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function zi(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),nb(t,s,n?!0:e[++o]))}return t===void 0?null:t}function zM(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let l=t.data,c=l[a+1],u=OM(c)?Rp(l,e,n,i,Gr(c),s):void 0;if(!$s(u)){$s(o)||NM(c)&&(o=Rp(l,null,n,i,a,s));let d=mm(Zn(),n);$b(r,s,d,i,o)}}function Rp(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let l=t[i],c=Array.isArray(l),u=c?l[1]:l,d=u===null,f=n[i+1];f===Kr&&(f=d?ct:void 0);let h=d?ec(f,r):u===r?f:void 0;if(c&&!$s(h)&&(h=ec(l,r)),$s(h)&&(a=h,s))return a;let p=t[i+1];i=s?Kn(p):Gr(p)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=ec(l,r))}return a}function $s(t){return t!==void 0}function WM(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Ge(Qi(t)))),t}function GM(t,e){return(t.flags&(e?8:16))!==0}var zc=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function cc(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function qM(t,e,n){let r,i,o=0,s=t.length-1;if(Array.isArray(e)){let a=e.length-1;for(;o<=s&&o<=a;){let l=t.at(o),c=e[o],u=cc(o,l,o,c,n);if(u!==0){u<0&&t.updateValue(o,c),o++;continue}let d=t.at(s),f=e[a],h=cc(s,d,a,f,n);if(h!==0){h<0&&t.updateValue(s,f),s--,a--;continue}let p=n(o,l),m=n(s,d),v=n(o,c);if(Object.is(v,m)){let y=n(a,f);Object.is(y,p)?(t.swap(o,s),t.updateValue(s,f),a--,s--):t.move(s,o),t.updateValue(o,c),o++;continue}if(r??=new Hs,i??=Fp(t,o,s,n),Wc(t,r,o,v))t.updateValue(o,c),o++,s++;else if(i.has(v))r.set(p,t.detach(o)),s--;else{let y=t.create(o,e[o]);t.attach(o,y),o++,s++}}for(;o<=a;)Pp(t,r,n,o,e[o]),o++}else if(e!=null){let a=e[Symbol.iterator](),l=a.next();for(;!l.done&&o<=s;){let c=t.at(o),u=l.value,d=cc(o,c,o,u,n);if(d!==0)d<0&&t.updateValue(o,u),o++,l=a.next();else{r??=new Hs,i??=Fp(t,o,s,n);let f=n(o,u);if(Wc(t,r,o,f))t.updateValue(o,u),o++,s++,l=a.next();else if(!i.has(f))t.attach(o,t.create(o,u)),o++,s++,l=a.next();else{let h=n(o,c);r.set(h,t.detach(o)),s--}}}for(;!l.done;)Pp(t,r,n,t.length,l.value),l=a.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(a=>{t.destroy(a)})}function Wc(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function Pp(t,e,n,r,i){if(Wc(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function Fp(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var Hs=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};var Gc=class{constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Ne}};function la(t,e){return e}var qc=class{constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function Dn(t,e,n,r,i,o,s,a,l,c,u,d,f){aa("NgControlFlow");let h=l!==void 0,p=W(),m=a?s.bind(p[ut][He]):s,v=new qc(h,m);p[Nt+t]=v,$c(t+1,e,n,r,i,o),h&&$c(t+2,l,c,u,d,f)}var Yc=class extends zc{constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Ne}at(e){return this.getLView(e)[He].$implicit}attach(e,n){let r=n[Br];this.needsIndexUpdate||=e!==this.length,Bu(this.lContainer,n,e,Bs(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,YM(this.lContainer,e)}create(e,n){let r=js(this.lContainer,this.templateTNode.tView.ssrId);return ju(this.hostLView,this.templateTNode,new Gc(this.lContainer,n,e),{dehydratedView:r})}destroy(e){ta(e[O],e)}updateValue(e,n){this.getLView(e)[He].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[He].$index=e}getLView(e){return KM(this.lContainer,e)}};function Cn(t){let e=Be(null),n=Zn();try{let r=W(),i=r[O],o=r[n];if(o.liveCollection===void 0){let a=n+1,l=Lp(r,a),c=Vp(i,a);o.liveCollection=new Yc(l,r,c)}else o.liveCollection.reset();let s=o.liveCollection;if(qM(s,t,o.trackByFn),s.updateIndexes(),o.hasEmptyBlock){let a=Qs(),l=s.length===0;if(eo(r,a,l)){let c=n+2,u=Lp(r,c);if(l){let d=Vp(i,c),f=js(u,d.tView.ssrId),h=ju(r,d,void 0,{dehydratedView:f});Bu(u,h,0,Bs(d,f))}else DM(u,0)}}}finally{Be(e)}}function Lp(t,e){return t[e]}function YM(t,e){return $i(t,e)}function KM(t,e){return vM(t,e)}function Vp(t,e){return cu(t,e)}function ZM(t,e,n,r,i,o){let s=e.consts,a=Ts(s,i),l=Xi(e,t,2,r,a);return Ig(e,n,l,Ts(s,o)),l.attrs!==null&&Vc(l,l.attrs,!1),l.mergedAttrs!==null&&Vc(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function z(t,e,n,r){let i=W(),o=Ue(),s=Nt+t,a=i[De],l=o.firstCreatePass?ZM(s,o,i,e,n,r):o.data[s],c=JM(o,i,l,a,e,t);i[s]=c;let u=lu(l);return Ki(l,!0),cg(a,c,l),(l.flags&32)!==32&&pu()&&Iu(o,i,c,l),bw()===0&&qn(c,i),Ew(),u&&(Mg(o,i,l),Eg(o,l,i)),r!==null&&Sg(i,l),z}function H(){let t=qe();bm()?Em():(t=t.parent,Ki(t,!1));let e=t;Sw(e)&&xw(),Mw();let n=Ue();return n.firstCreatePass&&(gu(n,t),cm(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&Bw(e)&&Op(n,e,W(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&$w(e)&&Op(n,e,W(),e.stylesWithoutHost,!1),H}function ge(t,e,n,r){return z(t,e,n,r),H(),ge}var JM=(t,e,n,r,i,o)=>(mu(!0),eg(r,i,Fw()));function Xr(){return W()}var Us="en-US";var QM=Us;function XM(t){PC(t,"Expected localeId to be defined"),typeof t=="string"&&(QM=t.toLowerCase().replace(/_/g,"-"))}function Xn(t){return!!t&&typeof t.then=="function"}function $g(t){return!!t&&typeof t.subscribe=="function"}function oe(t,e,n,r){let i=W(),o=Ue(),s=qe();return tS(o,i,i[De],s,t,e,r),oe}function eS(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Fi],l=i[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function tS(t,e,n,r,i,o,s){let a=lu(r),c=t.firstCreatePass&&Og(t),u=e[He],d=kg(e),f=!0;if(r.type&3||s){let m=ft(r,e),v=s?s(m):m,y=d.length,b=s?ne=>s(kt(ne[r.index])):r.index,J=null;if(!s&&a&&(J=eS(t,e,i,r.index)),J!==null){let ne=J.__ngLastListenerFn__||J;ne.__ngNextListenerFn__=o,J.__ngLastListenerFn__=o,f=!1}else{o=Bp(r,e,u,o,!1);let ne=n.listen(v,i,o);d.push(o,ne),c&&c.push(i,b,y,y+1)}}else o=Bp(r,e,u,o,!1);let h=r.outputs,p;if(f&&h!==null&&(p=h[i])){let m=p.length;if(m)for(let v=0;v<m;v+=2){let y=p[v],b=p[v+1],ee=e[y][b].subscribe(o),ae=d.length;d.push(o,ee),c&&c.push(i,r.index,ae,-(ae+1))}}}function jp(t,e,n,r){try{return It(6,e,n),n(r)!==!1}catch(i){return Rg(t,i),!1}finally{It(7,e,n)}}function Bp(t,e,n,r,i){return function o(s){if(s===Function)return r;let a=t.componentOffset>-1?mn(t.index,e):e;Ou(a);let l=jp(e,n,r,s),c=o.__ngNextListenerFn__;for(;c;)l=jp(e,n,c,s)&&l,c=c.__ngNextListenerFn__;return i&&l===!1&&s.preventDefault(),l}}function wn(t=1){return Pw(t)}function nS(t,e){let n=null,r=ew(t);for(let i=0;i<e.length;i++){let o=e[i];if(o==="*"){n=i;continue}if(r===null?em(t,o,!0):rw(r,o))return i}return n}function ca(t){let e=W()[ut][Xe];if(!e.projection){let n=t?t.length:1,r=e.projection=eb(n,null),i=r.slice(),o=e.child;for(;o!==null;){let s=t?nS(o,t):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o),o=o.next}}}function ua(t,e=0,n){let r=W(),i=Ue(),o=Xi(i,Nt+t,16,null,n||null);o.projection===null&&(o.projection=e),Em(),(!r[Br]||Cm())&&(o.flags&32)!==32&&jb(i,r,o)}function rS(){return this._results[Symbol.iterator]()}var Wi=class t{get changes(){return this._changes??=new be}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=rS)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=Xw(e);(this._changesDetected=!Qw(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}},Gi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=sS;let t=e;return t})(),iS=Gi,oS=class extends iS{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=ju(this._declarationLView,this._declarationTContainer,e,{injector:n,dehydratedView:r});return new Yn(i)}};function sS(){return Hu(qe(),W())}function Hu(t,e){return t.type&4?new oS(e,t,Yr(t,e)):null}var Kc=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Zc=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Wg(e,n).matches!==null&&this.queries[n].setDirty()}},zs=class{constructor(e,n,r=null){this.predicate=e,this.flags=n,this.read=r}},Jc=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Qc=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,aS(n,o)),this.matchTNodeWithReadOption(e,n,ws(n,e,o,!1,!1))}else r===Gi?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,ws(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===me||i===Jr||i===Gi&&n.type&4)this.addMatch(n.index,-2);else{let o=ws(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function aS(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function lS(t,e){return t.type&11?Yr(t,e):t.type&4?Hu(t,e):null}function cS(t,e,n,r){return n===-1?lS(e,t):n===-2?uS(t,e,r):Gn(t,t[O],n,e)}function uS(t,e,n){if(n===me)return Yr(e,t);if(n===Gi)return Hu(e,t);if(n===Jr)return Bg(e,t)}function Hg(t,e,n,r){let i=e[At].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let l=0;l<s.length;l+=2){let c=s[l];if(c<0)a.push(null);else{let u=o[c];a.push(cS(e,u,s[l+1],n.metadata.read))}}i.matches=a}return i.matches}function Xc(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=Hg(t,e,i,n);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)r.push(s[a/2]);else{let c=o[a+1],u=e[-l];for(let d=Ne;d<u.length;d++){let f=u[d];f[Yi]===f[Me]&&Xc(f[O],f,c,r)}if(u[Hr]!==null){let d=u[Hr];for(let f=0;f<d.length;f++){let h=d[f];Xc(h[O],h,c,r)}}}}}return r}function dS(t,e){return t[At].queries[e].queryList}function Ug(t,e,n){let r=new Wi((n&4)===4);yE(t,e,r,r.destroy),e[At]===null&&(e[At]=new Zc),e[At].queries.push(new Kc(r))}function zg(t,e,n){t.queries===null&&(t.queries=new Jc),t.queries.track(new Qc(e,n))}function fS(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function Wg(t,e){return t.queries.getByIndex(e)}function da(t,e,n,r){let i=Ue();if(i.firstCreatePass){let o=qe();zg(i,new zs(e,n,r),o.index),fS(i,t),(n&2)===2&&(i.staticContentQueries=!0)}Ug(i,W(),n)}function Ye(t,e,n){let r=Ue();r.firstCreatePass&&(zg(r,new zs(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),Ug(r,W(),e)}function xe(t){let e=W(),n=Ue(),r=Mm();du(r+1);let i=Wg(n,r);if(t.dirty&&yw(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=i.crossesNgTemplate?Xc(n,e,r,[]):Hg(n,e,i,r);t.reset(o,tE),t.notifyOnChanges()}return!0}return!1}function Ie(){return dS(W(),Mm())}function se(t,e=""){let n=W(),r=Ue(),i=t+Nt,o=r.firstCreatePass?Xi(r,i,1,e,null):r.data[i],s=hS(r,n,o,e,t);n[i]=s,pu()&&Iu(r,n,s,o),Ki(o,!1)}var hS=(t,e,n,r,i)=>(mu(!0),Mb(e[De],r));function er(t,e,n){let r=W(),i=_M(r,t,e,n);return i!==Kr&&LE(r,Zn(),i),er}function pS(t,e,n){let r=Ue();if(r.firstCreatePass){let i=un(t);eu(n,r.data,r.blueprint,i,!0),eu(e,r.data,r.blueprint,i,!1)}}function eu(t,e,n,r,i){if(t=$e(t),Array.isArray(t))for(let o=0;o<t.length;o++)eu(t[o],e,n,r,i);else{let o=Ue(),s=W(),a=qe(),l=Wr(t)?t:$e(t.provide),c=Ym(t),u=a.providerIndexes&1048575,d=a.directiveStart,f=a.providerIndexes>>20;if(Wr(t)||!t.multi){let h=new Wn(c,i,I),p=dc(l,e,i?u:u+f,d);p===-1?(Cc(Ns(a,s),o,l),uc(o,t,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(h),s.push(h)):(n[p]=h,s[p]=h)}else{let h=dc(l,e,u+f,d),p=dc(l,e,u,u+f),m=h>=0&&n[h],v=p>=0&&n[p];if(i&&!v||!i&&!m){Cc(Ns(a,s),o,l);let y=yS(i?gS:mS,n.length,i,r,c);!i&&v&&(n[p].providerFactory=y),uc(o,t,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)}else{let y=Gg(n[i?p:h],c,!i&&r);uc(o,t,h>-1?h:p,y)}!i&&r&&v&&n[p].componentProviders++}}}function uc(t,e,n,r){let i=Wr(e),o=lb(e);if(i||o){let l=(o?$e(e.useClass):e).prototype.ngOnDestroy;if(l){let c=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let u=c.indexOf(n);u===-1?c.push(n,[r,l]):c[u+1].push(r,l)}else c.push(n,l)}}}function Gg(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function dc(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function mS(t,e,n,r){return tu(this.multi,[])}function gS(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Gn(n,n[O],this.providerFactory.index,r);o=a.slice(0,s),tu(i,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],tu(i,o);return o}function tu(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function yS(t,e,n,r,i){let o=new Wn(t,n,I);return o.multi=[],o.index=e,o.componentProviders=0,Gg(o,i,r&&!n),o}function bn(t,e=[]){return n=>{n.providersResolver=(r,i)=>pS(r,i?i(t):t,e)}}var dn=class{},qi=class{};var nu=class extends dn{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Vs(this);let i=im(e);this._bootstrapComponents=Jm(i.bootstrap),this._r3Injector=Km(e,n,[{provide:dn,useValue:this},{provide:ia,useValue:this.componentFactoryResolver},...r],Ge(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},ru=class extends qi{constructor(e){super(),this.moduleType=e}create(e){return new nu(this.moduleType,e,[])}};var Ws=class extends dn{constructor(e){super(),this.componentFactoryResolver=new Vs(this),this.instance=null;let n=new Bi([...e.providers,{provide:dn,useValue:this},{provide:ia,useValue:this.componentFactoryResolver}],e.parent||wu(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Uu(t,e,n=null){return new Ws({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var vS=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=Wm(!1,r.type),o=i.length>0?Uu([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=S({token:e,providedIn:"environment",factory:()=>new e(V(dt))});let t=e;return t})();function Re(t){aa("NgStandalone"),t.getStandaloneInjector=e=>e.get(vS).getOrCreateStandaloneInjector(t)}var fa=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),iu=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},zu=(()=>{let e=class e{compileModuleSync(r){return new ru(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=im(r),s=Jm(o.declarations).reduce((a,l)=>{let c=$n(l);return c&&a.push(new Ui(c)),a},[]);return new iu(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ha=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ce(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var qg=new N("");var Yg=new N("Application Initializer"),Kg=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=D(Yg,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(Xn(s))r.push(s);else if($g(s)){let a=new Promise((l,c)=>{s.subscribe({complete:l,error:c})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Wu=new N("appBootstrapListener");function DS(){kh(()=>{throw new M(600,!1)})}function CS(t){return t.isBoundToModule}function wS(t,e,n){try{let r=n();return Xn(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var to=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=D(yg),this.afterRenderEffectManager=D(Fu),this.componentTypes=[],this.components=[],this.isStable=D(ha).hasPendingTasks.pipe($(r=>!r)),this._injector=D(dt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof Fs;if(!this._injector.get(Kg).done){let h=!o&&rm(r),p=!1;throw new M(405,p)}let a;o?a=r:a=this._injector.get(ia).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let l=CS(a)?void 0:this._injector.get(dn),c=i||a.selector,u=a.create(Pt.NULL,[],c,l),d=u.location.nativeElement,f=u.injector.get(qg,null);return f?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),fc(this.components,u),f?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new M(101,!1);try{this._runningTick=!0;for(let r of this._views)r.detectChanges()}catch(r){this.internalErrorHandler(r)}finally{try{let r=this.afterRenderEffectManager.execute()}catch(r){this.internalErrorHandler(r)}this._runningTick=!1}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;fc(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Wu,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>fc(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new M(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function fc(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var bS=(()=>{let e=class e{constructor(){this.zone=D(Q),this.applicationRef=D(to)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ES(t){return[{provide:Q,useFactory:t},{provide:zr,multi:!0,useFactory:()=>{let e=D(bS,{optional:!0});return()=>e.initialize()}},{provide:zr,multi:!0,useFactory:()=>{let e=D(IS);return()=>{e.initialize()}}},{provide:yg,useFactory:MS}]}function MS(){let t=D(Q),e=D(Ot);return n=>t.runOutsideAngular(()=>e.handleError(n))}function SS(t){let e=ES(()=>new Q(xS(t)));return Xs([[],e])}function xS(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var IS=(()=>{let e=class e{constructor(){this.subscription=new he,this.initialized=!1,this.zone=D(Q),this.pendingTasks=D(ha)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Q.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Q.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function TS(){return typeof $localize<"u"&&$localize.locale||Us}var Gu=new N("LocaleId",{providedIn:"root",factory:()=>D(Gu,L.Optional|L.SkipSelf)||TS()});var Zg=new N("PlatformDestroyListeners");var Ms=null;function AS(t=[],e){return Pt.create({name:e,providers:[{provide:ea,useValue:"platform"},{provide:Zg,useValue:new Set([()=>Ms=null])},...t]})}function _S(t=[]){if(Ms)return Ms;let e=AS(t);return Ms=e,DS(),NS(e),e}function NS(t){t.get(Eu,null)?.forEach(n=>n())}function Jg(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=_S(r),o=[SS(),...n||[]],a=new Ws({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,l=a.get(Q);return l.run(()=>{a.resolveInjectorInitializers();let c=a.get(Ot,null),u;l.runOutsideAngular(()=>{u=l.onError.subscribe({next:h=>{c.handleError(h)}})});let d=()=>a.destroy(),f=i.get(Zg);return f.add(d),a.onDestroy(()=>{u.unsubscribe(),f.delete(d)}),wS(c,l,()=>{let h=a.get(Kg);return h.runInitializers(),h.donePromise.then(()=>{let p=a.get(Gu,Us);XM(p||Us);let m=a.get(to);return e!==void 0&&m.bootstrap(e),m})})})}catch(e){return Promise.reject(e)}}function ei(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var qu=null;function Xt(){return qu}function ey(t){qu||(qu=t)}var pa=class{},Ke=new N("DocumentToken"),ty=(()=>{let e=class e{historyGo(r){throw new Error("Not implemented")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:()=>D(kS),providedIn:"platform"});let t=e;return t})();var kS=(()=>{let e=class e extends ty{constructor(){super(),this._doc=D(Ke),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Xt().getBaseHref(this._doc)}onPopState(r){let i=Xt().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Xt().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function ny(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function Qg(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function tr(t){return t&&t[0]!=="?"?"?"+t:t}var ti=(()=>{let e=class e{historyGo(r){throw new Error("Not implemented")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:()=>D(ry),providedIn:"root"});let t=e;return t})(),OS=new N("appBaseHref"),ry=(()=>{let e=class e extends ti{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??D(Ke).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return ny(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+tr(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+tr(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+tr(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(V(ty),V(OS,8))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var no=(()=>{let e=class e{constructor(r){this._subject=new be,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=FS(Qg(Xg(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+tr(i))}normalize(r){return e.stripTrailingSlash(PS(this._basePath,Xg(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+tr(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+tr(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=tr,e.joinWithSlash=ny,e.stripTrailingSlash=Qg,e.\u0275fac=function(i){return new(i||e)(V(ti))},e.\u0275prov=S({token:e,factory:()=>RS(),providedIn:"root"});let t=e;return t})();function RS(){return new no(V(ti))}function PS(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function Xg(t){return t.replace(/\/index.html$/,"")}function FS(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function iy(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Ku=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=pn({type:e}),e.\u0275inj=hn({});let t=e;return t})(),oy="browser",LS="server";function Zu(t){return t===LS}var ma=class{};var Xu=class extends pa{constructor(){super(...arguments),this.supportsDOMEvents=!0}},ed=class t extends Xu{static makeCurrent(){ey(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=BS();return n==null?null:$S(n)}resetBaseElement(){ro=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return iy(document.cookie,e)}},ro=null;function BS(){return ro=ro||document.querySelector("base"),ro?ro.getAttribute("href"):null}function $S(t){return new URL(t,document.baseURI).pathname}var HS=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})(),td=new N("EventManagerPlugins"),cy=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new M(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(V(td),V(Q))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})(),ga=class{constructor(e){this._doc=e}},Ju="ng-app-id",uy=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Zu(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Ju}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(Ju),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Ju,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(V(Ke),V(bu),V(Mu,8),V(Qn))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})(),Qu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},rd=/%COMP%/g,dy="%COMP%",US=`_nghost-${dy}`,zS=`_ngcontent-${dy}`,WS=!0,GS=new N("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>WS});function qS(t){return zS.replace(rd,t)}function YS(t){return US.replace(rd,t)}function fy(t,e){return e.map(n=>n.replace(rd,t))}var sy=(()=>{let e=class e{constructor(r,i,o,s,a,l,c,u=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=l,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Zu(l),this.defaultRenderer=new io(r,a,c,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===_t.ShadowDom&&(i=F(g({},i),{encapsulation:_t.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof ya?o.applyToHost(r):o instanceof oo&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,l=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(i.encapsulation){case _t.Emulated:s=new ya(c,u,i,this.appId,d,a,l,f);break;case _t.ShadowDom:return new nd(c,u,r,i,a,l,this.nonce,f);default:s=new oo(c,u,i,d,a,l,f);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(V(cy),V(uy),V(bu),V(GS),V(Ke),V(Qn),V(Q),V(Mu))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})(),io=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Qu[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(ay(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(ay(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new M(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Qu[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Qu[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Kt.DashCase|Kt.Important)?e.style.setProperty(n,r,i&Kt.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Kt.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Xt().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function ay(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var nd=class extends io{constructor(e,n,r,i,o,s,a,l){super(e,o,s,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=fy(i.id,i.styles);for(let u of c){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},oo=class extends io{constructor(e,n,r,i,o,s,a,l){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=l?fy(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},ya=class extends oo{constructor(e,n,r,i,o,s,a,l){let c=i+"-"+r.id;super(e,n,r,o,s,a,l,c),this.contentAttr=qS(c),this.hostAttr=YS(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},KS=(()=>{let e=class e extends ga{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(V(Ke))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})(),ly=["alt","control","meta","shift"],ZS={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},JS={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},QS=(()=>{let e=class e extends ga{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Xt().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",l=i.indexOf("code");if(l>-1&&(i.splice(l,1),a="code."),ly.forEach(u=>{let d=i.indexOf(u);d>-1&&(i.splice(d,1),a+=u+".")}),a+=s,i.length!=0||s.length===0)return null;let c={};return c.domEventName=o,c.fullKey=a,c}static matchEventFullKeyCode(r,i){let o=ZS[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),ly.forEach(a=>{if(a!==o){let l=JS[a];l(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(V(Ke))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})();function hy(t,e){return Jg(g({rootComponent:t},XS(e)))}function XS(t){return{appProviders:[...ix,...t?.providers??[]],platformProviders:rx}}function ex(){ed.makeCurrent()}function tx(){return new Ot}function nx(){return Zm(document),document}var rx=[{provide:Qn,useValue:oy},{provide:Eu,useValue:ex,multi:!0},{provide:Ke,useFactory:nx,deps:[]}];var ix=[{provide:ea,useValue:"root"},{provide:Ot,useFactory:tx,deps:[]},{provide:td,useClass:KS,multi:!0,deps:[Ke,Q,Qn]},{provide:td,useClass:QS,multi:!0,deps:[Ke]},sy,uy,cy,{provide:Hi,useExisting:sy},{provide:ma,useClass:HS,deps:[]},[]];function ox(){return new id(V(Ke))}var id=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(V(Ke))},e.\u0275prov=S({token:e,factory:function(i){let o=null;return i?o=new i:o=ox(),o},providedIn:"root"});let t=e;return t})();var R="primary",wo=Symbol("RouteTitle"),cd=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function si(t){return new cd(t)}function ax(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function lx(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Ft(t[n],e[n]))return!1;return!0}function Ft(t,e){let n=t?ud(t):void 0,r=e?ud(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Dy(t[i],e[i]))return!1;return!0}function ud(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Dy(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function Cy(t){return t.length>0?t[t.length-1]:null}function Sn(t){return Wl(t)?t:Xn(t)?ie(Promise.resolve(t)):T(t)}var cx={exact:by,subset:Ey},wy={exact:ux,subset:dx,ignored:()=>!0};function py(t,e,n){return cx[n.paths](t.root,e.root,n.matrixParams)&&wy[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function ux(t,e){return Ft(t,e)}function by(t,e,n){if(!rr(t.segments,e.segments)||!Ca(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!by(t.children[r],e.children[r],n))return!1;return!0}function dx(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Dy(t[n],e[n]))}function Ey(t,e,n){return My(t,e,e.segments,n)}function My(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!rr(i,n)||e.hasChildren()||!Ca(i,n,r))}else if(t.segments.length===n.length){if(!rr(t.segments,n)||!Ca(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!Ey(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!rr(t.segments,i)||!Ca(t.segments,i,r)||!t.children[R]?!1:My(t.children[R],e,o,r)}}function Ca(t,e,n){return e.every((r,i)=>wy[n](t[i].parameters,r.parameters))}var En=class{constructor(e=new K([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=si(this.queryParams),this._queryParamMap}toString(){return px.serialize(this)}},K=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return wa(this)}},nr=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=si(this.parameters),this._parameterMap}toString(){return xy(this)}};function fx(t,e){return rr(t,e)&&t.every((n,r)=>Ft(n.parameters,e[r].parameters))}function rr(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function hx(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===R&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==R&&(n=n.concat(e(i,r)))}),n}var Fd=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:()=>new Ea,providedIn:"root"});let t=e;return t})(),Ea=class{parse(e){let n=new fd(e);return new En(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${so(e.root,!0)}`,r=yx(e.queryParams),i=typeof e.fragment=="string"?`#${mx(e.fragment)}`:"";return`${n}${r}${i}`}},px=new Ea;function wa(t){return t.segments.map(e=>xy(e)).join("/")}function so(t,e){if(!t.hasChildren())return wa(t);if(e){let n=t.children[R]?so(t.children[R],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==R&&r.push(`${i}:${so(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=hx(t,(r,i)=>i===R?[so(t.children[R],!1)]:[`${i}:${so(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[R]!=null?`${wa(t)}/${n[0]}`:`${wa(t)}/(${n.join("//")})`}}function Sy(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function va(t){return Sy(t).replace(/%3B/gi,";")}function mx(t){return encodeURI(t)}function dd(t){return Sy(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ba(t){return decodeURIComponent(t)}function my(t){return ba(t.replace(/\+/g,"%20"))}function xy(t){return`${dd(t.path)}${gx(t.parameters)}`}function gx(t){return Object.entries(t).map(([e,n])=>`;${dd(e)}=${dd(n)}`).join("")}function yx(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${va(n)}=${va(i)}`).join("&"):`${va(n)}=${va(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var vx=/^[^\/()?;#]+/;function od(t){let e=t.match(vx);return e?e[0]:""}var Dx=/^[^\/()?;=#]+/;function Cx(t){let e=t.match(Dx);return e?e[0]:""}var wx=/^[^=?&#]+/;function bx(t){let e=t.match(wx);return e?e[0]:""}var Ex=/^[^&#]+/;function Mx(t){let e=t.match(Ex);return e?e[0]:""}var fd=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new K([],{}):new K([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[R]=new K(e,n)),r}parseSegment(){let e=od(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new M(4009,!1);return this.capture(e),new nr(ba(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=Cx(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=od(this.remaining);i&&(r=i,this.capture(r))}e[ba(n)]=ba(r)}parseQueryParam(e){let n=bx(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=Mx(this.remaining);s&&(r=s,this.capture(r))}let i=my(n),o=my(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=od(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new M(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=R);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[R]:new K([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new M(4011,!1)}};function Iy(t){return t.segments.length>0?new K([],{[R]:t}):t}function Ty(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=Ty(i);if(r===R&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new K(t.segments,e);return Sx(n)}function Sx(t){if(t.numberOfChildren===1&&t.children[R]){let e=t.children[R];return new K(t.segments.concat(e.segments),e.children)}return t}function ai(t){return t instanceof En}function xx(t,e,n=null,r=null){let i=Ay(t);return _y(i,e,n,r)}function Ay(t){let e;function n(o){let s={};for(let l of o.children){let c=n(l);s[l.outlet]=c}let a=new K(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=Iy(r);return e??i}function _y(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return sd(i,i,i,n,r);let o=Ix(e);if(o.toRoot())return sd(i,i,new K([],{}),n,r);let s=Tx(o,i,t),a=s.processChildren?co(s.segmentGroup,s.index,o.commands):ky(s.segmentGroup,s.index,o.commands);return sd(i,s.segmentGroup,a,n,r)}function Ma(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function ho(t){return typeof t=="object"&&t!=null&&t.outlets}function sd(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([l,c])=>{o[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let s;t===e?s=n:s=Ny(t,e,n);let a=Iy(Ty(s));return new En(a,o,i)}function Ny(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=Ny(o,e,n)}),new K(t.segments,r)}var Sa=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Ma(r[0]))throw new M(4003,!1);let i=r.find(ho);if(i&&i!==Cy(r))throw new M(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Ix(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Sa(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Sa(n,e,r)}var ii=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function Tx(t,e,n){if(t.isAbsolute)return new ii(e,!0,0);if(!n)return new ii(e,!1,NaN);if(n.parent===null)return new ii(n,!0,0);let r=Ma(t.commands[0])?0:1,i=n.segments.length-1+r;return Ax(n,i,t.numberOfDoubleDots)}function Ax(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new M(4005,!1);i=r.segments.length}return new ii(r,!1,i-o)}function _x(t){return ho(t[0])?t[0].outlets:{[R]:t}}function ky(t,e,n){if(t??=new K([],{}),t.segments.length===0&&t.hasChildren())return co(t,e,n);let r=Nx(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new K(t.segments.slice(0,r.pathIndex),{});return o.children[R]=new K(t.segments.slice(r.pathIndex),t.children),co(o,0,i)}else return r.match&&i.length===0?new K(t.segments,{}):r.match&&!t.hasChildren()?hd(t,e,n):r.match?co(t,0,i):hd(t,e,n)}function co(t,e,n){if(n.length===0)return new K(t.segments,{});{let r=_x(n),i={};if(Object.keys(r).some(o=>o!==R)&&t.children[R]&&t.numberOfChildren===1&&t.children[R].segments.length===0){let o=co(t.children[R],e,n);return new K(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=ky(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new K(t.segments,i)}}function Nx(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(ho(a))break;let l=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!yy(l,c,s))return o;r+=2}else{if(!yy(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function hd(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(ho(o)){let l=kx(o.outlets);return new K(r,l)}if(i===0&&Ma(n[0])){let l=t.segments[e];r.push(new nr(l.path,gy(n[0]))),i++;continue}let s=ho(o)?o.outlets[R]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Ma(a)?(r.push(new nr(s,gy(a))),i+=2):(r.push(new nr(s,{})),i++)}return new K(r,{})}function kx(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=hd(new K([],{}),0,r))}),e}function gy(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function yy(t,e,n){return t==n.path&&Ft(e,n.parameters)}var uo="imperative",Te=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Te||{}),pt=class{constructor(e,n){this.id=e,this.url=n}},po=class extends pt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Te.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},en=class extends pt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Te.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ht=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(ht||{}),pd=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(pd||{}),Mn=class extends pt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Te.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ir=class extends pt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Te.NavigationSkipped}},mo=class extends pt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Te.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},xa=class extends pt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Te.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},md=class extends pt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Te.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gd=class extends pt{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Te.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},yd=class extends pt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Te.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vd=class extends pt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Te.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Dd=class{constructor(e){this.route=e,this.type=Te.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Cd=class{constructor(e){this.route=e,this.type=Te.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},wd=class{constructor(e){this.snapshot=e,this.type=Te.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},bd=class{constructor(e){this.snapshot=e,this.type=Te.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ed=class{constructor(e){this.snapshot=e,this.type=Te.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Md=class{constructor(e){this.snapshot=e,this.type=Te.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var go=class{},yo=class{constructor(e){this.url=e}};var Sd=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Oa,this.attachRef=null}},Oa=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Sd,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ia=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=xd(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=xd(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Id(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Id(e,this._root).map(n=>n.value)}};function xd(t,e){if(t===e.value)return e;for(let n of e.children){let r=xd(t,n);if(r)return r}return null}function Id(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Id(t,n);if(r.length)return r.unshift(e),r}return[]}var nt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function ri(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Ta=class extends Ia{constructor(e,n){super(e),this.snapshot=n,Vd(this,e)}toString(){return this.snapshot.toString()}};function Oy(t){let e=Ox(t),n=new ce([new nr("",{})]),r=new ce({}),i=new ce({}),o=new ce({}),s=new ce(""),a=new or(n,r,o,s,i,R,t,e.root);return a.snapshot=e.root,new Ta(new nt(a,[]),e)}function Ox(t){let e={},n={},r={},i="",o=new vo([],e,r,i,n,R,t,null,{});return new Aa("",new nt(o,[]))}var or=class{constructor(e,n,r,i,o,s,a,l){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe($(c=>c[wo]))??T(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe($(e=>si(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe($(e=>si(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Ld(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:g(g({},e.params),t.params),data:g(g({},e.data),t.data),resolve:g(g(g(g({},t.data),e.data),i?.data),t._resolvedData)}:r={params:g({},t.params),data:g({},t.data),resolve:g(g({},t.data),t._resolvedData??{})},i&&Py(i)&&(r.resolve[wo]=i.title),r}var vo=class{get title(){return this.data?.[wo]}constructor(e,n,r,i,o,s,a,l,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=si(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=si(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Aa=class extends Ia{constructor(e,n){super(n),this.url=e,Vd(this,n)}toString(){return Ry(this._root)}};function Vd(t,e){e.value._routerState=t,e.children.forEach(n=>Vd(t,n))}function Ry(t){let e=t.children.length>0?` { ${t.children.map(Ry).join(", ")} } `:"";return`${t.value}${e}`}function ad(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Ft(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Ft(e.params,n.params)||t.paramsSubject.next(n.params),lx(e.url,n.url)||t.urlSubject.next(n.url),Ft(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Td(t,e){let n=Ft(t.params,e.params)&&fx(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Td(t.parent,e.parent))}function Py(t){return typeof t.title=="string"||t.title===null}var jd=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=R,this.activateEvents=new be,this.deactivateEvents=new be,this.attachEvents=new be,this.detachEvents=new be,this.parentContexts=D(Oa),this.location=D(Jr),this.changeDetector=D(Zr),this.environmentInjector=D(dt),this.inputBinder=D(Bd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new M(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new M(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new M(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new M(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,c=new Ad(r,l,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:c,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Oe({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Rt]});let t=e;return t})(),Ad=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===or?this.route:e===Oa?this.childContexts:this.parent.get(e,n)}},Bd=new N("");function Rx(t,e,n){let r=Do(t,e._root,n?n._root:void 0);return new Ta(r,e)}function Do(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=Px(t,e,n);return new nt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Do(t,a)),s}}let r=Fx(e.value),i=e.children.map(o=>Do(t,o));return new nt(r,i)}}function Px(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Do(t,r,i);return Do(t,r)})}function Fx(t){return new or(new ce(t.url),new ce(t.params),new ce(t.queryParams),new ce(t.fragment),new ce(t.data),t.outlet,t.component,t)}var Fy="ngNavigationCancelingError";function Ly(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=ai(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Vy(!1,ht.Redirect,e);return i.url=n,i.navigationBehaviorOptions=r,i}function Vy(t,e,n){let r=new Error("NavigationCancelingError: "+(t||""));return r[Fy]=!0,r.cancellationCode=e,n&&(r.url=n),r}function Lx(t){return jy(t)&&ai(t.url)}function jy(t){return t&&t[Fy]}var Vx=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ke({type:e,selectors:[["ng-component"]],standalone:!0,features:[Re],decls:1,vars:0,template:function(i,o){i&1&&ge(0,"router-outlet")},dependencies:[jd],encapsulation:2});let t=e;return t})();function jx(t,e){return t.providers&&!t._injector&&(t._injector=Uu(t.providers,e,`Route: ${t.path}`)),t._injector??e}function $d(t){let e=t.children&&t.children.map($d),n=e?F(g({},t),{children:e}):g({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==R&&(n.component=Vx),n}function Lt(t){return t.outlet||R}function Bx(t,e){let n=t.filter(r=>Lt(r)===e);return n.push(...t.filter(r=>Lt(r)!==e)),n}function bo(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var $x=(t,e,n,r)=>$(i=>(new _d(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),_d=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),ad(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=ri(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=ri(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=ri(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=ri(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Md(o.value.snapshot))}),e.children.length&&this.forwardEvent(new bd(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(ad(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),ad(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=bo(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},_a=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},oi=class{constructor(e,n){this.component=e,this.route=n}};function Hx(t,e,n){let r=t._root,i=e?e._root:null;return ao(r,i,n,[r.value])}function Ux(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ci(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!zp(t)?t:e.get(t):r}function ao(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=ri(e);return t.children.forEach(s=>{zx(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>fo(a,n.getContext(s),i)),i}function zx(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=Wx(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new _a(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ao(t,e,a?a.children:null,r,i):ao(t,e,n,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new oi(a.outlet.component,s))}else s&&fo(e,a,i),i.canActivateChecks.push(new _a(r)),o.component?ao(t,null,a?a.children:null,r,i):ao(t,null,n,r,i);return i}function Wx(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!rr(t.url,e.url);case"pathParamsOrQueryParamsChange":return!rr(t.url,e.url)||!Ft(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Td(t,e)||!Ft(t.queryParams,e.queryParams);case"paramsChange":default:return!Td(t,e)}}function fo(t,e,n){let r=ri(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?fo(s,e.children.getContext(o),n):fo(s,null,n):fo(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new oi(e.outlet.component,i)):n.canDeactivateChecks.push(new oi(null,i)):n.canDeactivateChecks.push(new oi(null,i))}function Eo(t){return typeof t=="function"}function Gx(t){return typeof t=="boolean"}function qx(t){return t&&Eo(t.canLoad)}function Yx(t){return t&&Eo(t.canActivate)}function Kx(t){return t&&Eo(t.canActivateChild)}function Zx(t){return t&&Eo(t.canDeactivate)}function Jx(t){return t&&Eo(t.canMatch)}function By(t){return t instanceof Gt||t?.name==="EmptyError"}var Da=Symbol("INITIAL_VALUE");function li(){return Ct(t=>hs(t.map(e=>e.pipe(qt(1),kr(Da)))).pipe($(e=>{for(let n of e)if(n!==!0){if(n===Da)return Da;if(n===!1||n instanceof En)return n}return!0}),Dt(e=>e!==Da),qt(1)))}function Qx(t,e){return pe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?T(F(g({},n),{guardsResult:!0})):Xx(s,r,i,t).pipe(pe(a=>a&&Gx(a)?eI(r,o,t,e):T(a)),$(a=>F(g({},n),{guardsResult:a})))})}function Xx(t,e,n,r){return ie(t).pipe(pe(i=>oI(i.component,i.route,n,e,r)),xt(i=>i!==!0,!0))}function eI(t,e,n,r){return ie(e).pipe(_r(i=>Ar(nI(i.route.parent,r),tI(i.route,r),iI(t,i.path,n),rI(t,i.route,n))),xt(i=>i!==!0,!0))}function tI(t,e){return t!==null&&e&&e(new Ed(t)),T(!0)}function nI(t,e){return t!==null&&e&&e(new wd(t)),T(!0)}function rI(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return T(!0);let i=r.map(o=>ps(()=>{let s=bo(e)??n,a=ci(o,s),l=Yx(a)?a.canActivate(e,t):vn(s,()=>a(e,t));return Sn(l).pipe(xt())}));return T(i).pipe(li())}function iI(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>Ux(s)).filter(s=>s!==null).map(s=>ps(()=>{let a=s.guards.map(l=>{let c=bo(s.node)??n,u=ci(l,c),d=Kx(u)?u.canActivateChild(r,t):vn(c,()=>u(r,t));return Sn(d).pipe(xt())});return T(a).pipe(li())}));return T(o).pipe(li())}function oI(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return T(!0);let s=o.map(a=>{let l=bo(e)??i,c=ci(a,l),u=Zx(c)?c.canDeactivate(t,e,n,r):vn(l,()=>c(t,e,n,r));return Sn(u).pipe(xt())});return T(s).pipe(li())}function sI(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return T(!0);let o=i.map(s=>{let a=ci(s,t),l=qx(a)?a.canLoad(e,n):vn(t,()=>a(e,n));return Sn(l)});return T(o).pipe(li(),$y(r))}function $y(t){return $l(ve(e=>{if(ai(e))throw Ly(t,e)}),$(e=>e===!0))}function aI(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return T(!0);let o=i.map(s=>{let a=ci(s,t),l=Jx(a)?a.canMatch(e,n):vn(t,()=>a(e,n));return Sn(l)});return T(o).pipe(li(),$y(r))}var Co=class{constructor(e){this.segmentGroup=e||null}},Na=class extends Error{constructor(e){super(),this.urlTree=e}};function ni(t){return Ir(new Co(t))}function lI(t){return Ir(new M(4e3,!1))}function cI(t){return Ir(Vy(!1,ht.GuardRejected))}var Nd=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return T(r);if(i.numberOfChildren>1||!i.children[R])return lI(e.redirectTo);i=i.children[R]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new Na(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new En(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,r,i)}),new K(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new M(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},kd={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function uI(t,e,n,r,i){let o=Hd(t,e,n);return o.matched?(r=jx(e,r),aI(r,e,n,i).pipe($(s=>s===!0?o:g({},kd)))):T(o)}function Hd(t,e,n){if(e.path==="**")return dI(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?g({},kd):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||ax)(n,t,e);if(!i)return g({},kd);let o={};Object.entries(i.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=i.consumed.length>0?g(g({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function dI(t){return{matched:!0,parameters:t.length>0?Cy(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function vy(t,e,n,r){return n.length>0&&pI(t,n,r)?{segmentGroup:new K(e,hI(r,new K(n,t.children))),slicedSegments:[]}:n.length===0&&mI(t,n,r)?{segmentGroup:new K(t.segments,fI(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new K(t.segments,t.children),slicedSegments:n}}function fI(t,e,n,r){let i={};for(let o of n)if(Ra(t,e,o)&&!r[Lt(o)]){let s=new K([],{});i[Lt(o)]=s}return g(g({},r),i)}function hI(t,e){let n={};n[R]=e;for(let r of t)if(r.path===""&&Lt(r)!==R){let i=new K([],{});n[Lt(r)]=i}return n}function pI(t,e,n){return n.some(r=>Ra(t,e,r)&&Lt(r)!==R)}function mI(t,e,n){return n.some(r=>Ra(t,e,r))}function Ra(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function gI(t,e,n,r){return Lt(t)!==r&&(r===R||!Ra(e,n,t))?!1:Hd(e,t,n).matched}function yI(t,e,n){return e.length===0&&!t.children[n]}var Od=class{};function vI(t,e,n,r,i,o,s="emptyOnly"){return new Rd(t,e,n,r,i,s,o).recognize()}var DI=31,Rd=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Nd(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new M(4002,`'${e.segmentGroup}'`)}recognize(){let e=vy(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe($(n=>{let r=new vo([],Object.freeze({}),Object.freeze(g({},this.urlTree.queryParams)),this.urlTree.fragment,{},R,this.rootComponentType,null,{}),i=new nt(r,n),o=new Aa("",i),s=xx(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,R).pipe(sn(r=>{if(r instanceof Na)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Co?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=Ld(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe($(o=>o instanceof nt?[o]:[]))}processChildren(e,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return ie(i).pipe(_r(o=>{let s=r.children[o],a=Bx(n,o);return this.processSegmentGroup(e,a,s,o)}),Kl((o,s)=>(o.push(...s),o)),an(null),Yl(),pe(o=>{if(o===null)return ni(r);let s=Hy(o);return CI(s),T(s)}))}processSegment(e,n,r,i,o,s){return ie(n).pipe(_r(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,o,s).pipe(sn(l=>{if(l instanceof Co)return T(null);throw l}))),xt(a=>!!a),sn(a=>{if(By(a))return yI(r,i,o)?T(new Od):ni(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return gI(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):ni(i):ni(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){let{matched:a,consumedSegments:l,positionalParamSegments:c,remainingSegments:u}=Hd(n,i,o);if(!a)return ni(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>DI&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(l,i.redirectTo,c);return this.applyRedirects.lineralizeSegments(i,d).pipe(pe(f=>this.processSegment(e,r,n,f.concat(u),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){let s=uI(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(Ct(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ct(({routes:l})=>{let c=r._loadedInjector??e,{consumedSegments:u,remainingSegments:d,parameters:f}=a,h=new vo(u,f,Object.freeze(g({},this.urlTree.queryParams)),this.urlTree.fragment,bI(r),Lt(r),r.component??r._loadedComponent??null,r,EI(r)),{segmentGroup:p,slicedSegments:m}=vy(n,u,d,l);if(m.length===0&&p.hasChildren())return this.processChildren(c,l,p).pipe($(y=>y===null?null:new nt(h,y)));if(l.length===0&&m.length===0)return T(new nt(h,[]));let v=Lt(r)===o;return this.processSegment(c,l,p,m,v?R:o,!0).pipe($(y=>new nt(h,y instanceof nt?[y]:[])))}))):ni(n)))}getChildConfig(e,n,r){return n.children?T({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?T({routes:n._loadedRoutes,injector:n._loadedInjector}):sI(e,n,r,this.urlSerializer).pipe(pe(i=>i?this.configLoader.loadChildren(e,n).pipe(ve(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):cI(n))):T({routes:[],injector:e})}};function CI(t){t.sort((e,n)=>e.value.outlet===R?-1:n.value.outlet===R?1:e.value.outlet.localeCompare(n.value.outlet))}function wI(t){let e=t.value.routeConfig;return e&&e.path===""}function Hy(t){let e=[],n=new Set;for(let r of t){if(!wI(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=Hy(r.children);e.push(new nt(r.value,i))}return e.filter(r=>!n.has(r))}function bI(t){return t.data||{}}function EI(t){return t.resolve||{}}function MI(t,e,n,r,i,o){return pe(s=>vI(t,e,n,r,s.extractedUrl,i,o).pipe($(({state:a,tree:l})=>F(g({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function SI(t,e){return pe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return T(n);let o=new Set(i.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let c of Uy(l))s.add(c);let a=0;return ie(s).pipe(_r(l=>o.has(l)?xI(l,r,t,e):(l.data=Ld(l,l.parent,t).resolve,T(void 0))),ve(()=>a++),Nr(1),pe(l=>a===s.size?T(n):at))})}function Uy(t){let e=t.children.map(n=>Uy(n)).flat();return[t,...e]}function xI(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!Py(i)&&(o[wo]=i.title),II(o,t,e,r).pipe($(s=>(t._resolvedData=s,t.data=Ld(t,t.parent,n).resolve,null)))}function II(t,e,n,r){let i=ud(t);if(i.length===0)return T({});let o={};return ie(i).pipe(pe(s=>TI(t[s],e,n,r).pipe(xt(),ve(a=>{o[s]=a}))),Nr(1),ql(o),sn(s=>By(s)?at:Ir(s)))}function TI(t,e,n,r){let i=bo(e)??r,o=ci(t,i),s=o.resolve?o.resolve(e,n):vn(i,()=>o(e,n));return Sn(s)}function ld(t){return Ct(e=>{let n=t(e);return n?ie(n).pipe($(()=>e)):T(e)})}var zy=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===R);return i}getResolvedTitleForRoute(r){return r.data[wo]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:()=>D(AI),providedIn:"root"});let t=e;return t})(),AI=(()=>{let e=class e extends zy{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(V(id))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ud=new N("",{providedIn:"root",factory:()=>({})}),zd=new N("ROUTES"),_I=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=D(zu)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return T(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Sn(r.loadComponent()).pipe($(Wy),ve(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),ki(()=>{this.componentLoaders.delete(r)})),o=new xr(i,()=>new le).pipe(Sr());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return T({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=NI(i,this.compiler,r,this.onLoadEndListener).pipe(ki(()=>{this.childrenLoaders.delete(i)})),a=new xr(s,()=>new le).pipe(Sr());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function NI(t,e,n,r){return Sn(t.loadChildren()).pipe($(Wy),pe(i=>i instanceof qi||Array.isArray(i)?T(i):ie(e.compileModuleAsync(i))),$(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(zd,[],{optional:!0,self:!0}).flat()),{routes:s.map($d),injector:o}}))}function kI(t){return t&&typeof t=="object"&&"default"in t}function Wy(t){return kI(t)?t.default:t}var Wd=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:()=>D(OI),providedIn:"root"});let t=e;return t})(),OI=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Gy=new N(""),qy=new N("");function RI(t,e,n){let r=t.get(qy),i=t.get(Ke);return t.get(Q).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let o,s=new Promise(c=>{o=c}),a=i.startViewTransition(()=>(o(),PI(t))),{onViewTransitionCreated:l}=r;return l&&vn(t,()=>l({transition:a,from:e,to:n})),s})}function PI(t){return new Promise(e=>{Pu(e,{injector:t})})}var FI=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new le,this.transitionAbortSubject=new le,this.configLoader=D(_I),this.environmentInjector=D(dt),this.urlSerializer=D(Fd),this.rootContexts=D(Oa),this.location=D(no),this.inputBindingEnabled=D(Bd,{optional:!0})!==null,this.titleStrategy=D(zy),this.options=D(Ud,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=D(Wd),this.createViewTransition=D(Gy,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>T(void 0),this.rootComponentType=null;let r=o=>this.events.next(new Dd(o)),i=o=>this.events.next(new Cd(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(F(g(g({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new ce({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:uo,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Dt(s=>s.id!==0),$(s=>F(g({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Ct(s=>{this.currentTransition=s;let a=!1,l=!1;return T(s).pipe(ve(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?F(g({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ct(c=>{let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&d!=="reload"){let f="";return this.events.next(new ir(c.id,this.urlSerializer.serialize(c.rawUrl),f,pd.IgnoredSameUrlNavigation)),c.resolve(null),at}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return T(c).pipe(Ct(f=>{let h=this.transitions?.getValue();return this.events.next(new po(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),h!==this.transitions?.getValue()?at:Promise.resolve(f)}),MI(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),ve(f=>{s.targetSnapshot=f.targetSnapshot,s.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=F(g({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let h=new xa(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(h)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:f,extractedUrl:h,source:p,restoredState:m,extras:v}=c,y=new po(f,this.urlSerializer.serialize(h),p,m);this.events.next(y);let b=Oy(this.rootComponentType).snapshot;return this.currentTransition=s=F(g({},c),{targetSnapshot:b,urlAfterRedirects:h,extras:F(g({},v),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,T(s)}else{let f="";return this.events.next(new ir(c.id,this.urlSerializer.serialize(c.extractedUrl),f,pd.IgnoredByUrlHandlingStrategy)),c.resolve(null),at}}),ve(c=>{let u=new md(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),$(c=>(this.currentTransition=s=F(g({},c),{guards:Hx(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),Qx(this.environmentInjector,c=>this.events.next(c)),ve(c=>{if(s.guardsResult=c.guardsResult,ai(c.guardsResult))throw Ly(this.urlSerializer,c.guardsResult);let u=new gd(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),Dt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",ht.GuardRejected),!1)),ld(c=>{if(c.guards.canActivateChecks.length)return T(c).pipe(ve(u=>{let d=new yd(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),Ct(u=>{let d=!1;return T(u).pipe(SI(this.paramsInheritanceStrategy,this.environmentInjector),ve({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",ht.NoDataFromResolver)}}))}),ve(u=>{let d=new vd(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),ld(c=>{let u=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(ve(h=>{d.component=h}),$(()=>{})));for(let h of d.children)f.push(...u(h));return f};return hs(u(c.targetSnapshot.root)).pipe(an(null),qt(1))}),ld(()=>this.afterPreactivation()),Ct(()=>{let{currentSnapshot:c,targetSnapshot:u}=s,d=this.createViewTransition?.(this.environmentInjector,c.root,u.root);return d?ie(d).pipe($(()=>s)):T(s)}),$(c=>{let u=Rx(r.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=F(g({},c),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,s}),ve(()=>{this.events.next(new go)}),$x(this.rootContexts,r.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),qt(1),ve({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new en(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),Zl(this.transitionAbortSubject.pipe(ve(c=>{throw c}))),ki(()=>{!a&&!l&&this.cancelNavigationTransition(s,"",ht.SupersededByNewNavigation),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),sn(c=>{if(l=!0,jy(c))this.events.next(new Mn(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),Lx(c)?this.events.next(new yo(c.url)):s.resolve(!1);else{this.events.next(new mo(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0));try{s.resolve(r.errorHandler(c))}catch(u){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(u)}}return at}))}))}cancelNavigationTransition(r,i,o){let s=new Mn(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function LI(t){return t!==uo}var VI=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:()=>D(jI),providedIn:"root"});let t=e;return t})(),Pd=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},jI=(()=>{let e=class e extends Pd{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Jn(e)))(o||e)}})(),e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Yy=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:()=>D(BI),providedIn:"root"});let t=e;return t})(),BI=(()=>{let e=class e extends Yy{constructor(){super(...arguments),this.location=D(no),this.urlSerializer=D(Fd),this.options=D(Ud,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=D(Wd),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new En,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Oy(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof po)this.stateMemento=this.createStateMemento();else if(r instanceof ir)this.rawUrlTree=i.initialUrl;else if(r instanceof xa){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof go?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Mn&&(r.code===ht.GuardRejected||r.code===ht.NoDataFromResolver)?this.restoreHistory(i):r instanceof mo?this.restoreHistory(i,!0):r instanceof en&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=g(g({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=g(g({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Jn(e)))(o||e)}})(),e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),lo=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(lo||{});function $I(t,e){t.events.pipe(Dt(n=>n instanceof en||n instanceof Mn||n instanceof mo||n instanceof ir),$(n=>n instanceof en||n instanceof ir?lo.COMPLETE:(n instanceof Mn?n.code===ht.Redirect||n.code===ht.SupersededByNewNavigation:!1)?lo.REDIRECTING:lo.FAILED),Dt(n=>n!==lo.REDIRECTING),qt(1)).subscribe(()=>{e()})}function HI(t){throw t}var UI={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},zI={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Pa=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=D(fa),this.stateManager=D(Yy),this.options=D(Ud,{optional:!0})||{},this.pendingTasks=D(ha),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=D(FI),this.urlSerializer=D(Fd),this.location=D(no),this.urlHandlingStrategy=D(Wd),this._events=new le,this.errorHandler=this.options.errorHandler||HI,this.navigated=!1,this.routeReuseStrategy=D(VI),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=D(zd,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!D(Bd,{optional:!0}),this.eventsSubscription=new he,this.isNgZoneEnabled=D(Q)instanceof Q&&Q.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof Mn&&i.code!==ht.Redirect&&i.code!==ht.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof en)this.navigated=!0;else if(i instanceof yo){let a=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),l={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||LI(o.source)};this.scheduleNavigation(a,uo,null,l,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}GI(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),uo,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let c=g({},o);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let l=this.parseUrl(r);this.scheduleNavigation(l,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map($d),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:l,preserveFragment:c}=i,u=c?this.currentUrlTree.fragment:a,d=null;switch(l){case"merge":d=g(g({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let h=o?o.snapshot:this.routerState.snapshot.root;f=Ay(h)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),f=this.currentUrlTree.root}return _y(f,r,d,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=ai(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,uo,null,i)}navigate(r,i={skipLocationChange:!1}){return WI(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=g({},UI):i===!1?o=g({},zI):o=i,ai(r))return py(this.currentUrlTree,r,o);let s=this.parseUrl(r);return py(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let l,c,u;a?(l=a.resolve,c=a.reject,u=a.promise):u=new Promise((f,h)=>{l=f,c=h});let d=this.pendingTasks.add();return $I(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:l,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function WI(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new M(4008,!1)}function GI(t){return!(t instanceof go)&&!(t instanceof yo)}var ka=(()=>{let e=class e{constructor(r,i,o,s,a,l){this.router=r,this.route=i,this.tabIndexAttribute=o,this.renderer=s,this.el=a,this.locationStrategy=l,this.href=null,this.commands=null,this.onChanges=new le,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let c=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=r.events.subscribe(u=>{u instanceof en&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,o,s,a){if(this.urlTree===null||this.isAnchorElement&&(r!==0||i||o||s||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(this.urlTree,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=this.urlTree!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;let r=this.href===null?null:dg(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(r,i){let o=this.renderer,s=this.el.nativeElement;i!==null?o.setAttribute(s,r,i):o.removeAttribute(s,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(I(Pa),I(or),vu("tabindex"),I(Et),I(me),I(ti))},e.\u0275dir=Oe({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,o){i&1&&oe("click",function(a){return o.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&Qr("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[Ee.HasDecoratorInputTransform,"preserveFragment","preserveFragment",ei],skipLocationChange:[Ee.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",ei],replaceUrl:[Ee.HasDecoratorInputTransform,"replaceUrl","replaceUrl",ei],routerLink:"routerLink"},standalone:!0,features:[Vu,Rt]});let t=e;return t})(),Ky=(()=>{let e=class e{get isActive(){return this._isActive}constructor(r,i,o,s,a){this.router=r,this.element=i,this.renderer=o,this.cdr=s,this.link=a,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new be,this.routerEventsSubscription=r.events.subscribe(l=>{l instanceof en&&this.update()})}ngAfterContentInit(){T(this.links.changes,T(null)).pipe(Tr()).subscribe(r=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let r=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=ie(r).pipe(Tr()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(r){let i=Array.isArray(r)?r:r.split(" ");this.classes=i.filter(o=>!!o)}ngOnChanges(r){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let r=this.hasActiveLinks();this._isActive!==r&&(this._isActive=r,this.cdr.markForCheck(),this.classes.forEach(i=>{r?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),r&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(r))})}isLinkActive(r){let i=qI(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>o.urlTree?r.isActive(o.urlTree,i):!1}hasActiveLinks(){let r=this.isLinkActive(this.router);return this.link&&r(this.link)||this.links.some(r)}};e.\u0275fac=function(i){return new(i||e)(I(Pa),I(me),I(Et),I(Zr),I(ka,8))},e.\u0275dir=Oe({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(i,o,s){if(i&1&&da(s,ka,5),i&2){let a;xe(a=Ie())&&(o.links=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Rt]});let t=e;return t})();function qI(t){return!!t.paths}var YI=new N("");function Zy(t,...e){return Xs([{provide:zd,multi:!0,useValue:t},[],{provide:or,useFactory:KI,deps:[Pa]},{provide:Wu,multi:!0,useFactory:JI},e.map(n=>n.\u0275providers)])}function KI(t){return t.routerState.root}function ZI(t,e){return{\u0275kind:t,\u0275providers:e}}function JI(){let t=D(Pt);return e=>{let n=t.get(to);if(e!==n.components[0])return;let r=t.get(Pa),i=t.get(QI);t.get(XI)===1&&r.initialNavigation(),t.get(eT,null,L.Optional)?.setUpPreloading(),t.get(YI,null,L.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var QI=new N("",{factory:()=>new le}),XI=new N("",{providedIn:"root",factory:()=>1});var eT=new N("");function Jy(t){let e=[{provide:Gy,useValue:RI},{provide:qy,useValue:g({skipNextTransition:!!t?.skipInitialTransition},t)}];return ZI(9,e)}var Fa=class{constructor(){this.Arrows=!0,this.ArrowSize=20}};var Xy=(t,e,n,r)=>{let{x:i,y:o}=t,s=e.x-t.x,a=e.y-t.y,c=Math.sqrt(s*s+a*a)/12;if(Math.abs(a)<=5)return`M${t.x} ${t.y} L${e.x} ${e.y}`;{let u=e.x,d=e.y,f=t.x+s/2,h=e.x-s/2,p=e.y>t.y?o+c:o-c,m=e.y>t.y?d-c:d+c;return`M${i} ${o} C${f} ${p} ${h} ${m} ${u} ${d}`}},ev=(t,e,n,r)=>{if(Math.abs(t.x-e.x)<=5)return`M${t.x} ${t.y} L${e.x} ${e.y}`;if(Math.abs(t.y-e.y)<=5)return`M${t.x} ${t.y} L${e.x} ${e.y}`;let i=(t.x+e.x)/2;return`M${t.x} ${t.y} L${i} ${t.y} L${i} ${e.y} L${e.x} ${e.y}`},tv=(t,e,n,r)=>{let{x:i,y:o}=t,{x:s,y:a}=e;s-=n;let l={x:i+(s-i)/3,y:o},c={x:s-(s-i)/3,y:a};return`M${i} ${o} C${l.x} ${l.y} ${c.x} ${c.y} ${s} ${a}`},La=(t,e,n,r)=>{let{x:i,y:o,dotIndex:s}=t,{x:a,y:l,dotIndex:c}=e,u=Qy(s,n),d=Qy(c,n);i+=u.x-r/2,o+=u.y,a+=d.x-r/2,l+=d.y;let f={x:i+u.cpX,y:o+u.cpY},h={x:a+d.cpX,y:l+d.cpY};return`M${i-u.x} ${o-u.y} C${f.x} ${f.y} ${h.x} ${h.y} ${a} ${l}`};function Qy(t,e){let n=50;switch(t){case 0:return{x:0,y:-e,cpX:0,cpY:-n};case 1:return{x:e,y:0,cpX:n,cpY:0};case 2:return{x:0,y:e,cpX:0,cpY:n};case 3:return{x:-e,y:0,cpX:-n,cpY:0};default:return{x:0,y:0,cpX:0,cpY:0}}}var ui=(()=>{let e=class e{constructor(r){this.ngZone=r,this.items=new Map,this.config=new Fa,this.arrowsChange=new le,this.deps=new Map,this.enableChildDragging=new ce(!0),this.enableZooming=new ce(!0),this.direction="horizontal",this.horizontalPadding=100,this.verticalPadding=20,this.groupPadding=40,this.scale=1,this.panX=0,this.panY=0,this.gridSize=1,this.arrows=[],this.layoutUpdated=new le,this.onMouse=new le,this.arrowFn=La,this.onMouseMove=i=>{this.onMouse.next(i)},this.ngZone.runOutsideAngular(()=>{document.addEventListener("mousemove",this.onMouseMove)})}update(r){this.items.clear(),r.forEach(i=>{this.items.set(i.id,i),i.deps.forEach(o=>{let s=this.deps.get(o);s||(s=[]),s.push(i.id),this.deps.set(o,s)})})}get list(){return Array.from(this.items.values())}get zRect(){return this.zoomContainer.getBoundingClientRect()}};e.\u0275fac=function(i){return new(i||e)(V(Q))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})();var ja=new Map,Mo=new Map,rv=100,Va=20,Ba=class{constructor(e,n="vertical",r=100,i=20,o=20){this.list=e,this.direction=n,this.horizontalPadding=r,this.verticalPadding=i,this.groupPadding=o,this.root=[],ja.clear(),Mo.clear(),this.list.forEach(s=>{ja.set(s.position.id,new Gd(s.position,s.elRect)),s.position.deps.forEach(a=>{let l=Mo.get(a)||[];l.push(s.position.id),Mo.set(a,l)}),s.position.deps.length===0&&this.root.push(s.position.id)})}autoArrange(){this.root.forEach(n=>{ja.get(n).arrange(0,0,this.direction)});let e=new Map;for(let n of this.list)e.set(n.position.id,n.position);return e}},Gd=class{constructor(e,n){this.position=e,this.elRect=n}get deps(){return Mo.get(this.position.id)||[]}arrange(e=0,n=0,r){let i=Mo.get(this.position.id)||[],o=e,s=n,a=i.length;if(a){r==="horizontal"?o+=this.elRect.width+rv:s+=this.elRect.height+rv;let l,c;for(let u=0;u<a;u++){let d=i[u],f=ja.get(d),{x:h,y:p}=f.arrange(o,s,r);u===0&&(l=f.position),u===a-1&&(c=f.position),r==="horizontal"?s=p+Va:o=h+Va}r==="horizontal"?(s-=Va+this.elRect.height,n=l.y+(c.y-l.y)/2):(o-=Va+this.elRect.width,e=l.x+(c.x-l.x)/2)}return this.position.x=e,this.position.y=n,r==="horizontal"?{x:o,y:s+this.elRect.height}:{x:o+this.elRect.width,y:s}}};var $a=class{constructor(e,n="horizontal"){this.list=e,this.direction=n,this.reverseDepsMap=new Map,this.closestDots=new Map,this.setReverseDepsMap(e.map(r=>r.position))}getClosestDotsSimplified(e,n){let r=[...e.position.deps,...this.reverseDepsMap.get(e.position.id)||[]];r.forEach(o=>this.findClosestDot(o,e));let i=r.map(o=>{let s=`${e.position.id}-${o}`;return this.closestDots.get(s)});return[this.closestDots.get(`${e.position.id}-${n}`),this.closestDots.get(`${n}-${e.position.id}`)]}findClosestDot(e,n){let r=`${n.position.id}-${e}`,i=`${e}-${n.position.id}`;if(this.closestDots.has(r))return;let o=this.list.find(s=>s.position.id===e);if(o){let[s,a]=this._findClosestConnectionPoints(n,o);this.closestDots.set(r,s),this.closestDots.set(i,a)}}computeDistance(e,n){let r=e.x-n.x,i=e.y-n.y;return Math.sqrt(r*r+i*i)}_findClosestConnectionPoints(e,n){let i=!1,o=this.direction==="vertical";if(!n.position.deps.includes(e.position.id)){let c=n;n=e,e=c,i=!0}let s=(()=>{let{width:c,height:u}=n.elRect,{x:d,y:f}=n.position,{x:h,y:p}=e.position;if(o){if(f+u<p)return"top";if(f-u>p)return"bottom";if(d+c<h)return"left";if(d-c>h)return"right"}else{if(d+c<h)return"left";if(d-c>h)return"right";if(f+u<p)return"top";if(f-u>p)return"bottom"}return"right"})(),a=s==="right"?1:s==="left"?3:s==="bottom"?2:0,l=s==="right"?3:s==="left"?1:s==="bottom"?0:2;return i?[l,a]:[a,l]}updateDotVisibility(e){Object.keys(e).forEach(n=>{let r=e[n],i=r.position;r.dots.toArray().forEach((s,a)=>{let l=Array.from(this.closestDots.keys()).some(c=>c.startsWith(n)&&this.closestDots.get(c)===a);s.nativeElement.style.visibility=l?"visible":"hidden"})})}setReverseDepsMap(e){e.forEach(n=>{n.deps.forEach(r=>{this.reverseDepsMap.has(r)||this.reverseDepsMap.set(r,[]),this.reverseDepsMap.get(r).push(n.id)})})}};var tT=["dot"],nT=["flowChild",""],rT=["*"],di=(()=>{let e=class e{constructor(r,i,o){this.el=r,this.flow=i,this.ngZone=o,this.isDragging=!1,this.offsetX=0,this.offsetY=0,this.positionChange=new le,this.onMouseUp=s=>{s.stopPropagation(),this.isDragging=!1,this.flow.isChildDragging=!1},this.onMouseDown=s=>{s.stopPropagation(),this.isDragging=!0,this.flow.isChildDragging=!0;let a=this.el.nativeElement.getBoundingClientRect();this.offsetX=s.clientX-a.x,this.offsetY=s.clientY-a.y},this.onMouseMove=s=>{if(s.stopPropagation(),s.preventDefault(),this.isDragging){s.stopPropagation();let a=this.flow.zRect,l=s.clientX-a.left,c=s.clientY-a.top,u=Math.round((l-this.flow.panX-this.offsetX)/(this.flow.gridSize*this.flow.scale))*this.flow.gridSize,d=Math.round((c-this.flow.panY-this.offsetY)/(this.flow.gridSize*this.flow.scale))*this.flow.gridSize;this.position.x=u-a.left,this.position.y=d-a.top,this.positionChange.next(this.position),this.flow.arrowsChange.next(this.position)}},this.el.nativeElement.style.position="absolute",this.el.nativeElement.style.transformOrigin="0, 0",this.ngZone.runOutsideAngular(()=>{this.flow.enableChildDragging.subscribe(s=>{s?this.enableDragging():this.disableDragging()})}),this.layoutSubscribe=this.flow.layoutUpdated.subscribe(s=>{this.position=this.flow.items.get(this.position.id),this.positionChange.next(this.position)}),this.positionChange.subscribe(s=>{let{left:a,top:l}=this.flow.zRect;this.updatePosition(this.position.x+a,this.position.y+l)})}enableDragging(){this.mouseMoveSubscription=this.flow.onMouse.subscribe(this.onMouseMove),this.el.nativeElement.addEventListener("mouseup",this.onMouseUp),this.el.nativeElement.addEventListener("mousedown",this.onMouseDown)}disableDragging(){this.mouseMoveSubscription?.unsubscribe(),this.el.nativeElement.removeEventListener("mouseup",this.onMouseUp),this.el.nativeElement.removeEventListener("mousedown",this.onMouseDown)}ngOnInit(){this.updatePosition(this.position.x,this.position.y)}ngOnChanges(r){}updatePosition(r,i){this.el.nativeElement.style.transform=`translate3d(${r}px, ${i}px, 0)`}ngOnDestroy(){this.disableDragging(),this.layoutSubscribe.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)(I(me),I(ui),I(Q))},e.\u0275cmp=ke({type:e,selectors:[["","flowChild",""]],viewQuery:function(i,o){if(i&1&&Ye(tT,5),i&2){let s;xe(s=Ie())&&(o.dots=s)}},inputs:{position:[Ee.None,"flowChild","position"]},standalone:!0,features:[Rt,Re],attrs:nT,ngContentSelectors:rT,decls:9,vars:0,consts:[[1,"dot","dot-top"],["dot",""],[1,"dot","dot-right"],[1,"dot","dot-bottom"],[1,"dot","dot-left"]],template:function(i,o){i&1&&(ca(),ua(0),ge(1,"div",0,1)(3,"div",2,1)(5,"div",3,1)(7,"div",4,1))},dependencies:[Ku],styles:[".dot[_ngcontent-%COMP%]{--dot-half-size: calc(var(--dot-size) / 2 * -1);position:absolute;width:var(--dot-size);height:var(--dot-size);background:var(--flow-dot-color);border-radius:999px}.dot-left[_ngcontent-%COMP%]{top:calc(50% + var(--dot-half-size));left:var(--dot-half-size)}.dot-right[_ngcontent-%COMP%]{top:calc(50% + var(--dot-half-size));right:var(--dot-half-size)}.dot-top[_ngcontent-%COMP%]{left:50%;top:var(--dot-half-size)}.dot-bottom[_ngcontent-%COMP%]{left:50%;bottom:var(--dot-half-size)}.invisible[_ngcontent-%COMP%]{visibility:hidden}"],changeDetection:0});let t=e;return t})();var Ha=class{constructor(e,n,r,i,o){this.list=e,this.containerRect=n,this.scale=r,this.panX=i,this.panY=o,this.containerPadding=0;let s={list:e,containerRect:n,scale:r,panX:i,panY:o};this.containerPadding=30/this.scale,this.cRect={x:this.containerRect.x/this.scale-this.panX,y:this.containerRect.y/this.scale-this.panY,width:this.containerRect.width/this.scale,height:this.containerRect.height/this.scale}}fitToWindow(){let e=this.getPositions(),{minX:n,maxX:r,minY:i,maxY:o}=this.getBoundaries(e),s=r-n+this.containerPadding,a=o-i+this.containerPadding,l=this.getNewScale(s,a),{panX:c,panY:u}=this.getPanValues(s,a,l,n,i);return{scale:l,panX:c,panY:u}}getPositions(){return this.list.map(e=>{let n=e.elRect.x/this.scale-this.panX,r=e.elRect.y/this.scale-this.panY,i=e.elRect.width,o=e.elRect.height;return{x:n,y:r,width:i,height:o}})}getBoundaries(e){let n=Math.min(...e.map(s=>s.x)),r=Math.max(...e.map(s=>s.x+s.width)),i=Math.min(...e.map(s=>s.y)),o=Math.max(...e.map(s=>s.y+s.height));return{minX:n,maxX:r,minY:i,maxY:o}}getNewScale(e,n){let r=this.cRect.width/e,i=this.cRect.height/n;return Math.min(r,i)}getPanValues(e,n,r,i,o){let s=e*r,a=n*r,l=this.cRect.width/2,c=this.cRect.height/2,u=l-(s/2+i*r),d=c-(a/2+o*r),f=this.containerPadding*r/2,h=this.cRect.x*r+u+f,p=this.cRect.y*r+d+f;return{panX:h,panY:p}}};var iT=["zoomContainer"],oT=["svg"],sT=["g"],aT=["guideLines"],lT=["*"],cT=.05,fi=(()=>{let e=class e{constructor(r,i,o){this.el=r,this.flow=i,this.ngZone=o,this.children=new Wi,this.initialX=0,this.initialY=0,this._startDraggingZoomContainer=s=>{s.stopPropagation(),this.flow.isDraggingZoomContainer=!0,this.initialX=s.clientX-this.flow.panX,this.initialY=s.clientY-this.flow.panY},this._stopDraggingZoomContainer=s=>{s.stopPropagation(),this.flow.isDraggingZoomContainer=!1},this._dragZoomContainer=s=>{this.flow.isDraggingZoomContainer&&(s.preventDefault(),s.stopPropagation(),this.flow.panX=s.clientX-this.initialX,this.flow.panY=s.clientY-this.initialY,this.updateZoomContainer())},this._wheelPanning=s=>{if(s.stopPropagation(),s.preventDefault(),s.ctrlKey||s.metaKey){if(!this.flow.enableZooming.value)return;this.zoomHandle(s)}else this.flow.panX-=s.deltaX,this.flow.panY-=s.deltaY,this.updateZoomContainer()},this.zoomHandle=s=>{if(this.flow.isDraggingZoomContainer||this.flow.isChildDragging)return;s.stopPropagation(),s.preventDefault();let a=s.deltaY<0?1:-1;a===-1&&this.flow.scale<.1||this.setZoom1(s.clientX,s.clientY,a)},this.flow.zoomContainer=this.el.nativeElement,this.flow.arrowsChange.subscribe(s=>this.updateArrows(s)),this.ngZone.runOutsideAngular(()=>{this.el.nativeElement.addEventListener("wheel",this._wheelPanning),this.el.nativeElement.addEventListener("mousedown",this._startDraggingZoomContainer),this.el.nativeElement.addEventListener("mouseup",this._stopDraggingZoomContainer),this.el.nativeElement.addEventListener("mousemove",this._dragZoomContainer)})}ngAfterViewInit(){this.createArrows()}ngAfterContentInit(){this.children.changes.pipe(kr(this.children)).subscribe(r=>{this.flow.update(this.children.map(i=>i.position)),this.arrangeChildren(),this.createArrows()}),requestAnimationFrame(()=>this.updateArrows())}updateChildDragging(r=!0){this.flow.enableChildDragging.next(r)}updateZooming(r=!0){this.flow.enableZooming.next(r)}updateDirection(r){this.flow.direction=r,this.arrangeChildren(),this.createArrows()}updateArrowFn(r){this.flow.arrowFn=r,this.createArrows()}setZoom1(r,i,o){let{left:s,top:a}=this.flow.zRect,{scale:l,panX:c,panY:u}=this._setZoom(r-s,i-a,o,this.flow.panX,this.flow.panY,this.flow.scale);this.flow.scale=l,this.flow.panX=c,this.flow.panY=u,this.updateZoomContainer()}_setZoom(r,i,o,s,a,l){let c=cT*l,u=l+o*c,d=r+(s-r)*u/l,f=i+(a-i)*u/l;return{scale:u,panX:d,panY:f}}fitToWindow(){let r=new Ha(this.list,this.zoomContainer.nativeElement.getBoundingClientRect(),this.flow.scale,this.flow.panX,this.flow.panY),{scale:i,panX:o,panY:s}=r.fitToWindow();this.flow.scale=i,this.flow.panX=o,this.flow.panY=s,this.updateZoomContainer()}updateZoomContainer(){this.zoomContainer.nativeElement.style.transform=`translate3d(${this.flow.panX}px, ${this.flow.panY}px, 0) scale(${this.flow.scale})`}arrangeChildren(){let i=new Ba(this.list,this.flow.direction,this.flow.horizontalPadding,this.flow.verticalPadding,this.flow.groupPadding).autoArrange();this.flow.update([...i.values()]),this.flow.layoutUpdated.next()}get list(){return this.children.toArray().map(r=>{let i=r.el.nativeElement.getBoundingClientRect(),o=i.width/this.flow.scale,s=i.height/this.flow.scale,a={x:i.x,y:i.y,bottom:i.bottom,left:i.left,right:i.right,top:i.top,width:o,height:s};return{position:r.position,elRect:a,dots:r.dots.map(l=>l.nativeElement.getBoundingClientRect())}})}createArrows(){if(!this.g)return;this.flow.arrows=[];let r=this.g.nativeElement;for(;r.firstChild;)r.removeChild(r.firstChild);this.list.forEach(i=>{i.position.deps.forEach(o=>{let s=this.list.find(a=>a.position.id===o);if(s){let a={d:`M${i.position.x},${i.position.y} L${s.position.x},${s.position.y}`,deps:[i.position.id,s.position.id],startDot:0,endDot:0,id:`arrow${i.position.id}-to-${s.position.id}`},l=document.createElementNS("http://www.w3.org/2000/svg","path");l.setAttribute("d",a.d),l.setAttribute("id",a.id),l.setAttribute("stroke","var(--flow-path-color)"),l.setAttribute("stroke-width","2"),l.setAttribute("fill","none"),l.setAttribute("marker-end","url(#arrowhead)"),r.appendChild(l),this.flow.arrows.push(a)}})}),this.updateArrows()}positionChange(r){let i=this.list.find(o=>o.position.id===r.id);i&&(i.position.x=r.x,i.position.y=r.y,this.updateArrows())}updateArrows(r){let i=this.g.nativeElement,o=this.getChildInfo();this.flow.connections=new $a(this.list,this.flow.direction),this.flow.arrows.forEach(s=>{let[a,l]=s.deps,c=o[a],u=o[l];if(c&&u){let[d,f]=this.getClosestDots(u,a),h=this.getDotByIndex(o,c.position,f,this.flow.scale,this.flow.panX,this.flow.panY),p=this.getDotByIndex(o,u.position,d,this.flow.scale,this.flow.panX,this.flow.panY);s.d=this.flow.arrowFn(p,h,this.flow.config.ArrowSize,2)}this.flow.arrows.forEach(d=>{let f=i.querySelector(`#${d.id}`);f&&f.setAttribute("d",d.d)})}),this.flow.connections.updateDotVisibility(this.oldChildObj())}oldChildObj(){return this.children.toArray().reduce((r,i)=>(r[i.position.id]=i,r),{})}getChildInfo(){return this.list.reduce((r,i)=>(r[i.position.id]=i,r),{})}getDotByIndex(r,i,o,s,a,l){let u=r[i.id].dots;if(o<0||o>=u.length)throw new Error(`Invalid dot index: ${o}`);let d=u[o],{left:f,top:h}=this.flow.zRect,p=(d.x+d.width/2-a-f)/s,m=(d.y+d.height/2-l-h)/s;return F(g({},i),{x:p,y:m,dotIndex:o})}getClosestDots(r,i){return this.flow.connections.getClosestDotsSimplified(r,i)}ngOnDestroy(){this.el.nativeElement.removeEventListener("wheel",this.zoomHandle)}};e.\u0275fac=function(i){return new(i||e)(I(me),I(ui),I(Q))},e.\u0275cmp=ke({type:e,selectors:[["ngu-flow"]],contentQueries:function(i,o,s){if(i&1&&da(s,di,4),i&2){let a;xe(a=Ie())&&(o.children=a)}},viewQuery:function(i,o){if(i&1&&(Ye(iT,5),Ye(oT,5),Ye(sT,5),Ye(aT,5)),i&2){let s;xe(s=Ie())&&(o.zoomContainer=s.first),xe(s=Ie())&&(o.svg=s.first),xe(s=Ie())&&(o.g=s.first),xe(s=Ie())&&(o.guideLines=s.first)}},standalone:!0,features:[bn([ui]),Re],ngContentSelectors:lT,decls:10,vars:0,consts:[[1,"zoom-container"],["zoomContainer",""],["svg",""],["id","arrowhead","markerWidth","10","markerHeight","7","refX","0","refY","3.5","orient","auto"],["points","0 0, 10 3.5, 0 7"],["g",""]],template:function(i,o){i&1&&(ca(),z(0,"div",0,1),Zi(),z(2,"svg",null,2)(4,"defs")(5,"marker",3),ge(6,"polygon",4),H()(),ge(7,"g",null,5),H(),ua(9),H())},styles:["[_nghost-%COMP%]{--dot-size: 10px;--flow-dot-color: red;--flow-path-color: blue;--grid-size: 20px;display:block;height:100%;width:100%;position:relative;overflow:hidden}.flow-pattern[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0}.zoom-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;width:100%;transform-origin:0 0}svg[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;overflow:visible}#arrowhead[_ngcontent-%COMP%]   polygon[_ngcontent-%COMP%]{fill:var(--flow-path-color)}"],changeDetection:0});let t=e;return t})();var dv=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(I(Et),I(me))},e.\u0275dir=Oe({type:e});let t=e;return t})(),Ga=(()=>{let e=class e extends dv{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Jn(e)))(o||e)}})(),e.\u0275dir=Oe({type:e,features:[Qt]});let t=e;return t})(),Io=new N("NgValueAccessor");var uT={provide:Io,useExisting:fn(()=>qa),multi:!0};function dT(){let t=Xt()?Xt().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var fT=new N("CompositionEventMode"),qa=(()=>{let e=class e extends dv{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!dT())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(I(Et),I(me),I(fT,8))},e.\u0275dir=Oe({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&oe("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[bn([uT]),Qt]});let t=e;return t})();var hT=new N("NgValidators"),pT=new N("NgAsyncValidators");function fv(t){return t!=null}function hv(t){return Xn(t)?ie(t):t}function pv(t){let e={};return t.forEach(n=>{e=n!=null?g(g({},e),n):e}),Object.keys(e).length===0?null:e}function mv(t,e){return e.map(n=>n(t))}function mT(t){return!t.validate}function gv(t){return t.map(e=>mT(e)?e:n=>e.validate(n))}function gT(t){if(!t)return null;let e=t.filter(fv);return e.length==0?null:function(n){return pv(mv(n,e))}}function yv(t){return t!=null?gT(gv(t)):null}function yT(t){if(!t)return null;let e=t.filter(fv);return e.length==0?null:function(n){let r=mv(n,e).map(hv);return Gl(r).pipe($(pv))}}function vv(t){return t!=null?yT(gv(t)):null}function iv(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Dv(t){return t._rawValidators}function Cv(t){return t._rawAsyncValidators}function qd(t){return t?Array.isArray(t)?t:[t]:[]}function za(t,e){return Array.isArray(t)?t.includes(e):t===e}function ov(t,e){let n=qd(e);return qd(t).forEach(i=>{za(n,i)||n.push(i)}),n}function sv(t,e){return qd(e).filter(n=>!za(t,n))}var Yd=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=yv(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=vv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}};var pi=class extends Yd{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Kd=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},vT={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Sj=F(g({},vT),{"[class.ng-submitted]":"isSubmitted"}),wv=(()=>{let e=class e extends Kd{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(I(pi,2))},e.\u0275dir=Oe({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&$u("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[Qt]});let t=e;return t})();var So="VALID",Ua="INVALID",hi="PENDING",xo="DISABLED";function DT(t){return(Ya(t)?t.validators:t)||null}function CT(t){return Array.isArray(t)?yv(t):t||null}function wT(t,e){return(Ya(e)?e.asyncValidators:t)||null}function bT(t){return Array.isArray(t)?vv(t):t||null}function Ya(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var Zd=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===So}get invalid(){return this.status===Ua}get pending(){return this.status==hi}get disabled(){return this.status===xo}get enabled(){return this.status!==xo}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(ov(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ov(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(sv(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(sv(e,this._rawAsyncValidators))}hasValidator(e){return za(this._rawValidators,e)}hasAsyncValidator(e){return za(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=hi,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=xo,this.errors=null,this._forEachChild(r=>{r.disable(F(g({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(F(g({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=So,this._forEachChild(r=>{r.enable(F(g({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(F(g({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===So||this.status===hi)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xo:So}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=hi,this._hasOwnPendingAsyncValidator=!0;let n=hv(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new be,this.statusChanges=new be}_calculateStatus(){return this._allControlsDisabled()?xo:this.errors?Ua:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(hi)?hi:this._anyControlsHaveStatus(Ua)?Ua:So}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ya(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=CT(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=bT(this._rawAsyncValidators)}};var Jd=new N("CallSetDisabledState",{providedIn:"root",factory:()=>Ka}),Ka="always";function ET(t,e,n=Ka){ST(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),IT(t,e),AT(t,e),TT(t,e),MT(t,e)}function av(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),xT(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Wa(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function MT(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function ST(t,e){let n=Dv(t);e.validator!==null?t.setValidators(iv(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=Cv(t);e.asyncValidator!==null?t.setAsyncValidators(iv(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();Wa(e._rawValidators,i),Wa(e._rawAsyncValidators,i)}function xT(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=Dv(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(n=!0,t.setValidators(o))}}if(e.asyncValidator!==null){let i=Cv(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(n=!0,t.setAsyncValidators(o))}}}let r=()=>{};return Wa(e._rawValidators,r),Wa(e._rawAsyncValidators,r),n}function IT(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&bv(t,e)})}function TT(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&bv(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function bv(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function AT(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function _T(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function NT(t){return Object.getPrototypeOf(t.constructor)===Ga}function kT(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===qa?n=o:NT(o)?r=o:i=o}),i||r||n||null}function lv(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function cv(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Qd=class extends Zd{constructor(e=null,n,r){super(DT(n),wT(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ya(n)&&(n.nonNullable||n.initialValueIsDefault)&&(cv(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){lv(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){lv(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){cv(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var OT={provide:Io,useExisting:fn(()=>Xd),multi:!0};var Ev=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=pn({type:e}),e.\u0275inj=hn({});let t=e;return t})(),RT=(()=>{let e=class e{constructor(){this._accessors=[]}add(r,i){this._accessors.push([r,i])}remove(r){for(let i=this._accessors.length-1;i>=0;--i)if(this._accessors[i][1]===r){this._accessors.splice(i,1);return}}select(r){this._accessors.forEach(i=>{this._isSameGroup(i,r)&&i[1]!==r&&i[1].fireUncheck(r.value)})}_isSameGroup(r,i){return r[0].control?r[0]._parent===i._control._parent&&r[1].name===i.name:!1}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:Ev});let t=e;return t})(),Xd=(()=>{let e=class e extends Ga{constructor(r,i,o,s){super(r,i),this._registry=o,this._injector=s,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=D(Jd,{optional:!0})??Ka}ngOnInit(){this._control=this._injector.get(pi),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(r){this._state=r===this.value,this.setProperty("checked",this._state)}registerOnChange(r){this._fn=r,this.onChange=()=>{r(this.value),this._registry.select(this)}}setDisabledState(r){(this.setDisabledStateFired||r||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",r),this.setDisabledStateFired=!0}fireUncheck(r){this.writeValue(r)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}};e.\u0275fac=function(i){return new(i||e)(I(Et),I(me),I(RT),I(Pt))},e.\u0275dir=Oe({type:e,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(i,o){i&1&&oe("change",function(){return o.onChange()})("blur",function(){return o.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[bn([OT]),Qt]});let t=e;return t})();var Mv=new N("NgModelWithFormControlWarning"),PT={provide:pi,useExisting:fn(()=>ef)},ef=(()=>{let e=class e extends pi{set isDisabled(r){}constructor(r,i,o,s,a){super(),this._ngModelWarningConfig=s,this.callSetDisabledState=a,this.update=new be,this._ngModelWarningSent=!1,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=kT(this,o)}ngOnChanges(r){if(this._isControlChanged(r)){let i=r.form.previousValue;i&&av(i,this,!1),ET(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}_T(r,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&av(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_isControlChanged(r){return r.hasOwnProperty("form")}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(I(hT,10),I(pT,10),I(Io,10),I(Mv,8),I(Jd,8))},e.\u0275dir=Oe({type:e,selectors:[["","formControl",""]],inputs:{form:[Ee.None,"formControl","form"],isDisabled:[Ee.None,"disabled","isDisabled"],model:[Ee.None,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[bn([PT]),Qt,Rt]});let t=e;return t})();var FT={provide:Io,useExisting:fn(()=>Za),multi:!0};function Sv(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function LT(t){return t.split(":")[0]}var Za=(()=>{let e=class e extends Ga{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i=this._getOptionId(r),o=Sv(i,r);this.setProperty("value",o)}registerOnChange(r){this.onChange=i=>{this.value=this._getOptionValue(i),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),r))return i;return null}_getOptionValue(r){let i=LT(r);return this._optionMap.has(i)?this._optionMap.get(i):r}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Jn(e)))(o||e)}})(),e.\u0275dir=Oe({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,o){i&1&&oe("change",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[bn([FT]),Qt]});let t=e;return t})(),xv=(()=>{let e=class e{constructor(r,i,o){this._element=r,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(r){this._select!=null&&(this._select._optionMap.set(this.id,r),this._setElementValue(Sv(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(I(me),I(Et),I(Za,9))},e.\u0275dir=Oe({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})(),VT={provide:Io,useExisting:fn(()=>Iv),multi:!0};function uv(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function jT(t){return t.split(":")[0]}var Iv=(()=>{let e=class e extends Ga{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i;if(Array.isArray(r)){let o=r.map(s=>this._getOptionId(s));i=(s,a)=>{s._setSelected(o.indexOf(a.toString())>-1)}}else i=(o,s)=>{o._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(r){this.onChange=i=>{let o=[],s=i.selectedOptions;if(s!==void 0){let a=s;for(let l=0;l<a.length;l++){let c=a[l],u=this._getOptionValue(c.value);o.push(u)}}else{let a=i.options;for(let l=0;l<a.length;l++){let c=a[l];if(c.selected){let u=this._getOptionValue(c.value);o.push(u)}}}this.value=o,r(o)}}_registerOption(r){let i=(this._idCounter++).toString();return this._optionMap.set(i,r),i}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,r))return i;return null}_getOptionValue(r){let i=jT(r);return this._optionMap.has(i)?this._optionMap.get(i)._value:r}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Jn(e)))(o||e)}})(),e.\u0275dir=Oe({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,o){i&1&&oe("change",function(a){return o.onChange(a.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[bn([VT]),Qt]});let t=e;return t})(),Tv=(()=>{let e=class e{constructor(r,i,o){this._element=r,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){this._select!=null&&(this._value=r,this._setElementValue(uv(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue(uv(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(I(me),I(Et),I(Iv,9))},e.\u0275dir=Oe({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})();var BT=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=pn({type:e}),e.\u0275inj=hn({imports:[Ev]});let t=e;return t})();var Av=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:Mv,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:Jd,useValue:r.callSetDisabledState??Ka}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=pn({type:e}),e.\u0275inj=hn({imports:[BT]});let t=e;return t})();function Pv(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),o=e.child(r);if(i==o){n+=i.nodeSize;continue}if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let s=0;i.text[s]==o.text[s];s++)n++;return n}if(i.content.size||o.content.size){let s=Pv(i.content,o.content,n+1);if(s!=null)return s}n+=i.nodeSize}}function Fv(t,e,n,r){for(let i=t.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:n,b:r};let s=t.child(--i),a=e.child(--o),l=s.nodeSize;if(s==a){n-=l,r-=l;continue}if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){let c=0,u=Math.min(s.text.length,a.text.length);for(;c<u&&s.text[s.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){let c=Fv(s.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}var C=class t{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,o){for(let s=0,a=0;a<n;s++){let l=this.content[s],c=a+l.nodeSize;if(c>e&&r(l,i+a,o||null,s)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let o="",s=!0;return this.nodesBetween(e,n,(a,l)=>{a.isText?(o+=a.text.slice(Math.max(e,l)-l,n-l),s=!r):a.isLeaf?(i?o+=typeof i=="function"?i(a):i:a.type.spec.leafText&&(o+=a.type.spec.leafText(a)),s=!r):!s&&a.isBlock&&(o+=r,s=!0)},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new t(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let o=0,s=0;s<n;o++){let a=this.content[o],l=s+a.nodeSize;l>e&&((s<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-s),Math.min(a.text.length,n-s)):a=a.cut(Math.max(0,e-s-1),Math.min(a.content.size,n-s-1))),r.push(a),i+=a.nodeSize),s=l}return new t(r,i)}cutByIndex(e,n){return e==n?t.empty:e==0&&n==this.content.length?this:new t(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new t(i,o)}addToStart(e){return new t([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new t(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return Pv(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return Fv(this,e,n,r)}findIndex(e,n=-1){if(e==0)return Ja(0,e);if(e==this.size)return Ja(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let o=this.child(r),s=i+o.nodeSize;if(s>=e)return s==e||n>0?Ja(r+1,s):Ja(r,i);i=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return t.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new t(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return t.empty;let n,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(n||(n=e.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new t(n||e,r)}static from(e){if(!e)return t.empty;if(e instanceof t)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new t([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};C.empty=new C([],0);var tf={index:0,offset:0};function Ja(t,e){return tf.index=t,tf.offset=e,tf}function Qa(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Qa(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Qa(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}var Ce=(()=>{class t{constructor(n,r){this.type=n,this.attrs=r}addToSet(n){let r,i=!1;for(let o=0;o<n.length;o++){let s=n[o];if(this.eq(s))return n;if(this.type.excludes(s.type))r||(r=n.slice(0,o));else{if(s.type.excludes(this.type))return n;!i&&s.type.rank>this.type.rank&&(r||(r=n.slice(0,o)),r.push(this),i=!0),r&&r.push(s)}}return r||(r=n.slice()),i||r.push(this),r}removeFromSet(n){for(let r=0;r<n.length;r++)if(this.eq(n[r]))return n.slice(0,r).concat(n.slice(r+1));return n}isInSet(n){for(let r=0;r<n.length;r++)if(this.eq(n[r]))return!0;return!1}eq(n){return this==n||this.type==n.type&&Qa(this.attrs,n.attrs)}toJSON(){let n={type:this.type.name};for(let r in this.attrs){n.attrs=this.attrs;break}return n}static fromJSON(n,r){if(!r)throw new RangeError("Invalid input for Mark.fromJSON");let i=n.marks[r.type];if(!i)throw new RangeError(`There is no mark type ${r.type} in this schema`);return i.create(r.attrs)}static sameSet(n,r){if(n==r)return!0;if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++)if(!n[i].eq(r[i]))return!1;return!0}static setFrom(n){if(!n||Array.isArray(n)&&n.length==0)return t.none;if(n instanceof t)return[n];let r=n.slice();return r.sort((i,o)=>i.type.rank-o.type.rank),r}}return t.none=[],t})(),lr=class extends Error{},w=class t{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=Vv(this.content,e+this.openStart,n);return r&&new t(r,this.openStart,this.openEnd)}removeBetween(e,n){return new t(Lv(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return t.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new t(C.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)i++;return new t(e,r,i)}};w.empty=new w(C.empty,0,0);function Lv(t,e,n){let{index:r,offset:i}=t.findIndex(e),o=t.maybeChild(r),{index:s,offset:a}=t.findIndex(n);if(i==e||o.isText){if(a!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(Lv(o.content,e-i-1,n-i-1)))}function Vv(t,e,n,r){let{index:i,offset:o}=t.findIndex(e),s=t.maybeChild(i);if(o==e||s.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=Vv(s.content,e-o-1,n);return a&&t.replaceChild(i,s.copy(a))}function HT(t,e,n){if(n.openStart>t.depth)throw new lr("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new lr("Inconsistent open depths");return jv(t,e,n,0)}function jv(t,e,n,r){let i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let s=jv(t,e,n,r+1);return o.copy(o.content.replaceChild(i,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let s=t.parent,a=s.content;return ar(s,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:s,end:a}=UT(n,t);return ar(o,$v(t,s,a,e,r))}else return ar(o,Xa(t,e,r))}function Bv(t,e){if(!e.type.compatibleContent(t.type))throw new lr("Cannot join "+e.type.name+" onto "+t.type.name)}function sf(t,e,n){let r=t.node(n);return Bv(r,e.node(n)),r}function sr(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function To(t,e,n,r){let i=(e||t).node(n),o=0,s=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(sr(t.nodeAfter,r),o++));for(let a=o;a<s;a++)sr(i.child(a),r);e&&e.depth==n&&e.textOffset&&sr(e.nodeBefore,r)}function ar(t,e){return t.type.checkContent(e),t.copy(e)}function $v(t,e,n,r,i){let o=t.depth>i&&sf(t,e,i+1),s=r.depth>i&&sf(n,r,i+1),a=[];return To(null,t,i,a),o&&s&&e.index(i)==n.index(i)?(Bv(o,s),sr(ar(o,$v(t,e,n,r,i+1)),a)):(o&&sr(ar(o,Xa(t,e,i+1)),a),To(e,n,i,a),s&&sr(ar(s,Xa(n,r,i+1)),a)),To(r,null,i,a),new C(a)}function Xa(t,e,n){let r=[];if(To(null,t,n,r),t.depth>n){let i=sf(t,e,n+1);sr(ar(i,Xa(t,e,n+1)),r)}return To(e,null,n,r),new C(r)}function UT(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)i=e.node(o).copy(C.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}var el=class t{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Ce.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let a=r;r=i,i=a}let o=r.marks;for(var s=0;s<o.length;s++)o[s].type.spec.inclusive===!1&&(!i||!o[s].isInSet(i.marks))&&(o=o[s--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new cr(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,o=n;for(let s=e;;){let{index:a,offset:l}=s.content.findIndex(o),c=o-l;if(r.push(s,a,i+l),!c||(s=s.child(a),s.isText))break;o=c-1,i+=l+1}return new t(n,r,o)}static resolveCached(e,n){for(let i=0;i<nf.length;i++){let o=nf[i];if(o.pos==n&&o.doc==e)return o}let r=nf[rf]=t.resolve(e,n);return rf=(rf+1)%zT,r}},nf=[],rf=0,zT=12,cr=class{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}},WT=Object.create(null),_o=class t{constructor(e,n,r,i=Ce.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||C.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Qa(this.attrs,n||e.defaultAttrs||WT)&&Ce.sameSet(this.marks,r||Ce.none)}copy(e=null){return e==this.content?this:new t(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new t(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return w.empty;let i=this.resolve(e),o=this.resolve(n),s=r?0:i.sharedDepth(n),a=i.start(s),c=i.node(s).content.cut(i.pos-a,o.pos-a);return new w(c,i.depth-s,o.depth-s)}replace(e,n,r){return HT(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return el.resolveCached(this,e)}resolveNoCache(e){return el.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),GT(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=C.empty,i=0,o=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,i,o),a=s&&s.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=i;l<o;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),s=o&&o.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=Ce.none;for(let n=0;n<this.marks.length;n++)e=this.marks[n].addToSet(e);if(!Ce.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r=null;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=C.fromJSON(e,n.content);return e.nodeType(n.type).create(n.attrs,i,r)}};_o.prototype.text=void 0;function GT(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}var No=class t{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new af(e,n);if(r.next==null)return t.empty;let i=Hv(r);r.next&&r.err("Unexpected trailing text");let o=XT(QT(i));return eA(o,r),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let o=n;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function o(s,a){let l=s.matchFragment(e,r);if(l&&(!n||l.validEnd))return C.from(a.map(c=>c.createAndFill()));for(let c=0;c<s.next.length;c++){let{type:u,next:d}=s.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let f=o(d,a.concat(u));if(f)return f}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let s=[];for(let a=i;a.type;a=a.via)s.push(a.type);return s.reverse()}for(let s=0;s<o.next.length;s++){let{type:a,next:l}=o.next[s];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)o+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return o}).join(`
`)}};No.empty=new No(!0);var af=class{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}};function Hv(t){let e=[];do e.push(qT(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function qT(t){let e=[];do e.push(YT(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function YT(t){let e=JT(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=KT(t,e);else break;return e}function _v(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function KT(t,e){let n=_v(t),r=n;return t.eat(",")&&(t.next!="}"?r=_v(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function ZT(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let o in n){let s=n[o];s.groups.indexOf(e)>-1&&i.push(s)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function JT(t){if(t.eat("(")){let e=Hv(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=ZT(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function QT(t){let e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(s,a,l){let c={term:l,to:a};return e[s].push(c),c}function i(s,a){s.forEach(l=>l.to=a)}function o(s,a){if(s.type=="choice")return s.exprs.reduce((l,c)=>l.concat(o(c,a)),[]);if(s.type=="seq")for(let l=0;;l++){let c=o(s.exprs[l],a);if(l==s.exprs.length-1)return c;i(c,a=n())}else if(s.type=="star"){let l=n();return r(a,l),i(o(s.expr,l),l),[r(l)]}else if(s.type=="plus"){let l=n();return i(o(s.expr,a),l),i(o(s.expr,l),l),[r(l)]}else{if(s.type=="opt")return[r(a)].concat(o(s.expr,a));if(s.type=="range"){let l=a;for(let c=0;c<s.min;c++){let u=n();i(o(s.expr,l),u),l=u}if(s.max==-1)i(o(s.expr,l),l);else for(let c=s.min;c<s.max;c++){let u=n();r(l,u),i(o(s.expr,l),u),l=u}return[r(l)]}else{if(s.type=="name")return[r(a,void 0,s.value)];throw new Error("Unknown expr type")}}}}function Uv(t,e){return e-t}function Nv(t,e){let n=[];return r(e),n.sort(Uv);function r(i){let o=t[i];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(i);for(let s=0;s<o.length;s++){let{term:a,to:l}=o[s];!a&&n.indexOf(l)==-1&&r(l)}}}function XT(t){let e=Object.create(null);return n(Nv(t,0));function n(r){let i=[];r.forEach(s=>{t[s].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<i.length;u++)i[u][0]==a&&(c=i[u][1]);Nv(t,l).forEach(u=>{c||i.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let o=e[r.join(",")]=new No(r.indexOf(t.length-1)>-1);for(let s=0;s<i.length;s++){let a=i[s][1].sort(Uv);o.next.push({type:i[s][0],next:e[a.join(",")]||n(a)})}return o}}function eA(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],o=!i.validEnd,s=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];s.push(l.name),o&&!(l.isText||l.hasRequiredAttrs())&&(o=!1),r.indexOf(c)==-1&&r.push(c)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}var gi=class t{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[],n.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,n={}){let r=new rl(this,n,!1);return r.addAll(e,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new rl(this,n,!0);return r.addAll(e,n.from,n.to),w.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(rA(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let s=o.getAttrs(e);if(s===!1)continue;o.attrs=s||void 0}return o}}}matchStyle(e,n,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let s=this.styles[o],a=s.style;if(!(a.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(s.getAttrs){let l=s.getAttrs(n);if(l===!1)continue;s.attrs=l||void 0}return s}}}static schemaRules(e){let n=[];function r(i){let o=i.priority==null?50:i.priority,s=0;for(;s<n.length;s++){let a=n[s];if((a.priority==null?50:a.priority)<o)break}n.splice(s,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(s=>{r(s=Ov(s)),s.mark||s.ignore||s.clearMark||(s.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(s=>{r(s=Ov(s)),s.node||s.ignore||s.mark||(s.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new t(e,t.schemaRules(e)))}},zv={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},tA={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Wv={ol:!0,ul:!0},tl=1,nl=2,Ao=4;function kv(t,e,n){return e!=null?(e?tl:0)|(e==="full"?nl:0):t&&t.whitespace=="pre"?tl|nl:n&~Ao}var mi=class{constructor(e,n,r,i,o,s,a){this.type=e,this.attrs=n,this.marks=r,this.pendingMarks=i,this.solid=o,this.options=a,this.content=[],this.activeMarks=Ce.none,this.stashMarks=[],this.match=s||(a&Ao?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(C.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&tl)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let n=C.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(C.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}popFromStashMark(e){for(let n=this.stashMarks.length-1;n>=0;n--)if(e.eq(this.stashMarks[n]))return this.stashMarks.splice(n,1)[0]}applyPending(e){for(let n=0,r=this.pendingMarks;n<r.length;n++){let i=r[n];(this.type?this.type.allowsMarkType(i.type):oA(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!zv.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}},rl=class{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0;let i=n.topNode,o,s=kv(null,n.preserveWhitespace,0)|(r?Ao:0);i?o=new mi(i.type,i.attrs,Ce.none,Ce.none,!0,n.topMatch||i.type.contentMatch,s):r?o=new mi(null,null,Ce.none,Ce.none,!0,null,s):o=new mi(e.schema.topNodeType,null,Ce.none,Ce.none,!0,null,s),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,n){let r=e.getAttribute("style");if(!r)return n();let i=this.readStyles(iA(r));if(!i)return;let[o,s]=i,a=this.top;for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l]);n();for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l])}addTextNode(e){let n=e.nodeValue,r=this.top;if(r.options&nl||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(r.options&tl)r.options&nl?n=n.replace(/\r\n?/g,`
`):n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],o=e.previousSibling;(!i||o&&o.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n)),this.findInText(e)}else this.findInside(e)}addElement(e,n){let r=e.nodeName.toLowerCase(),i;Wv.hasOwnProperty(r)&&this.parser.normalizeLists&&nA(e);let o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,n));if(o?o.ignore:tA.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);let s,a=this.top,l=this.needsBlock;if(zv.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),s=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}o&&o.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),s&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,o,o.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let n=Ce.none,r=Ce.none;for(let i=0;i<e.length;i+=2)for(let o=void 0;;){let s=this.parser.matchStyle(e[i],e[i+1],this,o);if(!s)break;if(s.ignore)return null;if(s.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{s.clearMark(a)&&(r=a.addToSet(r))}):n=this.parser.schema.marks[s.mark].create(s.attrs).addToSet(n),s.consuming===!1)o=s;else break}return[n,r]}addElementByRule(e,n,r){let i,o,s;n.node?(o=this.parser.schema.nodes[n.node],o.isLeaf?this.insertNode(o.create(n.attrs))||this.leafFallback(e):i=this.enter(o,n.attrs||null,n.preserveWhitespace)):(s=this.parser.schema.marks[n.mark].create(n.attrs),this.addPendingMark(s));let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,s&&this.removePendingMark(s,a)}addAll(e,n,r){let i=n||0;for(let o=n?e.childNodes[n]:e.firstChild,s=r==null?null:e.childNodes[r];o!=s;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o);this.findAtPoint(e,i)}findPlace(e){let n,r;for(let i=this.open;i>=0;i--){let o=this.nodes[i],s=o.findWrapping(e);if(s&&(!n||n.length>s.length)&&(n=s,r=o,!s.length)||o.solid)break}if(!n)return!1;this.sync(r);for(let i=0;i<n.length;i++)this.enterInner(n[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let n=this.textblockFromContext();n&&this.enterInner(n)}if(this.findPlace(e)){this.closeExtra();let n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));let r=n.activeMarks;for(let i=0;i<e.marks.length;i++)(!n.type||n.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return n.content.push(e.mark(r)),!0}return!1}enter(e,n,r){let i=this.findPlace(e.create(n));return i&&this.enterInner(e,n,!0,r),i}enterInner(e,n=null,r=!1,i){this.closeExtra();let o=this.top;o.applyPending(e),o.match=o.match&&o.match.matchType(e);let s=kv(e,i,o.options);o.options&Ao&&o.content.length==0&&(s|=Ao),this.nodes.push(new mi(e,n,o.activeMarks,o.pendingMarks,r,null,s)),this.open++}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let n=this.open;n>=0;n--)if(this.nodes[n]==e)return this.open=n,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=o;l--)if(s(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=o?r.node(l-o).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let n=sA(e,this.top.pendingMarks);n&&this.top.stashMarks.push(n),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,n){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let s=i.popFromStashMark(e);s&&i.type&&i.type.allowsMarkType(s.type)&&(i.activeMarks=s.addToSet(i.activeMarks))}if(i==n)break}}};function nA(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Wv.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function rA(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function iA(t){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,n,r=[];for(;n=e.exec(t);)r.push(n[1],n[2].trim());return r}function Ov(t){let e={};for(let n in t)e[n]=t[n];return e}function oA(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let o=[],s=a=>{o.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||o.indexOf(u)<0&&s(u))return!0}};if(s(i.contentMatch))return!0}}function sA(t,e){for(let n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}var yi=class t{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=of(n).createDocumentFragment());let i=r,o=[];return e.forEach(s=>{if(o.length||s.marks.length){let a=0,l=0;for(;a<o.length&&l<s.marks.length;){let c=s.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(o[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<o.length;)i=o.pop()[1];for(;l<s.marks.length;){let c=s.marks[l++],u=this.serializeMark(c,s.isInline,n);u&&(o.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=t.renderSpec(of(n),this.nodes[e.type.name](e));if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&t.renderSpec(of(r),i(e,n))}static renderSpec(e,n,r=null){if(typeof n=="string")return{dom:e.createTextNode(n)};if(n.nodeType!=null)return{dom:n};if(n.dom&&n.dom.nodeType!=null)return n;let i=n[0],o=i.indexOf(" ");o>0&&(r=i.slice(0,o),i=i.slice(o+1));let s,a=r?e.createElementNS(r,i):e.createElement(i),l=n[1],c=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){c=2;for(let u in l)if(l[u]!=null){let d=u.indexOf(" ");d>0?a.setAttributeNS(u.slice(0,d),u.slice(d+1),l[u]):a.setAttribute(u,l[u])}}for(let u=c;u<n.length;u++){let d=n[u];if(d===0){if(u<n.length-1||u>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:f,contentDOM:h}=t.renderSpec(e,d,r);if(a.appendChild(f),h){if(s)throw new RangeError("Multiple content holes");s=h}}}return{dom:a,contentDOM:s}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new t(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=Rv(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return Rv(e.marks)}};function Rv(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function of(t){return t.document||window.document}var Yv=65535,Kv=Math.pow(2,16);function aA(t,e){return t+e*Kv}function Gv(t){return t&Yv}function lA(t){return(t-(t&Yv))/Kv}var Zv=1,Jv=2,il=4,Qv=8,Ro=class{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&Qv)>0}get deletedBefore(){return(this.delInfo&(Zv|il))>0}get deletedAfter(){return(this.delInfo&(Jv|il))>0}get deletedAcross(){return(this.delInfo&il)>0}},tn=class t{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&t.empty)return t.empty}recover(e){let n=0,r=Gv(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+lA(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+o],u=this.ranges[a+s],d=l+c;if(e<=d){let f=c?e==l?-1:e==d?1:n:n,h=l+i+(f<0?0:u);if(r)return h;let p=e==(n<0?l:d)?null:aA(a/3,e-l),m=e==l?Jv:e==d?Zv:il;return(n<0?e!=l:e!=d)&&(m|=Qv),new Ro(h,m,p)}i+=u-c}return r?e+i:new Ro(e+i,0,null)}touches(e,n){let r=0,i=Gv(n),o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+o],u=l+c;if(e<=u&&a==i*3)return!0;r+=this.ranges[a+s]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],a=s-(this.inverted?o:0),l=s+(this.inverted?0:o),c=this.ranges[i+n],u=this.ranges[i+r];e(a,a+c,l,l+u),o+=u-c}}invert(){return new t(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?t.empty:new t(e<0?[0,-e,0]:[0,0,e])}};tn.empty=new tn([]);var ol=class t{constructor(e=[],n,r=0,i=e.length){this.maps=e,this.mirror=n,this.from=r,this.to=i}slice(e=0,n=this.maps.length){return new t(this.maps,this.mirror,e,n)}copy(){return new t(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,r=this.maps.length;n<e.maps.length;n++){let i=e.getMirror(n);this.appendMap(e.maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this.maps.length+e.maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e.maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new t;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let o=this.from;o<this.to;o++){let s=this.maps[o],a=s.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(o);if(l!=null&&l>o&&l<this.to){o=l,e=this.maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new Ro(e,i,null)}},lf=Object.create(null),we=class{getMap(){return tn.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=lf[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in lf)throw new RangeError("Duplicate use of step JSON ID "+e);return lf[e]=n,n.prototype.jsonID=e,n}},Ae=class t{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new t(e,null)}static fail(e){return new t(null,e)}static fromReplace(e,n,r,i){try{return t.ok(e.replace(n,r,i))}catch(o){if(o instanceof lr)return t.fail(o.message);throw o}}};function mf(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let o=t.child(i);o.content.size&&(o=o.copy(mf(o.content,e,o))),o.isInline&&(o=e(o,n,i)),r.push(o)}return C.fromArray(r)}var sl=class t extends we{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new w(mf(n.content,(s,a)=>!s.isAtom||!a.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),n.openStart,n.openEnd);return Ae.fromReplace(e,this.from,this.to,o)}invert(){return new al(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new t(n.pos,r.pos,this.mark)}merge(e){return e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))}};we.jsonID("addMark",sl);var al=class t extends we{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new w(mf(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return Ae.fromReplace(e,this.from,this.to,r)}invert(){return new sl(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new t(n.pos,r.pos,this.mark)}merge(e){return e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))}};we.jsonID("removeMark",al);var ll=class t extends we{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Ae.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Ae.fromReplace(e,this.pos,this.pos+1,new w(C.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new t(this.pos,n.marks[i]);return new t(this.pos,this.mark)}}return new cl(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new t(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new t(n.pos,e.markFromJSON(n.mark))}};we.jsonID("addNodeMark",ll);var cl=class t extends we{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Ae.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Ae.fromReplace(e,this.pos,this.pos+1,new w(C.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new ll(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new t(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new t(n.pos,e.markFromJSON(n.mark))}};we.jsonID("removeNodeMark",cl);var Vt=class t extends we{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&df(e,this.from,this.to)?Ae.fail("Structure replace would overwrite content"):Ae.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new tn([this.from,this.to-this.from,this.slice.size])}invert(e){return new t(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new t(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof t)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?w.empty:new w(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new t(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?w.empty:new w(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new t(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new t(n.from,n.to,w.fromJSON(e,n.slice),!!n.structure)}};we.jsonID("replace",Vt);var Pe=class t extends we{constructor(e,n,r,i,o,s,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=a}apply(e){if(this.structure&&(df(e,this.from,this.gapFrom)||df(e,this.gapTo,this.to)))return Ae.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Ae.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Ae.fromReplace(e,this.from,this.to,r):Ae.fail("Content does not fit in gap")}getMap(){return new tn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),o=e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||o>r.pos?null:new t(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new t(n.from,n.to,n.gapFrom,n.gapTo,w.fromJSON(e,n.slice),n.insert,!!n.structure)}};we.jsonID("replaceAround",Pe);function df(t,e,n){let r=t.resolve(e),i=n-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function cA(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function nn(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),o=t.$from.index(r),s=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(o,s,n))return r;if(r==0||i.type.spec.isolating||!cA(i,o,s))break}return null}function vi(t,e,n=null,r=t){let i=uA(t,e),o=i&&dA(r,e);return o?i.map(qv).concat({type:e,attrs:n}).concat(o.map(qv)):null}function qv(t){return{type:t,attrs:null}}function uA(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return n.canReplaceWith(r,i,s)?o:null}function dA(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.child(r),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let l=(s.length?s[s.length-1]:e).contentMatch;for(let c=r;l&&c<i;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:s}function mt(t,e,n=1,r){let i=t.resolve(e),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>o;c--,u--){let d=i.node(c),f=i.index(c);if(d.type.spec.isolating)return!1;let h=d.content.cutByIndex(f,d.childCount),p=r&&r[u+1];p&&(h=h.replaceChild(0,p.type.create(p.attrs)));let m=r&&r[u]||d;if(!d.canReplace(f+1,d.childCount)||!m.type.validContent(h))return!1}let a=i.indexAfter(o),l=r&&r[0];return i.node(o).canReplaceWith(a,a,l?l.type:i.node(o+1).type)}function Mt(t,e){let n=t.resolve(e),r=n.index();return Xv(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function Xv(t,e){return!!(t&&e&&!t.isLeaf&&t.canAppend(e))}function Di(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let o,s,a=r.index(i);if(i==r.depth?(o=r.nodeBefore,s=r.nodeAfter):n>0?(o=r.node(i+1),a++,s=r.node(i).maybeChild(a)):(o=r.node(i).maybeChild(a-1),s=r.node(i+1)),o&&!o.isTextblock&&Xv(o,s)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function ul(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let s=r.depth;s>=0;s--){let a=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,l=r.index(s)+(a>0?1:0),c=r.node(s),u=!1;if(o==1)u=c.canReplace(l,l,i);else{let d=c.contentMatchAt(l).findWrapping(i.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?r.pos:a<0?r.before(s+1):r.after(s+1)}return null}function gf(t,e,n=e,r=w.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),o=t.resolve(n);return fA(i,o,r)?new Vt(e,n,r):new ff(i,o,r).fit()}function fA(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}var ff=class{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=C.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=C.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,s=r.depth,a=i.depth;for(;s&&a&&o.childCount==1;)o=o.firstChild.content,s--,a--;let l=new w(o,s,a);return e>-1?new Pe(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new Vt(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=n.firstChild;if(n.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=cf(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let s=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(n==1&&(s?c.matchType(s.type)||(d=c.fillBefore(C.from(s),!1)):o&&l.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:a,parent:o,inject:d};if(n==2&&s&&(u=c.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:a,parent:o,wrap:u};if(o&&c.matchType(o.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=cf(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new w(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=cf(e,n);if(i.childCount<=1&&n>0){let o=e.size-n<=n+i.size;this.unplaced=new w(ko(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new w(ko(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let m=0;m<o.length;m++)this.openFrontierNode(o[m]);let s=this.unplaced,a=r?r.content:s.content,l=s.openStart-e,c=0,u=[],{match:d,type:f}=this.frontier[n];if(i){for(let m=0;m<i.childCount;m++)u.push(i.child(m));d=d.matchFragment(i)}let h=a.size+e-(s.content.size-s.openEnd);for(;c<a.childCount;){let m=a.child(c),v=d.matchType(m.type);if(!v)break;c++,(c>1||l==0||m.content.size)&&(d=v,u.push(e0(m.mark(f.allowedMarks(m.marks)),c==1?l:0,c==a.childCount?h:-1)))}let p=c==a.childCount;p||(h=-1),this.placed=Oo(this.placed,n,C.from(u)),this.frontier[n].match=d,p&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,v=a;m<h;m++){let y=v.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),v=y.content}this.unplaced=p?e==0?w.empty:new w(ko(s.content,e-1,1),e-1,h<0?s.openEnd:e-1):new w(ko(s.content,e,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!uf(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),s=uf(e,n,i,r,o);if(s){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=uf(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:s,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Oo(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Oo(this.placed,this.depth,C.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(C.empty,!0);n.childCount&&(this.placed=Oo(this.placed,this.frontier.length,n))}};function ko(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(ko(t.firstChild.content,e-1,n)))}function Oo(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Oo(t.lastChild.content,e-1,n)))}function cf(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function e0(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,e0(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(C.empty,!0)))),t.copy(r)}function uf(t,e,n,r,i){let o=t.node(e),s=i?t.indexAfter(e):t.index(e);if(s==o.childCount&&!n.compatibleContent(o.type))return null;let a=r.fillBefore(o.content,!0,s);return a&&!hA(n,o.content,s)?a:null}function hA(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}var hf=class t extends we{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Ae.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Ae.fromReplace(e,this.pos,this.pos+1,new w(C.from(i),0,n.isLeaf?0:1))}getMap(){return tn.empty}invert(e){return new t(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new t(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new t(n.pos,n.attr,n.value)}};we.jsonID("attr",hf);var pf=class t extends we{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Ae.ok(r)}getMap(){return tn.empty}invert(e){return new t(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new t(n.attr,n.value)}};we.jsonID("docAttr",pf);var Po=class extends Error{};Po=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Po.prototype=Object.create(Error.prototype);Po.prototype.constructor=Po;Po.prototype.name="TransformError";var yf=Object.create(null),k=class{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new Df(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=w.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let o=e.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:l,$to:c}=s[a],u=e.mapping.slice(o);e.replaceRange(u.map(l.pos),u.map(c.pos),a?w.empty:n),a==0&&r0(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:s,$to:a}=i[o],l=e.mapping.slice(r),c=l.map(s.pos),u=l.map(a.pos);o?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),r0(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new _(e):Ci(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let s=n<0?Ci(e.node(0),e.node(o),e.before(o+1),e.index(o),n,r):Ci(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,r);if(s)return s}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new rt(e.node(0))}static atStart(e){return Ci(e,e,0,0,1)||new rt(e)}static atEnd(e){return Ci(e,e,e.content.size,e.childCount,-1)||new rt(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=yf[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in yf)throw new RangeError("Duplicate use of selection JSON ID "+e);return yf[e]=n,n.prototype.jsonID=e,n}getBookmark(){return _.between(this.$anchor,this.$head).getBookmark()}};k.prototype.visible=!0;var Df=class{constructor(e,n){this.$from=e,this.$to=n}},t0=!1;function n0(t){!t0&&!t.parent.inlineContent&&(t0=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}var _=class t extends k{constructor(e,n=e){n0(e),n0(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return k.near(r);let i=e.resolve(n.map(this.anchor));return new t(i.parent.inlineContent?i:r,r)}replace(e,n=w.empty){if(super.replace(e,n),n==w.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof t&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new dl(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new t(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let o=k.findFrom(n,r,!0)||k.findFrom(n,-r,!0);if(o)n=o.$head;else return k.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(k.findFrom(e,-r,!0)||k.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new t(e,n)}};k.jsonID("text",_);var dl=class t{constructor(e,n){this.anchor=e,this.head=n}map(e){return new t(e.map(this.anchor),e.map(this.head))}resolve(e){return _.between(e.resolve(this.anchor),e.resolve(this.head))}},E=class t extends k{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),o=e.resolve(i);return r?k.near(o):new t(o)}content(){return new w(C.from(this.node),0,0)}eq(e){return e instanceof t&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Cf(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new t(e.resolve(n.anchor))}static create(e,n){return new t(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}};E.prototype.visible=!1;k.jsonID("node",E);var Cf=class t{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new dl(r,r):new t(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&E.isSelectable(r)?new E(n):k.near(n)}},rt=class t extends k{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=w.empty){if(n==w.empty){e.delete(0,e.doc.content.size);let r=k.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new t(e)}map(e){return new t(e)}eq(e){return e instanceof t}getBookmark(){return mA}};k.jsonID("all",rt);var mA={map(){return this},resolve(t){return new rt(t)}};function Ci(t,e,n,r,i,o=!1){if(e.inlineContent)return _.create(t,n);for(let s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){let a=e.child(s);if(a.isAtom){if(!o&&E.isSelectable(a))return E.create(t,n-(i<0?a.nodeSize:0))}else{let l=Ci(t,a,n+i,i<0?a.childCount:0,i,o);if(l)return l}n+=a.nodeSize*i}return null}function r0(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Vt||i instanceof Pe))return;let o=t.mapping.maps[r],s;o.forEach((a,l,c,u)=>{s==null&&(s=u)}),t.setSelection(k.near(t.doc.resolve(s),n))}function i0(t,e){return!e||!t?t:t.bind(e)}var wi=class{constructor(e,n,r){this.name=e,this.init=i0(n.init,r),this.apply=i0(n.apply,r)}},Pj=[new wi("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new wi("selection",{init(t,e){return t.selection||k.atStart(e.doc)},apply(t){return t.selection}}),new wi("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new wi("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];function o0(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=o0(i,e,{})),n[r]=i}return n}var Fe=class{constructor(e){this.spec=e,this.props={},e.props&&o0(e.props,this,this.props),this.key=e.key?e.key.key:s0("plugin")}getState(e){return e[this.key]}},vf=Object.create(null);function s0(t){return t in vf?t+"$"+ ++vf[t]:(vf[t]=0,t+"$")}var it=class{constructor(e="key"){this.key=s0(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}};var hr=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e};var w0=function(t,e,n,r){return n&&(a0(t,e,n,r,-1)||a0(t,e,n,r,1))},gA=/^(img|br|input|textarea|hr)$/i;function a0(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:fl(t))){let o=t.parentNode;if(!o||o.nodeType!=1||Of(t)||gA.test(t.nodeName)||t.contentEditable=="false")return!1;e=hr(t)+(i<0?0:1),t=o}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.contentEditable=="false")return!1;e=i<0?fl(t):0}else return!1}}function fl(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function yA(t,e,n){for(let r=e==0,i=e==fl(t);r||i;){if(t==n)return!0;let o=hr(t);if(t=t.parentNode,!t)return!1;r=r&&o==0,i=i&&o==fl(t)}}function Of(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}var b0=function(t){return t.focusNode&&w0(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function E0(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}var jt=typeof navigator<"u"?navigator:null,l0=typeof document<"u"?document:null,An=jt&&jt.userAgent||"",bf=/Edge\/(\d+)/.exec(An),M0=/MSIE \d/.exec(An),Ef=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(An),Si=!!(M0||Ef||bf),Rf=M0?document.documentMode:Ef?+Ef[1]:bf?+bf[1]:0,yl=!Si&&/gecko\/(\d+)/i.test(An);yl&&+(/Firefox\/(\d+)/.exec(An)||[0,0])[1];var Mf=!Si&&/Chrome\/(\d+)/.exec(An),pr=!!Mf,vA=Mf?+Mf[1]:0,mr=!Si&&!!jt&&/Apple Computer/.test(jt.vendor),Pf=mr&&(/Mobile\/\w+/.test(An)||!!jt&&jt.maxTouchPoints>2),gt=Pf||(jt?/Mac/.test(jt.platform):!1),DA=jt?/Win/.test(jt.platform):!1,jo=/Android \d/.test(An),Ff=!!l0&&"webkitFontSmoothing"in l0.documentElement.style,CA=Ff?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;var S0=function(t){t&&(this.nodeName=t)};S0.prototype=Object.create(null);var Hj=[new S0];function wA(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),o=i&&i.size==0,s=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let a=r.resolve(s),l,c;if(b0(n)){for(l=a;i&&!i.node;)i=i.parent;let u=i.node;if(i&&u.isAtom&&E.isSelectable(u)&&i.parent&&!(u.isInline&&yA(n.focusNode,n.focusOffset,i.dom))){let d=i.posBefore;c=new E(s==d?a:r.resolve(d))}}else{let u=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(u<0)return null;l=r.resolve(u)}if(!c){let u=e=="pointer"||t.state.selection.head<a.pos&&!o?1:-1;c=I0(t,l,a,u)}return c}function x0(t){return t.editable?t.hasFocus():SA(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Lf(t,e=!1){let n=t.state.selection;if(MA(t,n),!!x0(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&pr){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&w0(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)EA(t);else{let{anchor:r,head:i}=n,o,s;c0&&!(n instanceof _)&&(n.$from.parent.inlineContent||(o=u0(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=u0(t,n.to))),t.docView.setSelection(r,i,t.root,e),c0&&(o&&d0(o),s&&d0(s)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&bA(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}var c0=mr||pr&&vA<63;function u0(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(mr&&i&&i.contentEditable=="false")return wf(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return wf(i);if(o)return wf(o)}}function wf(t){return t.contentEditable="true",mr&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function d0(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function bA(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!x0(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function EA(t){let e=t.domSelection(),n=document.createRange(),r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setEnd(r.parentNode,hr(r)+1):n.setEnd(r,0),n.collapse(!1),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&Si&&Rf<=11&&(r.disabled=!0,r.disabled=!1)}function MA(t,e){if(e instanceof E){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(f0(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else f0(t)}function f0(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function I0(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||_.between(e,n,r)}function SA(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function Sf(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),o=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return o&&k.findFrom(o,e)}function xn(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function h0(t,e,n){let r=t.state.selection;if(r instanceof _)if(n.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let s=t.state.doc.resolve(i.pos+o.nodeSize*(e<0?-1:1));return xn(t,new _(r.$anchor,s))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=Sf(t.state,e);return i&&i instanceof E?xn(t,i):!1}else if(!(gt&&n.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,s;if(!o||o.isText)return!1;let a=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(s=t.docView.descAt(a))&&!s.contentDOM?E.isSelectable(o)?xn(t,new E(e<0?t.state.doc.resolve(i.pos-o.nodeSize):i)):Ff?xn(t,new _(t.state.doc.resolve(e<0?a:a+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof E&&r.node.isInline)return xn(t,new _(e>0?r.$to:r.$from));{let i=Sf(t.state,e);return i?xn(t,i):!1}}}function hl(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Fo(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function bi(t,e){return e<0?xA(t):IA(t)}function xA(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,o,s=!1;for(yl&&n.nodeType==1&&r<hl(n)&&Fo(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(Fo(a,-1))i=n,o=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(T0(n))break;{let a=n.previousSibling;for(;a&&Fo(a,-1);)i=n.parentNode,o=hr(a),a=a.previousSibling;if(a)n=a,r=hl(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}s?xf(t,n,r):i&&xf(t,i,o)}function IA(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=hl(n),o,s;for(;;)if(r<i){if(n.nodeType!=1)break;let a=n.childNodes[r];if(Fo(a,1))o=n,s=++r;else break}else{if(T0(n))break;{let a=n.nextSibling;for(;a&&Fo(a,1);)o=a.parentNode,s=hr(a)+1,a=a.nextSibling;if(a)n=a,r=0,i=hl(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}o&&xf(t,o,s)}function T0(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function TA(t,e){for(;t&&e==t.childNodes.length&&!Of(t);)e=hr(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function AA(t,e){for(;t&&!e&&!Of(t);)e=hr(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function xf(t,e,n){if(e.nodeType!=3){let o,s;(s=TA(e,n))?(e=s,n=0):(o=AA(e,n))&&(e=o,n=o.nodeValue.length)}let r=t.domSelection();if(b0(r)){let o=document.createRange();o.setEnd(e,n),o.setStart(e,n),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&Lf(t)},50)}function p0(t,e){let n=t.state.doc.resolve(e);if(!(pr||DA)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let o=t.coordsAtPos(e-1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(e<n.end()){let o=t.coordsAtPos(e+1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function m0(t,e,n){let r=t.state.selection;if(r instanceof _&&!r.empty||n.indexOf("s")>-1||gt&&n.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let s=Sf(t.state,e);if(s&&s instanceof E)return xn(t,s)}if(!i.parent.inlineContent){let s=e<0?i:o,a=r instanceof rt?k.near(s,e):k.findFrom(s,e);return a?xn(t,a):!1}return!1}function g0(t,e){if(!(t.state.selection instanceof _))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let s=t.state.tr;return e<0?s.delete(n.pos-o.nodeSize,n.pos):s.delete(n.pos,n.pos+o.nodeSize),t.dispatch(s),!0}return!1}function y0(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function _A(t){if(!mr||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;y0(t,r,"true"),setTimeout(()=>y0(t,r,"false"),20)}return!1}function NA(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function kA(t,e){let n=e.keyCode,r=NA(e);if(n==8||gt&&n==72&&r=="c")return g0(t,-1)||bi(t,-1);if(n==46&&!e.shiftKey||gt&&n==68&&r=="c")return g0(t,1)||bi(t,1);if(n==13||n==27)return!0;if(n==37||gt&&n==66&&r=="c"){let i=n==37?p0(t,t.state.selection.from)=="ltr"?-1:1:-1;return h0(t,i,r)||bi(t,i)}else if(n==39||gt&&n==70&&r=="c"){let i=n==39?p0(t,t.state.selection.from)=="ltr"?1:-1:1;return h0(t,i,r)||bi(t,i)}else{if(n==38||gt&&n==80&&r=="c")return m0(t,-1,r)||bi(t,-1);if(n==40||gt&&n==78&&r=="c")return _A(t)||m0(t,1,r)||bi(t,1);if(r==(gt?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function A0(t,e){t.someProp("transformCopied",h=>{e=h(e,t)});let n=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let s=t.someProp("clipboardSerializer")||yi.fromSchema(t.state.schema),a=P0(),l=a.createElement("div");l.appendChild(s.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=R0[c.nodeName.toLowerCase()]);){for(let h=u.length-1;h>=0;h--){let p=a.createElement(u[h]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${o}${d?` -${d}`:""} ${JSON.stringify(n)}`);let f=t.someProp("clipboardTextSerializer",h=>h(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f}}function _0(t,e,n,r,i){let o=i.parent.type.spec.code,s,a;if(!n&&!e)return null;let l=e&&(r||o||!n);if(l){if(t.someProp("transformPastedText",f=>{e=f(e,o||r,t)}),o)return e?new w(C.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):w.empty;let d=t.someProp("clipboardTextParser",f=>f(e,i,r,t));if(d)a=d;else{let f=i.marks(),{schema:h}=t.state,p=yi.fromSchema(h);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let v=s.appendChild(document.createElement("p"));m&&v.appendChild(p.serializeNode(h.text(m,f)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),s=PA(n),Ff&&FA(s);let c=s&&s.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let f=s.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;s=f}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||gi.fromSchema(t.state.schema)).parseSlice(s,{preserveWhitespace:!!(l||u),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!OA.test(f.parentNode.nodeName)?{ignore:!0}:null}})),u)a=LA(v0(a,+u[1],+u[2]),u[4]);else if(a=w.maxOpen(RA(a.content,i),!0),a.openStart||a.openEnd){let d=0,f=0;for(let h=a.content.firstChild;d<a.openStart&&!h.type.spec.isolating;d++,h=h.firstChild);for(let h=a.content.lastChild;f<a.openEnd&&!h.type.spec.isolating;f++,h=h.lastChild);a=v0(a,d,f)}return t.someProp("transformPasted",d=>{a=d(a,t)}),a}var OA=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function RA(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),o,s=[];if(t.forEach(a=>{if(!s)return;let l=i.findWrapping(a.type),c;if(!l)return s=null;if(c=s.length&&o.length&&k0(l,o,a,s[s.length-1],0))s[s.length-1]=c;else{s.length&&(s[s.length-1]=O0(s[s.length-1],o.length));let u=N0(a,l);s.push(u),i=i.matchType(u.type),o=l}}),s)return C.from(s)}return t}function N0(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,C.from(t));return t}function k0(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let o=k0(t,e,n,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(C.from(N0(n,t,i+1))))}}function O0(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,O0(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(C.empty,!0);return t.copy(n.append(r))}function If(t,e,n,r,i,o){let s=e<0?t.firstChild:t.lastChild,a=s.content;return t.childCount>1&&(o=0),i<r-1&&(a=If(a,e,n,r,i+1,o)),i>=n&&(a=e<0?s.contentMatchAt(0).fillBefore(a,o<=i).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(C.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(a))}function v0(t,e,n){return e<t.openStart&&(t=new w(If(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new w(If(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}var R0={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},D0=null;function P0(){return D0||(D0=document.implementation.createHTMLDocument("title"))}function PA(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=P0().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&R0[r[1].toLowerCase()])&&(t=i.map(o=>"<"+o+">").join("")+t+i.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=t,i)for(let o=0;o<i.length;o++)n=n.querySelector(i[o])||n;return n}function FA(t){let e=t.querySelectorAll(pr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent=="\xA0"&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function LA(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:o,openEnd:s}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=C.from(l.create(r[a+1],i)),o++,s++}return new w(i,o,s)}var St={},st={};function In(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}st.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!L0(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(jo&&pr&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Pf&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,E0(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||kA(t,n)?n.preventDefault():In(t,"key")};st.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};st.keypress=(t,e)=>{let n=e;if(L0(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||gt&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof _)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode);!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,i))&&t.dispatch(t.state.tr.insertText(i).scrollIntoView()),n.preventDefault()}};function vl(t){return{left:t.clientX,top:t.clientY}}function VA(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Vf(t,e,n,r,i){if(r==-1)return!1;let o=t.state.doc.resolve(r);for(let s=o.depth+1;s>0;s--)if(t.someProp(e,a=>s>o.depth?a(t,n,o.nodeAfter,o.before(s),i,!0):a(t,n,o.node(s),o.before(s),i,!1)))return!0;return!1}function Mi(t,e,n){t.focused||t.focus();let r=t.state.tr.setSelection(e);n=="pointer"&&r.setMeta("pointer",!0),t.dispatch(r)}function jA(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&E.isSelectable(r)?(Mi(t,new E(n),"pointer"),!0):!1}function BA(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof E&&(r=n.node);let o=t.state.doc.resolve(e);for(let s=o.depth+1;s>0;s--){let a=s>o.depth?o.nodeAfter:o.node(s);if(E.isSelectable(a)){r&&n.$from.depth>0&&s>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?i=o.before(n.$from.depth):i=o.before(s);break}}return i!=null?(Mi(t,E.create(t.state.doc,i),"pointer"),!0):!1}function $A(t,e,n,r,i){return Vf(t,"handleClickOn",e,n,r)||t.someProp("handleClick",o=>o(t,e,r))||(i?BA(t,n):jA(t,n))}function HA(t,e,n,r){return Vf(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function UA(t,e,n,r){return Vf(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||zA(t,n,r)}function zA(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Mi(t,_.create(r,0,r.content.size),"pointer"),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let s=o>i.depth?i.nodeAfter:i.node(o),a=i.before(o);if(s.inlineContent)Mi(t,_.create(r,a+1,a+1+s.content.size),"pointer");else if(E.isSelectable(s))Mi(t,E.create(r,a),"pointer");else continue;return!0}}function jf(t){return pl(t)}var F0=gt?"metaKey":"ctrlKey";St.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=jf(t),i=Date.now(),o="singleClick";i-t.input.lastClick.time<500&&VA(n,t.input.lastClick)&&!n[F0]&&(t.input.lastClick.type=="singleClick"?o="doubleClick":t.input.lastClick.type=="doubleClick"&&(o="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o};let s=t.posAtCoords(vl(n));s&&(o=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new Tf(t,s,n,!!r)):(o=="doubleClick"?HA:UA)(t,s.pos,s.inside,n)?n.preventDefault():In(t,"pointer"))};var Tf=class{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[F0],this.allowDefault=r.shiftKey;let o,s;if(n.inside>-1)o=e.state.doc.nodeAt(n.inside),s=n.inside;else{let u=e.state.doc.resolve(n.pos);o=u.parent,s=u.depth?u.before():0}let a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l?l.dom:null;let{selection:c}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||c instanceof E&&c.from<=s&&c.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&yl&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),In(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Lf(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(vl(e))),this.updateAllowDefault(e),this.allowDefault||!n?In(this.view,"pointer"):$A(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||mr&&this.mightDrag&&!this.mightDrag.node.isAtom||pr&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Mi(this.view,k.near(this.view.state.doc.resolve(n.pos)),"pointer"),e.preventDefault()):In(this.view,"pointer")}move(e){this.updateAllowDefault(e),In(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}};St.touchstart=t=>{t.input.lastTouch=Date.now(),jf(t),In(t,"pointer")};St.touchmove=t=>{t.input.lastTouch=Date.now(),In(t,"pointer")};St.contextmenu=t=>jf(t);function L0(t,e){return t.composing?!0:mr&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}var WA=jo?5e3:-1;st.compositionstart=st.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),pl(t,!0),t.markCursor=null;else if(pl(t),yl&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let s=o<0?i.lastChild:i.childNodes[o-1];if(!s)break;if(s.nodeType==3){t.domSelection().collapse(s,s.nodeValue.length);break}else i=s,o=-1}}t.input.composing=!0}V0(t,WA)};st.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,V0(t,20))};function V0(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>pl(t),e))}function GA(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=qA());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function qA(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function pl(t,e=!1){if(!(jo&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),GA(t),e||t.docView&&t.docView.dirty){let n=wA(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):t.updateState(t.state),!0}return!1}}function YA(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}var Lo=Si&&Rf<15||Pf&&CA<604;St.copy=st.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let o=Lo?null:n.clipboardData,s=r.content(),{dom:a,text:l}=A0(t,s);o?(n.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",l)):YA(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function KA(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function ZA(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Af(t,r.value,null,i,e):Af(t,r.textContent,r.innerHTML,i,e)},50)}function Af(t,e,n,r,i){let o=_0(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,o||w.empty)))return!0;if(!o)return!1;let s=KA(o),a=s?t.state.tr.replaceSelectionWith(s,r):t.state.tr.replaceSelection(o);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function j0(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}st.paste=(t,e)=>{let n=e;if(t.composing&&!jo)return;let r=Lo?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Af(t,j0(r),r.getData("text/html"),i,n)?n.preventDefault():ZA(t,n)};var _f=class{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}},B0=gt?"altKey":"ctrlKey";St.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,o=i.empty?null:t.posAtCoords(vl(n)),s;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof E?i.to-1:i.to))){if(r&&r.mightDrag)s=E.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let u=t.docView.nearestDesc(n.target,!0);u&&u.node.type.spec.draggable&&u!=t.docView&&(s=E.create(t.state.doc,u.posBefore))}}let a=(s||t.state.selection).content(),{dom:l,text:c}=A0(t,a);n.dataTransfer.clearData(),n.dataTransfer.setData(Lo?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",Lo||n.dataTransfer.setData("text/plain",c),t.dragging=new _f(a,!n[B0],s)};St.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};st.dragover=st.dragenter=(t,e)=>e.preventDefault();st.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(vl(n));if(!i)return;let o=t.state.doc.resolve(i.pos),s=r&&r.slice;s?t.someProp("transformPasted",p=>{s=p(s,t)}):s=_0(t,j0(n.dataTransfer),Lo?null:n.dataTransfer.getData("text/html"),!1,o);let a=!!(r&&!n[B0]);if(t.someProp("handleDrop",p=>p(t,n,s||w.empty,a))){n.preventDefault();return}if(!s)return;n.preventDefault();let l=s?ul(t.state.doc,o.pos,s):o.pos;l==null&&(l=o.pos);let c=t.state.tr;if(a){let{node:p}=r;p?p.replace(c):c.deleteSelection()}let u=c.mapping.map(l),d=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,f=c.doc;if(d?c.replaceRangeWith(u,u,s.content.firstChild):c.replaceRange(u,u,s),c.doc.eq(f))return;let h=c.doc.resolve(u);if(d&&E.isSelectable(s.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new E(h));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((m,v,y,b)=>p=b),c.setSelection(I0(t,h,c.doc.resolve(p)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};St.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Lf(t)},20))};St.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};St.beforeinput=(t,e)=>{if(pr&&jo&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,E0(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in st)St[t]=st[t];function Vo(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}var ml=class t{constructor(e,n){this.toDOM=e,this.spec=n||dr,this.side=this.spec.side||0}map(e,n,r,i){let{pos:o,deleted:s}=e.mapResult(n.from+i,this.side<0?-1:1);return s?null:new Tn(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof t&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Vo(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}},ur=class t{constructor(e,n){this.attrs=e,this.spec=n||dr}map(e,n,r,i){let o=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,s=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=s?null:new Tn(o,s,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof t&&Vo(this.attrs,e.attrs)&&Vo(this.spec,e.spec)}static is(e){return e.type instanceof t}destroy(){}},Nf=class t{constructor(e,n){this.attrs=e,this.spec=n||dr}map(e,n,r,i){let o=e.mapResult(n.from+i,1);if(o.deleted)return null;let s=e.mapResult(n.to+i,-1);return s.deleted||s.pos<=o.pos?null:new Tn(o.pos-r,s.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),o;return i==n.from&&!(o=e.child(r)).isText&&i+o.nodeSize==n.to}eq(e){return this==e||e instanceof t&&Vo(this.attrs,e.attrs)&&Vo(this.spec,e.spec)}destroy(){}},Tn=class t{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new t(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new t(e,e,new ml(n,r))}static inline(e,n,r,i){return new t(e,n,new ur(r,i))}static node(e,n,r,i){return new t(e,n,new Nf(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof ur}get widget(){return this.type instanceof ml}},Ei=[],dr={},ot=class t{constructor(e,n){this.local=e.length?e:Ei,this.children=n.length?n:Ei}static create(e,n){return n.length?gl(n,e,0,dr):ze}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,o){for(let s=0;s<this.local.length;s++){let a=this.local[s];a.from<=n&&a.to>=e&&(!o||o(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>e){let a=this.children[s]+1;this.children[s+2].findInner(e-a,n-a,r,i+a,o)}}map(e,n,r){return this==ze||e.maps.length==0?this:this.mapInner(e,n,0,0,r||dr)}mapInner(e,n,r,i,o){let s;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(n,l)?(s||(s=[])).push(l):o.onRemove&&o.onRemove(this.local[a].spec)}return this.children.length?JA(this.children,s||[],e,n,r,i,o):s?new t(s.sort(fr),Ei):ze}add(e,n){return n.length?this==ze?t.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,o=0;e.forEach((a,l)=>{let c=l+r,u;if(u=H0(n,a,c)){for(i||(i=this.children.slice());o<i.length&&i[o]<l;)o+=3;i[o]==l?i[o+2]=i[o+2].addInner(a,u,c+1):i.splice(o,0,l,l+a.nodeSize,gl(u,a,c+1,dr)),o+=3}});let s=$0(o?U0(n):n,-r);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||s.splice(a--,1);return new t(s.length?this.local.concat(s).sort(fr):this.local,i||this.children)}remove(e){return e.length==0||this==ze?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let s,a=r[o]+n,l=r[o+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(s||(s=[])).push(d));if(!s)continue;r==this.children&&(r=this.children.slice());let c=r[o+2].removeInner(s,a+1);c!=ze?r[o+2]=c:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,s;o<e.length;o++)if(s=e[o])for(let a=0;a<i.length;a++)i[a].eq(s,n)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new t(i,r):ze}forChild(e,n){if(this==ze)return this;if(n.isLeaf)return t.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let o=e+1,s=o+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<s&&l.to>o&&l.type instanceof ur){let c=Math.max(o,l.from)-o,u=Math.min(s,l.to)-o;c<u&&(i||(i=[])).push(l.copy(c,u))}}if(i){let a=new t(i.sort(fr),Ei);return r?new kf([a,r]):a}return r||ze}eq(e){if(this==e)return!0;if(!(e instanceof t)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return Bf(this.localsInner(e))}localsInner(e){if(this==ze)return Ei;if(e.inlineContent||!this.local.some(ur.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof ur||n.push(this.local[r]);return n}};ot.empty=new ot([],[]);ot.removeOverlap=Bf;var ze=ot.empty,kf=class t{constructor(e){this.members=e}map(e,n){let r=this.members.map(i=>i.map(e,n,dr));return t.from(r)}forChild(e,n){if(n.isLeaf)return ot.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,n);o!=ze&&(o instanceof t?r=r.concat(o.members):r.push(o))}return t.from(r)}eq(e){if(!(e instanceof t)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let s=0;s<o.length;s++)n.push(o[s])}}return n?Bf(r?n:n.sort(fr)):Ei}static from(e){switch(e.length){case 0:return ze;case 1:return e[0];default:return new t(e.every(n=>n instanceof ot)?e:e.reduce((n,r)=>n.concat(r instanceof ot?r:r.members),[]))}}};function JA(t,e,n,r,i,o,s){let a=t.slice();for(let c=0,u=o;c<n.maps.length;c++){let d=0;n.maps[c].forEach((f,h,p,m)=>{let v=m-p-(h-f);for(let y=0;y<a.length;y+=3){let b=a[y+1];if(b<0||f>b+u-d)continue;let J=a[y]+u-d;h>=J?a[y+1]=f<=J?-2:-1:p>=i&&v&&(a[y]+=v,a[y+1]+=v)}d+=v}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+o),d=u-i;if(d<0||d>=r.content.size){l=!0;continue}let f=n.map(t[c+1]+o,-1),h=f-i,{index:p,offset:m}=r.content.findIndex(d),v=r.maybeChild(p);if(v&&m==d&&m+v.nodeSize==h){let y=a[c+2].mapInner(n,v,u+1,t[c]+o+1,s);y!=ze?(a[c]=d,a[c+1]=h,a[c+2]=y):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=QA(a,t,e,n,i,o,s),u=gl(c,r,0,s);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,f=0;d<u.children.length;d+=3){let h=u.children[d];for(;f<a.length&&a[f]<h;)f+=3;a.splice(f,0,u.children[d],u.children[d+1],u.children[d+2])}}return new ot(e.sort(fr),a)}function $0(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new Tn(i.from+e,i.to+e,i.type))}return n}function QA(t,e,n,r,i,o,s){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(r,i,c);d?n.push(d):s.onRemove&&s.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+o+1);return n}function H0(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let o=0,s;o<t.length;o++)(s=t[o])&&s.from>n&&s.to<r&&((i||(i=[])).push(s),t[o]=null);return i}function U0(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function gl(t,e,n,r){let i=[],o=!1;e.forEach((a,l)=>{let c=H0(t,a,l+n);if(c){o=!0;let u=gl(c,a,n+l+1,r);u!=ze&&i.push(l,l+a.nodeSize,u)}});let s=$0(o?U0(t):t,-n).sort(fr);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||i.length?new ot(s,i):ze}function fr(t,e){return t.from-e.from||t.to-e.to}function Bf(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==t&&(e=t.slice()),e[i]=o.copy(o.from,r.to),C0(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),C0(e,i,r.copy(o.from,r.to)));break}}}return e}function C0(t,e,n){for(;e<t.length&&fr(n,t[e])>0;)e++;t.splice(e,0,n)}var Uj=Si&&Rf<=11;var rn={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Cl={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},XA=typeof navigator<"u"&&/Mac/.test(navigator.platform),e_=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(de=0;de<10;de++)rn[48+de]=rn[96+de]=String(de);var de;for(de=1;de<=24;de++)rn[de+111]="F"+de;var de;for(de=65;de<=90;de++)rn[de]=String.fromCharCode(de+32),Cl[de]=String.fromCharCode(de);var de;for(Dl in rn)Cl.hasOwnProperty(Dl)||(Cl[Dl]=rn[Dl]);var Dl;function z0(t){var e=XA&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||e_&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Cl:rn)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}var t_=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function n_(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,o,s;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))t_?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),s&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function r_(t){let e=Object.create(null);for(let n in t)e[n_(n)]=t[n];return e}function $f(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function W0(t){let e=r_(t);return function(n,r){let i=z0(r),o,s=e[$f(i,r)];if(s&&s(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=e[$f(i,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(o=rn[r.keyCode])&&o!=i){let a=e[$f(o,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}var wl=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function i_(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}var Uf=(t,e,n)=>{let r=i_(t,n);if(!r)return!1;let i=q0(r);if(!i){let s=r.blockRange(),a=s&&nn(s);return a==null?!1:(e&&e(t.tr.lift(s,a).scrollIntoView()),!0)}let o=i.nodeBefore;if(!o.type.spec.isolating&&X0(t,i,e))return!0;if(r.parent.content.size==0&&(xi(o,"end")||E.isSelectable(o))){let s=gf(t.doc,r.before(),r.after(),w.empty);if(s&&s.slice.size<s.to-s.from){if(e){let a=t.tr.step(s);a.setSelection(xi(o,"end")?k.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):E.create(a.doc,i.pos-o.nodeSize)),e(a.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1};function xi(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}var zf=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;o=q0(r)}let s=o&&o.nodeBefore;return!s||!E.isSelectable(s)?!1:(e&&e(t.tr.setSelection(E.create(t.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function q0(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function o_(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}var Wf=(t,e,n)=>{let r=o_(t,n);if(!r)return!1;let i=Y0(r);if(!i)return!1;let o=i.nodeAfter;if(X0(t,i,e))return!0;if(r.parent.content.size==0&&(xi(o,"start")||E.isSelectable(o))){let s=gf(t.doc,r.before(),r.after(),w.empty);if(s&&s.slice.size<s.to-s.from){if(e){let a=t.tr.step(s);a.setSelection(xi(o,"start")?k.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):E.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},Gf=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;o=Y0(r)}let s=o&&o.nodeAfter;return!s||!E.isSelectable(s)?!1:(e&&e(t.tr.setSelection(E.create(t.doc,o.pos)).scrollIntoView()),!0)};function Y0(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}var K0=(t,e)=>{let n=t.selection,r=n instanceof E,i;if(r){if(n.node.isTextblock||!Mt(t.doc,n.from))return!1;i=n.from}else if(i=Di(t.doc,n.from,-1),i==null)return!1;if(e){let o=t.tr.join(i);r&&o.setSelection(E.create(o.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},Z0=(t,e)=>{let n=t.selection,r;if(n instanceof E){if(n.node.isTextblock||!Mt(t.doc,n.to))return!1;r=n.to}else if(r=Di(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},J0=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),o=i&&nn(i);return o==null?!1:(e&&e(t.tr.lift(i,o).scrollIntoView()),!0)},qf=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function Yf(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}var Kf=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),s=Yf(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,s.createAndFill());l.setSelection(k.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},Zf=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof rt||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=Yf(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let s=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=t.tr.insert(s,o.createAndFill());a.setSelection(_.create(a.doc,s+1)),e(a.scrollIntoView())}return!0},Jf=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(mt(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),i=r&&nn(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function s_(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof E&&e.selection.node.isBlock)return!r.parentOffset||!mt(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.parent.isBlock)return!1;if(n){let o=i.parentOffset==i.parent.content.size,s=e.tr;(e.selection instanceof _||e.selection instanceof rt)&&s.deleteSelection();let a=r.depth==0?null:Yf(r.node(-1).contentMatchAt(r.indexAfter(-1))),l=t&&t(i.parent,o),c=l?[l]:o&&a?[{type:a}]:void 0,u=mt(s.doc,s.mapping.map(r.pos),1,c);if(!c&&!u&&mt(s.doc,s.mapping.map(r.pos),1,a?[{type:a}]:void 0)&&(a&&(c=[{type:a}]),u=!0),u&&(s.split(s.mapping.map(r.pos),1,c),!o&&!r.parentOffset&&r.parent.type!=a)){let d=s.mapping.map(r.before()),f=s.doc.resolve(d);a&&r.node(-1).canReplaceWith(f.index(),f.index()+1,a)&&s.setNodeMarkup(s.mapping.map(r.before()),a)}n(s.scrollIntoView())}return!0}}var a_=s_();var Q0=(t,e)=>{let{$from:n,to:r}=t.selection,i,o=n.sharedDepth(r);return o==0?!1:(i=n.before(o),e&&e(t.tr.setSelection(E.create(t.doc,i))),!0)},l_=(t,e)=>(e&&e(t.tr.setSelection(new rt(t.doc))),!0);function c_(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||Mt(t.doc,e.pos))?!1:(n&&n(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function X0(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o,s;if(r.type.spec.isolating||i.type.spec.isolating)return!1;if(c_(t,e,n))return!0;let a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(o=(s=r.contentMatchAt(r.childCount)).findWrapping(i.type))&&s.matchType(o[0]||i.type).validEnd){if(n){let d=e.pos+i.nodeSize,f=C.empty;for(let m=o.length-1;m>=0;m--)f=C.from(o[m].create(null,f));f=C.from(r.copy(f));let h=t.tr.step(new Pe(e.pos-1,d,e.pos,d,new w(f,1,0),o.length,!0)),p=d+2*o.length;Mt(h.doc,p)&&h.join(p),n(h.scrollIntoView())}return!0}let l=k.findFrom(e,1),c=l&&l.$from.blockRange(l.$to),u=c&&nn(c);if(u!=null&&u>=e.depth)return n&&n(t.tr.lift(c,u).scrollIntoView()),!0;if(a&&xi(i,"start",!0)&&xi(r,"end")){let d=r,f=[];for(;f.push(d),!d.isTextblock;)d=d.lastChild;let h=i,p=1;for(;!h.isTextblock;h=h.firstChild)p++;if(d.canReplace(d.childCount,d.childCount,h.content)){if(n){let m=C.empty;for(let y=f.length-1;y>=0;y--)m=C.from(f[y].copy(m));let v=t.tr.step(new Pe(e.pos-f.length,e.pos+i.nodeSize,e.pos+p,e.pos+i.nodeSize-p,new w(m,f.length,0),0,!0));n(v.scrollIntoView())}return!0}}return!1}function eD(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(n&&n(e.tr.setSelection(_.create(e.doc,t<0?i.start(o):i.end(o)))),!0):!1}}var Qf=eD(-1),Xf=eD(1);function tD(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),a=s&&vi(s,t,e);return a?(r&&r(n.tr.wrap(s,a).scrollIntoView()),!0):!1}}function eh(t,e=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:s},$to:{pos:a}}=n.selection.ranges[o];n.doc.nodesBetween(s,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let u=n.doc.resolve(c),d=u.index();i=u.parent.canReplaceWith(d,d+1,t)}})}if(!i)return!1;if(r){let o=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[s];o.setBlockType(a,l,t,e)}r(o.scrollIntoView())}return!0}}function th(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}var Hf=th(wl,Uf,zf),G0=th(wl,Wf,Gf),_n={Enter:th(qf,Zf,Jf,a_),"Mod-Enter":Kf,Backspace:Hf,"Mod-Backspace":Hf,"Shift-Backspace":Hf,Delete:G0,"Mod-Delete":G0,"Mod-a":l_},u_={"Ctrl-h":_n.Backspace,"Alt-Backspace":_n["Mod-Backspace"],"Ctrl-d":_n.Delete,"Ctrl-Alt-Backspace":_n["Mod-Delete"],"Alt-Delete":_n["Mod-Delete"],"Alt-d":_n["Mod-Delete"],"Ctrl-a":Qf,"Ctrl-e":Xf};for(let t in _n)u_[t]=_n[t];var oB=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1;function nD(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),a=!1,l=s;if(!s)return!1;if(s.depth>=2&&i.node(s.depth-1).type.compatibleContent(t)&&s.startIndex==0){if(i.index(s.depth-1)==0)return!1;let u=n.doc.resolve(s.start-2);l=new cr(u,u,s.depth),s.endIndex<s.parent.childCount&&(s=new cr(i,n.doc.resolve(o.end(s.depth)),s.depth)),a=!0}let c=vi(l,t,e,s);return c?(r&&r(d_(n.tr,s,c,a,t).scrollIntoView()),!0):!1}}function d_(t,e,n,r,i){let o=C.empty;for(let u=n.length-1;u>=0;u--)o=C.from(n[u].type.create(n[u].attrs,o));t.step(new Pe(e.start-(r?2:0),e.end,e.start,e.end,new w(o,0,0),n.length,!0));let s=0;for(let u=0;u<n.length;u++)n[u].type==i&&(s=u+1);let a=n.length-s,l=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,f=!0;u<d;u++,f=!1)!f&&mt(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return t}function rD(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,s=>s.childCount>0&&s.firstChild.type==t);return o?n?r.node(o.depth-1).type==t?f_(e,n,t,o):h_(e,n,o):!0:!1}}function f_(t,e,n,r){let i=t.tr,o=r.end,s=r.$to.end(r.depth);o<s&&(i.step(new Pe(o-1,s,o,s,new w(C.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new cr(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth));let a=nn(r);if(a==null)return!1;i.lift(r,a);let l=i.mapping.map(o,-1)-1;return Mt(i.doc,l)&&i.join(l),e(i.scrollIntoView()),!0}function h_(t,e,n){let r=t.tr,i=n.parent;for(let h=n.end,p=n.endIndex-1,m=n.startIndex;p>m;p--)h-=i.child(p).nodeSize,r.delete(h-1,h+1);let o=r.doc.resolve(n.start),s=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==i.childCount,c=o.node(-1),u=o.index(-1);if(!c.canReplace(u+(a?0:1),u+1,s.content.append(l?C.empty:C.from(i))))return!1;let d=o.pos,f=d+s.nodeSize;return r.step(new Pe(d-(a?1:0),f+(l?1:0),d+1,f-1,new w((a?C.empty:C.from(i.copy(C.empty))).append(l?C.empty:C.from(i.copy(C.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function iD(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!o)return!1;let s=o.startIndex;if(s==0)return!1;let a=o.parent,l=a.child(s-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=C.from(c?t.create():null),d=new w(C.from(t.create(null,C.from(a.type.create(null,u)))),c?3:1,0),f=o.start,h=o.end;n(e.tr.step(new Pe(f-(c?3:1),h,f,h,d,1,!0)).scrollIntoView())}return!0}}function cD(t){let{state:e,transaction:n}=t,{selection:r}=n,{doc:i}=n,{storedMarks:o}=n;return F(g({},e),{apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),filterTransaction:e.filterTransaction,plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}})}var oh=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){let{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:o}=r,s=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{let d=l(...u)(s);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(o),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){let{rawCommands:r,editor:i,state:o}=this,{view:s}=i,a=[],l=!!e,c=e||o.tr,u=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(c),a.every(f=>f===!0)),d=F(g({},Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...m)=>{let v=this.buildProps(c,n),y=h(...m)(v);return a.push(y),d}]))),{run:u});return d}createCan(e){let{rawCommands:n,state:r}=this,i=!1,o=e||r.tr,s=this.buildProps(o,i),a=Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...u)=>c(...u)(F(g({},s),{dispatch:void 0}))]));return F(g({},a),{chain:()=>this.createChain(o,i)})}buildProps(e,n=!0){let{rawCommands:r,editor:i,state:o}=this,{view:s}=i,a={tr:e,editor:i,view:s,state:cD({state:o,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}};function fe(t,e,n){return t.config[e]===void 0&&t.parent?fe(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind(F(g({},n),{parent:t.parent?fe(t.parent,e,n):null})):t.config[e]}function p_(t){let e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function Le(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function G(...t){return t.filter(e=>!!e).reduce((e,n)=>{let r=g({},e);return Object.entries(n).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}if(i==="class"){let a=o?o.split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(u=>!l.includes(u));r[i]=[...l,...c].join(" ")}else i==="style"?r[i]=[r[i],o].join("; "):r[i]=o}),r},{})}function m_(t){return typeof t=="function"}function re(t,e=void 0,...n){return m_(t)?e?t.bind(e)(...n):t(...n):t}function g_(t){return Object.prototype.toString.call(t)==="[object RegExp]"}var Ii=class{constructor(e){this.find=e.find,this.handler=e.handler}};var sh=class{constructor(e){this.find=e.find,this.handler=e.handler}};function y_(t){return Object.prototype.toString.call(t).slice(8,-1)}function nh(t){return y_(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Sl(t,e){let n=g({},t);return nh(t)&&nh(e)&&Object.keys(e).forEach(r=>{nh(e[r])?r in t?n[r]=Sl(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})}),n}var Ve=class t{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=g(g({},this.config),e),this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=re(fe(this,"addOptions",{name:this.name}))),this.storage=re(fe(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new t(e)}configure(e={}){let n=this.extend();return n.options=Sl(this.options,e),n.storage=re(fe(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){let n=new t(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=re(fe(n,"addOptions",{name:n.name})),n.storage=re(fe(n,"addStorage",{name:n.name,options:n.options})),n}};function v_(t,e,n){let{from:r,to:i}=e,{blockSeparator:o=`

`,textSerializers:s={}}=n||{},a="",l=!0;return t.nodesBetween(r,i,(c,u,d,f)=>{var h;let p=s?.[c.type.name];p?(c.isBlock&&!l&&(a+=o,l=!0),d&&(a+=p({node:c,pos:u,parent:d,index:f,range:e}))):c.isText?(a+=(h=c?.text)===null||h===void 0?void 0:h.slice(Math.max(r,u)-u,i-u),l=!1):c.isBlock&&!l&&(a+=o,l=!0)}),a}function D_(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}var SB=Ve.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Fe({key:new it("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{let{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:o}=i,s=Math.min(...o.map(u=>u.$from.pos)),a=Math.max(...o.map(u=>u.$to.pos)),l=D_(n);return v_(r,{from:s,to:a},{textSerializers:l})}}})]}}),C_=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window?.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),w_=(t=!1)=>({commands:e})=>e.setContent("",t),b_=()=>({state:t,tr:e,dispatch:n})=>{let{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:o,$to:s})=>{t.doc.nodesBetween(o.pos,s.pos,(a,l)=>{if(a.type.isText)return;let{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),h=d.blockRange(f);if(!h)return;let p=nn(h);if(a.type.isTextblock){let{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},E_=t=>e=>t(e),M_=()=>({state:t,dispatch:e})=>Zf(t,e),S_=(t,e)=>({editor:n,tr:r})=>{let{state:i}=n,o=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);let s=r.mapping.map(e);return r.insert(s,o.content),r.setSelection(new _(r.doc.resolve(s-1))),!0},x_=()=>({tr:t,dispatch:e})=>{let{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;let i=t.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(e){let a=i.before(o),l=i.after(o);t.delete(a,l).scrollIntoView()}return!0}return!1},I_=t=>({tr:e,state:n,dispatch:r})=>{let i=Le(t,n.schema),o=e.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===i){if(r){let l=o.before(s),c=o.after(s);e.delete(l,c).scrollIntoView()}return!0}return!1},T_=t=>({tr:e,dispatch:n})=>{let{from:r,to:i}=t;return n&&e.delete(r,i),!0},A_=()=>({state:t,dispatch:e})=>wl(t,e),__=()=>({commands:t})=>t.keyboardShortcut("Enter"),N_=()=>({state:t,dispatch:e})=>Kf(t,e);function El(t,e,n={strict:!0}){let r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:g_(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function ah(t,e,n={}){return t.find(r=>r.type===e&&El(r.attrs,n))}function k_(t,e,n={}){return!!ah(t,e,n)}function ch(t,e,n={}){if(!t||!e)return;let r=t.parent.childAfter(t.parentOffset);if(t.parentOffset===r.offset&&r.offset!==0&&(r=t.parent.childBefore(t.parentOffset)),!r.node)return;let i=ah([...r.node.marks],e,n);if(!i)return;let o=r.index,s=t.start()+r.offset,a=o+1,l=s+r.node.nodeSize;for(ah([...r.node.marks],e,n);o>0&&i.isInSet(t.parent.child(o-1).marks);)o-=1,s-=t.parent.child(o).nodeSize;for(;a<t.parent.childCount&&k_([...t.parent.child(a).marks],e,n);)l+=t.parent.child(a).nodeSize,a+=1;return{from:s,to:l}}function Nn(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var O_=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let o=Nn(t,r.schema),{doc:s,selection:a}=n,{$from:l,from:c,to:u}=a;if(i){let d=ch(l,o,e);if(d&&d.from<=c&&d.to>=u){let f=_.create(s,d.from,d.to);n.setSelection(f)}}return!0},R_=t=>e=>{let n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function uD(t){return t instanceof _}function gr(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function P_(t,e=null){if(!e)return null;let n=k.atStart(t),r=k.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;let i=n.from,o=r.to;return e==="all"?_.create(t,gr(0,i,o),gr(t.content.size,i,o)):_.create(t,gr(e,i,o),gr(e,i,o))}function uh(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var F_=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:o})=>{e=g({scrollIntoView:!0},e);let s=()=>{uh()&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e?.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(o&&t===null&&!uD(n.state.selection))return s(),!0;let a=P_(i.doc,t)||n.state.selection,l=n.state.selection.eq(a);return o&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},L_=(t,e)=>n=>t.every((r,i)=>e(r,F(g({},n),{index:i}))),V_=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),lh=t=>{let e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){let r=e[n];r.nodeType===3&&r.nodeValue&&!/\S/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&lh(r)}return t};function oD(t){let e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return lh(n),lh(n)}function Ml(t,e,n){if(n=g({slice:!0,parseOptions:{}},n),typeof t=="object"&&t!==null)try{return Array.isArray(t)&&t.length>0?C.fromArray(t.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(t)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",r),Ml("",e,n)}if(typeof t=="string"){let r=gi.fromSchema(e);return n.slice?r.parseSlice(oD(t),n.parseOptions).content:r.parse(oD(t),n.parseOptions)}return Ml("",e,n)}function j_(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Vt||i instanceof Pe))return;let o=t.mapping.maps[r],s=0;o.forEach((a,l,c,u)=>{s===0&&(s=u)}),t.setSelection(k.near(t.doc.resolve(s),n))}var B_=t=>t.toString().startsWith("<"),$_=(t,e,n)=>({tr:r,dispatch:i,editor:o})=>{if(i){n=g({parseOptions:{},updateSelection:!0},n);let s=Ml(e,o.schema,{parseOptions:g({preserveWhitespace:"full"},n.parseOptions)});if(s.toString()==="<>")return!0;let{from:a,to:l}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},c=!0,u=!0;if((B_(s)?s:[s]).forEach(f=>{f.check(),c=c?f.isText&&f.marks.length===0:!1,u=u?f.isBlock:!1}),a===l&&u){let{parent:f}=r.doc.resolve(a);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(a-=1,l+=1)}c?Array.isArray(e)?r.insertText(e.map(f=>f.text||"").join(""),a,l):typeof e=="object"&&e&&e.text?r.insertText(e.text,a,l):r.insertText(e,a,l):r.replaceWith(a,l,s),n.updateSelection&&j_(r,r.steps.length-1,-1)}return!0},H_=()=>({state:t,dispatch:e})=>K0(t,e),U_=()=>({state:t,dispatch:e})=>Z0(t,e),z_=()=>({state:t,dispatch:e})=>Uf(t,e),W_=()=>({state:t,dispatch:e})=>Wf(t,e),G_=()=>({tr:t,state:e,dispatch:n})=>{try{let r=Di(e.doc,e.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),n&&n(t),!0)}catch{return!1}},q_=()=>({state:t,dispatch:e,tr:n})=>{try{let r=Di(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}};function xl(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Y_(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n==="Space"&&(n=" ");let r,i,o,s;for(let a=0;a<e.length-1;a+=1){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))uh()||xl()?s=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}var K_=t=>({editor:e,view:n,tr:r,dispatch:i})=>{let o=Y_(t).split(/-(?!$)/),s=o.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l?.steps.forEach(c=>{let u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function dh(t,e,n={}){let{from:r,to:i,empty:o}=t.selection,s=e?Le(e,t.schema):null,a=[];t.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;let h=Math.max(r,f),p=Math.min(i,f+d.nodeSize);a.push({node:d,from:h,to:p})});let l=i-r,c=a.filter(d=>s?s.name===d.node.type.name:!0).filter(d=>El(d.node.attrs,n,{strict:!1}));return o?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=l}var Z_=(t,e={})=>({state:n,dispatch:r})=>{let i=Le(t,n.schema);return dh(n,i,e)?J0(n,r):!1},J_=()=>({state:t,dispatch:e})=>Jf(t,e),Q_=t=>({state:e,dispatch:n})=>{let r=Le(t,e.schema);return rD(r)(e,n)},X_=()=>({state:t,dispatch:e})=>qf(t,e);function dD(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function sD(t,e){let n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}var eN=(t,e)=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null,a=dD(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(o=Le(t,r.schema)),a==="mark"&&(s=Nn(t,r.schema)),i&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{o&&o===c.type&&n.setNodeMarkup(u,void 0,sD(c.attrs,e)),s&&c.marks.length&&c.marks.forEach(d=>{s===d.type&&n.addMark(u,u+c.nodeSize,s.create(sD(d.attrs,e)))})})}),!0):!1},tN=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),nN=()=>({tr:t,commands:e})=>e.setTextSelection({from:0,to:t.doc.content.size}),rN=()=>({state:t,dispatch:e})=>zf(t,e),iN=()=>({state:t,dispatch:e})=>Gf(t,e),oN=()=>({state:t,dispatch:e})=>Q0(t,e),sN=()=>({state:t,dispatch:e})=>Xf(t,e),aN=()=>({state:t,dispatch:e})=>Qf(t,e);function lN(t,e,n={}){return Ml(t,e,{slice:!1,parseOptions:n})}var cN=(t,e=!1,n={})=>({tr:r,editor:i,dispatch:o})=>{let{doc:s}=r,a=lN(t,i.schema,n);return o&&r.replaceWith(0,s.content.size,a).setMeta("preventUpdate",!e),!0};function Bo(t,e){let n=Nn(e,t.schema),{from:r,to:i,empty:o}=t.selection,s=[];o?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,l=>{s.push(...l.marks)});let a=s.find(l=>l.type.name===n.name);return a?g({},a.attrs):{}}function uN(t){for(let e=0;e<t.edgeCount;e+=1){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function dN(t,e){for(let n=t.depth;n>0;n-=1){let r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function fh(t){return e=>dN(e.$from,t)}function fD(t,e,n){let r=[];return t===e?n.resolve(t).marks().forEach(i=>{let o=n.resolve(t-1),s=ch(o,i.type);s&&r.push(g({mark:i},s))}):n.nodesBetween(t,e,(i,o)=>{!i||i.nodeSize===void 0||r.push(...i.marks.map(s=>({from:o,to:o+i.nodeSize,mark:s})))}),r}function bl(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{let i=t.find(o=>o.type===e&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}function fN(t,e,n={}){let{empty:r,ranges:i}=t.selection,o=e?Nn(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>o?o.name===d.type.name:!0).find(d=>El(d.attrs,n,{strict:!1}));let s=0,a=[];if(i.forEach(({$from:d,$to:f})=>{let h=d.pos,p=f.pos;t.doc.nodesBetween(h,p,(m,v)=>{if(!m.isText&&!m.marks.length)return;let y=Math.max(h,v),b=Math.min(p,v+m.nodeSize),J=b-y;s+=J,a.push(...m.marks.map(ne=>({mark:ne,from:y,to:b})))})}),s===0)return!1;let l=a.filter(d=>o?o.name===d.mark.type.name:!0).filter(d=>El(d.mark.attrs,n,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=a.filter(d=>o?d.mark.type!==o&&d.mark.type.excludes(o):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+c:l)>=s}function aD(t,e){let{nodeExtensions:n}=p_(e),r=n.find(s=>s.name===t);if(!r)return!1;let i={name:r.name,options:r.options,storage:r.storage},o=re(fe(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function hN(t,e,n){var r;let{selection:i}=e,o=null;if(uD(i)&&(o=i.$cursor),o){let a=(r=t.storedMarks)!==null&&r!==void 0?r:o.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}let{ranges:s}=i;return s.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){let h=!f||f.type.allowsMarkType(n),p=!!n.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(n));c=h&&p}return!c}),c})}var pN=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let{selection:o}=n,{empty:s,ranges:a}=o,l=Nn(t,r.schema);if(i)if(s){let c=Bo(r,l);n.addStoredMark(l.create(g(g({},c),e)))}else a.forEach(c=>{let u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,h)=>{let p=Math.max(h,u),m=Math.min(h+f.nodeSize,d);f.marks.find(y=>y.type===l)?f.marks.forEach(y=>{l===y.type&&n.addMark(p,m,l.create(g(g({},y.attrs),e)))}):n.addMark(p,m,l.create(e))})});return hN(r,n,l)},mN=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),gN=(t,e={})=>({state:n,dispatch:r,chain:i})=>{let o=Le(t,n.schema);return o.isTextblock?i().command(({commands:s})=>eh(o,e)(n)?!0:s.clearNodes()).command(({state:s})=>eh(o,e)(s,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},yN=t=>({tr:e,dispatch:n})=>{if(n){let{doc:r}=e,i=gr(t,0,r.content.size),o=E.create(r,i);e.setSelection(o)}return!0},vN=t=>({tr:e,dispatch:n})=>{if(n){let{doc:r}=e,{from:i,to:o}=typeof t=="number"?{from:t,to:t}:t,s=_.atStart(r).from,a=_.atEnd(r).to,l=gr(i,s,a),c=gr(o,s,a),u=_.create(r,l,c);e.setSelection(u)}return!0},DN=t=>({state:e,dispatch:n})=>{let r=Le(t,e.schema);return iD(r)(e,n)};function lD(t,e){let n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){let r=n.filter(i=>e?.includes(i.type.name));t.tr.ensureMarks(r)}}var CN=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{let{selection:o,doc:s}=e,{$from:a,$to:l}=o,c=i.extensionManager.attributes,u=bl(c,a.node().type.name,a.node().attrs);if(o instanceof E&&o.node.isBlock)return!a.parentOffset||!mt(s,a.pos)?!1:(r&&(t&&lD(n,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){let d=l.parentOffset===l.parent.content.size;o instanceof _&&e.deleteSelection();let f=a.depth===0?void 0:uN(a.node(-1).contentMatchAt(a.indexAfter(-1))),h=d&&f?[{type:f,attrs:u}]:void 0,p=mt(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&mt(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:u}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,h),f&&!d&&!a.parentOffset&&a.parent.type!==f)){let m=e.mapping.map(a.before()),v=e.doc.resolve(m);a.node(-1).canReplaceWith(v.index(),v.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}t&&lD(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},wN=t=>({tr:e,state:n,dispatch:r,editor:i})=>{var o;let s=Le(t,n.schema),{$from:a,$to:l}=n.selection,c=n.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;let u=a.node(-1);if(u.type!==s)return!1;let d=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==s||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let v=C.empty,y=a.index(-1)?1:a.index(-2)?2:3;for(let Je=a.depth-y;Je>=a.depth-3;Je-=1)v=C.from(a.node(Je).copy(v));let b=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,J=bl(d,a.node().type.name,a.node().attrs),ne=((o=s.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(J))||void 0;v=v.append(C.from(s.createAndFill(null,ne)||void 0));let ee=a.before(a.depth-(y-1));e.replace(ee,a.after(-b),new w(v,4-y,0));let ae=-1;e.doc.nodesBetween(ee,e.doc.content.size,(Je,yt)=>{if(ae>-1)return!1;Je.isTextblock&&Je.content.size===0&&(ae=yt+1)}),ae>-1&&e.setSelection(_.near(e.doc.resolve(ae))),e.scrollIntoView()}return!0}let f=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,h=bl(d,u.type.name,u.attrs),p=bl(d,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);let m=f?[{type:s,attrs:h},{type:f,attrs:p}]:[{type:s,attrs:h}];if(!mt(e.doc,a.pos,2))return!1;if(r){let{selection:v,storedMarks:y}=n,{splittableMarks:b}=i.extensionManager,J=y||v.$to.parentOffset&&v.$from.marks();if(e.split(a.pos,2,m).scrollIntoView(),!J||!r)return!0;let ne=J.filter(ee=>b.includes(ee.type.name));e.ensureMarks(ne)}return!0},rh=(t,e)=>{let n=fh(s=>s.type===e)(t.selection);if(!n)return!0;let r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;let i=t.doc.nodeAt(r);return n.node.type===i?.type&&Mt(t.doc,n.pos)&&t.join(n.pos),!0},ih=(t,e)=>{let n=fh(s=>s.type===e)(t.selection);if(!n)return!0;let r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;let i=t.doc.nodeAt(r);return n.node.type===i?.type&&Mt(t.doc,r)&&t.join(r),!0},bN=(t,e,n,r={})=>({editor:i,tr:o,state:s,dispatch:a,chain:l,commands:c,can:u})=>{let{extensions:d,splittableMarks:f}=i.extensionManager,h=Le(t,s.schema),p=Le(e,s.schema),{selection:m,storedMarks:v}=s,{$from:y,$to:b}=m,J=y.blockRange(b),ne=v||m.$to.parentOffset&&m.$from.marks();if(!J)return!1;let ee=fh(ae=>aD(ae.type.name,d))(m);if(J.depth>=1&&ee&&J.depth-ee.depth<=1){if(ee.node.type===h)return c.liftListItem(p);if(aD(ee.node.type.name,d)&&h.validContent(ee.node.content)&&a)return l().command(()=>(o.setNodeMarkup(ee.pos,h),!0)).command(()=>rh(o,h)).command(()=>ih(o,h)).run()}return!n||!ne||!a?l().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>rh(o,h)).command(()=>ih(o,h)).run():l().command(()=>{let ae=u().wrapInList(h,r),Je=ne.filter(yt=>f.includes(yt.type.name));return o.ensureMarks(Je),ae?!0:c.clearNodes()}).wrapInList(h,r).command(()=>rh(o,h)).command(()=>ih(o,h)).run()},EN=(t,e={},n={})=>({state:r,commands:i})=>{let{extendEmptyMarkRange:o=!1}=n,s=Nn(t,r.schema);return fN(r,s,e)?i.unsetMark(s,{extendEmptyMarkRange:o}):i.setMark(s,e)},MN=(t,e,n={})=>({state:r,commands:i})=>{let o=Le(t,r.schema),s=Le(e,r.schema);return dh(r,o,n)?i.setNode(s):i.setNode(o,n)},SN=(t,e={})=>({state:n,commands:r})=>{let i=Le(t,n.schema);return dh(n,i,e)?r.lift(i):r.wrapIn(i,e)},xN=()=>({state:t,dispatch:e})=>{let n=t.plugins;for(let r=0;r<n.length;r+=1){let i=n[r],o;if(i.spec.isInputRules&&(o=i.getState(t))){if(e){let s=t.tr,a=o.transform;for(let l=a.steps.length-1;l>=0;l-=1)s.step(a.steps[l].invert(a.docs[l]));if(o.text){let l=s.doc.resolve(o.from).marks();s.replaceWith(o.from,o.to,t.schema.text(o.text,l))}else s.delete(o.from,o.to)}return!0}}return!1},IN=()=>({tr:t,dispatch:e})=>{let{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0},TN=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var o;let{extendEmptyMarkRange:s=!1}=e,{selection:a}=n,l=Nn(t,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&s){let{from:f,to:h}=a,p=(o=c.marks().find(v=>v.type===l))===null||o===void 0?void 0:o.attrs,m=ch(c,l,p);m&&(f=m.from,h=m.to),n.removeMark(f,h,l)}else d.forEach(f=>{n.removeMark(f.$from.pos,f.$to.pos,l)});return n.removeStoredMark(l),!0},AN=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null,a=dD(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(o=Le(t,r.schema)),a==="mark"&&(s=Nn(t,r.schema)),i&&n.selection.ranges.forEach(l=>{let c=l.$from.pos,u=l.$to.pos;r.doc.nodesBetween(c,u,(d,f)=>{o&&o===d.type&&n.setNodeMarkup(f,void 0,g(g({},d.attrs),e)),s&&d.marks.length&&d.marks.forEach(h=>{if(s===h.type){let p=Math.max(f,c),m=Math.min(f+d.nodeSize,u);n.addMark(p,m,s.create(g(g({},h.attrs),e)))}})})}),!0):!1},_N=(t,e={})=>({state:n,dispatch:r})=>{let i=Le(t,n.schema);return tD(i,e)(n,r)},NN=(t,e={})=>({state:n,dispatch:r})=>{let i=Le(t,n.schema);return nD(i,e)(n,r)},kN=Object.freeze({__proto__:null,blur:C_,clearContent:w_,clearNodes:b_,command:E_,createParagraphNear:M_,cut:S_,deleteCurrentNode:x_,deleteNode:I_,deleteRange:T_,deleteSelection:A_,enter:__,exitCode:N_,extendMarkRange:O_,first:R_,focus:F_,forEach:L_,insertContent:V_,insertContentAt:$_,joinUp:H_,joinDown:U_,joinBackward:z_,joinForward:W_,joinItemBackward:G_,joinItemForward:q_,keyboardShortcut:K_,lift:Z_,liftEmptyBlock:J_,liftListItem:Q_,newlineInCode:X_,resetAttributes:eN,scrollIntoView:tN,selectAll:nN,selectNodeBackward:rN,selectNodeForward:iN,selectParentNode:oN,selectTextblockEnd:sN,selectTextblockStart:aN,setContent:cN,setMark:pN,setMeta:mN,setNode:gN,setNodeSelection:yN,setTextSelection:vN,sinkListItem:DN,splitBlock:CN,splitListItem:wN,toggleList:bN,toggleMark:EN,toggleNode:MN,toggleWrap:SN,undoInputRule:xN,unsetAllMarks:IN,unsetMark:TN,updateAttributes:AN,wrapIn:_N,wrapInList:NN}),xB=Ve.create({name:"commands",addCommands(){return g({},kN)}}),IB=Ve.create({name:"editable",addProseMirrorPlugins(){return[new Fe({key:new it("editable"),props:{editable:()=>this.editor.options.editable}})]}}),TB=Ve.create({name:"focusEvents",addProseMirrorPlugins(){let{editor:t}=this;return[new Fe({key:new it("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;let r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;let r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),AB=Ve.create({name:"keymap",addKeyboardShortcuts(){let t=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:a})=>{let{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:f,parent:h}=d,p=d.parent.isTextblock?a.doc.resolve(f-1):d,m=p.parent.type.spec.isolating,v=d.pos-d.parentOffset,y=m&&p.parent.childCount===1?v===d.pos:k.atStart(c).from===f;return!u||!y||!h.type.isTextblock||h.textContent.length?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i=g({},r),o=F(g({},r),{"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()});return uh()||xl()?o:i},addProseMirrorPlugins(){return[new Fe({key:new it("clearDocument"),appendTransaction:(t,e,n)=>{if(!(t.some(p=>p.docChanged)&&!e.doc.eq(n.doc)))return;let{empty:i,from:o,to:s}=e.selection,a=k.atStart(e.doc).from,l=k.atEnd(e.doc).to;if(i||!(o===a&&s===l)||!(n.doc.textBetween(0,n.doc.content.size," "," ").length===0))return;let d=n.tr,f=cD({state:n,transaction:d}),{commands:h}=new oh({editor:this.editor,state:f});if(h.clearNodes(),!!d.steps.length)return d}})]}}),_B=Ve.create({name:"tabindex",addProseMirrorPlugins(){return[new Fe({key:new it("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});function Bt(t){return new Ii({find:t.find,handler:({state:e,range:n,match:r})=>{let i=re(t.getAttributes,void 0,r);if(i===!1||i===null)return null;let{tr:o}=e,s=r[r.length-1],a=r[0];if(s){let l=a.search(/\S/),c=n.from+a.indexOf(s),u=c+s.length;if(fD(n.from,n.to,e.doc).filter(h=>h.mark.type.excluded.find(m=>m===t.type&&m!==h.mark.type)).filter(h=>h.to>c).length)return null;u<n.to&&o.delete(u,n.to),c>n.from&&o.delete(n.from+l,c);let f=n.from+l+s.length;o.addMark(n.from+l,f,t.type.create(i||{})),o.removeStoredMark(t.type)}}})}function hD(t){return new Ii({find:t.find,handler:({state:e,range:n,match:r})=>{let i=re(t.getAttributes,void 0,r)||{},{tr:o}=e,s=n.from,a=n.to,l=t.type.create(i);if(r[1]){let c=r[0].lastIndexOf(r[1]),u=s+c;u>a?u=a:a=u+r[1].length;let d=r[0][r[0].length-1];o.insertText(d,s+r[0].length-1),o.replaceWith(u,a,l)}else r[0]&&o.insert(s-1,t.type.create(i)).delete(o.mapping.map(s),o.mapping.map(a));o.scrollIntoView()}})}function $o(t){return new Ii({find:t.find,handler:({state:e,range:n,match:r})=>{let i=e.doc.resolve(n.from),o=re(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,o)}})}function kn(t){return new Ii({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{let o=re(t.getAttributes,void 0,r)||{},s=e.tr.delete(n.from,n.to),l=s.doc.resolve(n.from).blockRange(),c=l&&vi(l,t.type,o);if(!c)return null;if(s.wrap(l,c),t.keepMarks&&t.editor){let{selection:d,storedMarks:f}=e,{splittableMarks:h}=t.editor.extensionManager,p=f||d.$to.parentOffset&&d.$from.marks();if(p){let m=p.filter(v=>h.includes(v.type.name));s.ensureMarks(m)}}if(t.keepAttributes){let d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(d,o).run()}let u=s.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&Mt(s.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&s.join(n.from-1)}})}var Ze=class t{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=g(g({},this.config),e),this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=re(fe(this,"addOptions",{name:this.name}))),this.storage=re(fe(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new t(e)}configure(e={}){let n=this.extend();return n.options=Sl(this.options,e),n.storage=re(fe(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){let n=new t(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=re(fe(n,"addOptions",{name:n.name})),n.storage=re(fe(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){let{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){let s=i.marks();if(!!!s.find(c=>c?.type.name===n.name))return!1;let l=s.find(c=>c?.type.name===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}},te=class t{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=g(g({},this.config),e),this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=re(fe(this,"addOptions",{name:this.name}))),this.storage=re(fe(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new t(e)}configure(e={}){let n=this.extend();return n.options=Sl(this.options,e),n.storage=re(fe(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){let n=new t(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=re(fe(n,"addOptions",{name:n.name})),n.storage=re(fe(n,"addStorage",{name:n.name,options:n.options})),n}};function $t(t){return new sh({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{let o=re(t.getAttributes,void 0,r,i);if(o===!1||o===null)return null;let{tr:s}=e,a=r[r.length-1],l=r[0],c=n.to;if(a){let u=l.search(/\S/),d=n.from+l.indexOf(a),f=d+a.length;if(fD(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(v=>v===t.type&&v!==p.mark.type)).filter(p=>p.to>d).length)return null;f<n.to&&s.delete(f,n.to),d>n.from&&s.delete(n.from+u,d),c=n.from+u+a.length,s.addMark(n.from+u,c,t.type.create(o||{})),s.removeStoredMark(t.type)}}})}var ON=/^\s*>\s$/,pD=te.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",G(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[kn({find:ON,type:this.type})]}});var RN=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,PN=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,FN=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,LN=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,mD=Ze.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",G(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Bt({find:RN,type:this.type}),Bt({find:FN,type:this.type})]},addPasteRules(){return[$t({find:PN,type:this.type}),$t({find:LN,type:this.type})]}});var VN=te.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",G(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),gD=Ze.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["span",G(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{let n=Bo(t,this.type);return Object.entries(n).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),yD=/^\s*([-+*])\s$/,vD=te.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",G(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(VN.name,this.editor.getAttributes(gD.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=kn({find:yD,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=kn({find:yD,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(gD.name),editor:this.editor})),[t]}});var jN=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,BN=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,DD=Ze.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",G(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Bt({find:jN,type:this.type})]},addPasteRules(){return[$t({find:BN,type:this.type})]}});var $N=/^```([a-z]+)?[\s\n]$/,HN=/^~~~([a-z]+)?[\s\n]$/,CD=te.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:t=>{var e;let{languageClassPrefix:n}=this.options,o=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(s=>s.startsWith(n)).map(s=>s.replace(n,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",G(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{let{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;let{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;let o=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith(`

`);return!o||!s?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;let{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:o}=n;if(!o||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;let a=i.after();return a===void 0||r.nodeAt(a)?!1:t.commands.exitCode()}}},addInputRules(){return[$o({find:$N,type:this.type,getAttributes:t=>({language:t[1]})}),$o({find:HN,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Fe({key:new it("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;let n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=i?.mode;if(!n||!o)return!1;let{tr:s}=t.state;return s.replaceSelectionWith(this.type.create({language:o})),s.setSelection(_.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.insertText(n.replace(/\r\n?/g,`
`)),s.setMeta("paste",!0),t.dispatch(s),!0}}})]}});var wD=te.create({name:"doc",topNode:!0,content:"block+"});function bD(t={}){return new Fe({view(e){return new hh(e,t)}})}var hh=class{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let o=s=>{this[i](s)};return e.dom.addEventListener(i,o),{name:i,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let a=e.nodeBefore,l=e.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let u=c.getBoundingClientRect(),d=a?u.bottom:u.top;a&&l&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:d-this.width/2,bottom:d+this.width/2}}}}if(!r){let a=this.editorView.coordsAtPos(this.cursorPos);r={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let o,s;if(!i||i==document.body&&getComputedStyle(i).position=="static")o=-pageXOffset,s=-pageYOffset;else{let a=i.getBoundingClientRect();o=a.left-i.scrollLeft,s=a.top-i.scrollTop}this.element.style.left=r.left-o+"px",this.element.style.top=r.top-s+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!o){let s=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=ul(this.editorView.state.doc,s,this.editorView.dragging.slice);a!=null&&(s=a)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}};var ED=Ve.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[bD(this.options)]}});var je=class t extends k{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return t.valid(r)?new t(r):k.near(r)}content(){return w.empty}eq(e){return e instanceof t&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new t(e.resolve(n.pos))}getBookmark(){return new ph(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!UN(e)||!zN(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&t.valid(e))return e;let i=e.pos,o=null;for(let s=e.depth;;s--){let a=e.node(s);if(n>0?e.indexAfter(s)<a.childCount:e.index(s)>0){o=a.child(n>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;i+=n;let l=e.doc.resolve(i);if(t.valid(l))return l}for(;;){let s=n>0?o.firstChild:o.lastChild;if(!s){if(o.isAtom&&!o.isText&&!E.isSelectable(o)){e=e.doc.resolve(i+o.nodeSize*n),r=!1;continue e}break}o=s,i+=n;let a=e.doc.resolve(i);if(t.valid(a))return a}return null}}};je.prototype.visible=!1;je.findFrom=je.findGapCursorFrom;k.jsonID("gapcursor",je);var ph=class t{constructor(e){this.pos=e}map(e){return new t(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return je.valid(n)?new je(n):k.near(n)}};function UN(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function zN(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function MD(){return new Fe({props:{decorations:YN,createSelectionBetween(t,e,n){return e.pos==n.pos&&je.valid(n)?new je(n):null},handleClick:GN,handleKeyDown:WN,handleDOMEvents:{beforeinput:qN}}})}var WN=W0({ArrowLeft:Il("horiz",-1),ArrowRight:Il("horiz",1),ArrowUp:Il("vert",-1),ArrowDown:Il("vert",1)});function Il(t,e){let n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,o){let s=r.selection,a=e>0?s.$to:s.$from,l=s.empty;if(s instanceof _){if(!o.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=je.findGapCursorFrom(a,e,l);return c?(i&&i(r.tr.setSelection(new je(c))),!0):!1}}function GN(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!je.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&E.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new je(r))),!0)}function qN(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof je))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=C.empty;for(let s=r.length-1;s>=0;s--)i=C.from(r[s].createAndFill(null,i));let o=t.state.tr.replace(n.pos,n.pos,new w(i,0,0));return o.setSelection(_.near(o.doc.resolve(n.pos+1))),t.dispatch(o),!1}function YN(t){if(!(t.selection instanceof je))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",ot.create(t.doc,[Tn.widget(t.selection.head,e,{key:"gapcursor"})])}var SD=Ve.create({name:"gapCursor",addProseMirrorPlugins(){return[MD()]},extendNodeSchema(t){var e;let n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=re(fe(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}});var xD=te.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",G(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{let{selection:i,storedMarks:o}=n;if(i.$from.parent.type.spec.isolating)return!1;let{keepMarks:s}=this.options,{splittableMarks:a}=r.extensionManager,l=o||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&s){let d=l.filter(f=>a.includes(f.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}});var ID=te.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,G(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>F(g({},t),{[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>$o({find:new RegExp(`^(#{1,${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var Tl=200,_e=function(){};_e.prototype.append=function(e){return e.length?(e=_e.from(e),!this.length&&e||e.length<Tl&&this.leafAppend(e)||this.length<Tl&&e.leafPrepend(this)||this.appendInner(e)):this};_e.prototype.prepend=function(e){return e.length?_e.from(e).append(this):this};_e.prototype.appendInner=function(e){return new KN(this,e)};_e.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?_e.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};_e.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};_e.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};_e.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,s){return i.push(e(o,s))},n,r),i};_e.from=function(e){return e instanceof _e?e:e&&e.length?new TD(e):_e.empty};var TD=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new e(this.values.slice(i,o))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,o,s,a){for(var l=o;l<s;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,s,a){for(var l=o-1;l>=s;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Tl)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Tl)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(_e);_e.empty=new TD([]);var KN=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,o,s){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(o,a),s)===!1||o>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,o)-a,s+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,o,s){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(o,a)-a,s+a)===!1||o<a&&this.left.forEachInvertedInner(r,Math.min(i,a),o,s)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(_e),mh=_e;var ZN=500,yr=class t{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;n&&(i=this.remapping(r,this.items.length),o=i.maps.length);let s=e.tr,a,l,c=[],u=[];return this.items.forEach((d,f)=>{if(!d.step){i||(i=this.remapping(r,f+1),o=i.maps.length),o--,u.push(d);return}if(i){u.push(new Ht(d.map));let h=d.step.map(i.slice(o)),p;h&&s.maybeStep(h).doc&&(p=s.mapping.maps[s.mapping.maps.length-1],c.push(new Ht(p,void 0,void 0,c.length+u.length))),o--,p&&i.appendMap(p,o)}else s.maybeStep(d.step);if(d.selection)return a=i?d.selection.map(i.slice(o)):d.selection,l=new t(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:s,selection:a}}addTransform(e,n,r,i){let o=[],s=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),f=new Ht(e.mapping.maps[u],d,n),h;(h=l&&l.merge(f))&&(f=h,u?o.pop():a=a.slice(0,a.length-1)),o.push(f),n&&(s++,n=void 0),i||(l=f)}let c=s-r.depth;return c>QN&&(a=JN(a,c),s-=c),new t(a.append(o),s)}remapping(e,n){let r=new ol;return this.items.forEach((i,o)=>{let s=i.mirrorOffset!=null&&o-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,s)},e,n),r}addMaps(e){return this.eventCount==0?this:new t(this.items.append(e.map(n=>new Ht(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),o=e.mapping,s=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},i);let l=n;this.items.forEach(f=>{let h=o.getMirror(--l);if(h==null)return;s=Math.min(s,h);let p=o.maps[h];if(f.step){let m=e.steps[h].invert(e.docs[h]),v=f.selection&&f.selection.map(o.slice(l+1,h));v&&a++,r.push(new Ht(p,m,v))}else r.push(new Ht(p))},i);let c=[];for(let f=n;f<s;f++)c.push(new Ht(o.maps[f]));let u=this.items.slice(0,i).append(c).append(r),d=new t(u,a);return d.emptyItemCount()>ZN&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],o=0;return this.items.forEach((s,a)=>{if(a>=e)i.push(s),s.selection&&o++;else if(s.step){let l=s.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=s.selection&&s.selection.map(n.slice(r));u&&o++;let d=new Ht(c.invert(),l,u),f,h=i.length-1;(f=i.length&&i[h].merge(d))?i[h]=f:i.push(d)}}else s.map&&r--},this.items.length,0),new t(mh.from(i.reverse()),o)}};yr.empty=new yr(mh.empty,0);function JN(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}var Ht=class t{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new t(n.getMap().invert(),n,this.selection)}}},Ut=class{constructor(e,n,r,i,o){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=o}},QN=20;function XN(t,e,n,r){let i=n.getMeta(On),o;if(i)return i.historyState;n.getMeta(tk)&&(t=new Ut(t.done,t.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(s&&s.getMeta(On))return s.getMeta(On).redo?new Ut(t.done.addTransform(n,void 0,r,Al(e)),t.undone,AD(n.mapping.maps[n.steps.length-1]),t.prevTime,t.prevComposition):new Ut(t.done,t.undone.addTransform(n,void 0,r,Al(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!s&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!ek(n,t.prevRanges)),c=s?gh(t.prevRanges,n.mapping):AD(n.mapping.maps[n.steps.length-1]);return new Ut(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,Al(e)),yr.empty,c,n.time,a??t.prevComposition)}else return(o=n.getMeta("rebased"))?new Ut(t.done.rebased(n,o),t.undone.rebased(n,o),gh(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Ut(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),gh(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function ek(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&i>=e[o]&&(n=!0)}),n}function AD(t){let e=[];return t.forEach((n,r,i,o)=>e.push(i,o)),e}function gh(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),o=e.map(t[r+1],-1);i<=o&&n.push(i,o)}return n}function ND(t,e,n,r){let i=Al(e),o=On.get(e).spec.config,s=(r?t.undone:t.done).popEvent(e,i);if(!s)return;let a=s.selection.resolve(s.transform.doc),l=(r?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),o,i),c=new Ut(r?l:s.remaining,r?s.remaining:l,null,0,-1);n(s.transform.setSelection(a).setMeta(On,{redo:r,historyState:c}).scrollIntoView())}var yh=!1,_D=null;function Al(t){let e=t.plugins;if(_D!=e){yh=!1,_D=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){yh=!0;break}}return yh}var On=new it("history"),tk=new it("closeHistory");function kD(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Fe({key:On,state:{init(){return new Ut(yr.empty,yr.empty,null,0,-1)},apply(e,n,r){return XN(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?vh:r=="historyRedo"?Dh:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}var vh=(t,e)=>{let n=On.getState(t);return!n||n.done.eventCount==0?!1:(e&&ND(n,t,e,!1),!0)},Dh=(t,e)=>{let n=On.getState(t);return!n||n.undone.eventCount==0?!1:(e&&ND(n,t,e,!0),!0)};var OD=Ve.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>vh(t,e),redo:()=>({state:t,dispatch:e})=>Dh(t,e)}},addProseMirrorPlugins(){return[kD(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-Z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-Y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Shift-Mod-Z":()=>this.editor.commands.redo(),"Mod-\u044F":()=>this.editor.commands.undo(),"Shift-Mod-\u044F":()=>this.editor.commands.redo()}}});var RD=te.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",G(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{let{$to:n}=e.selection,r=t();return n.parentOffset===0?r.insertContentAt(Math.max(n.pos-2,0),{type:this.name}):r.insertContent({type:this.name}),r.command(({tr:i,dispatch:o})=>{var s;if(o){let{$to:a}=i.selection,l=a.end();if(a.nodeAfter)a.nodeAfter.isTextblock?i.setSelection(_.create(i.doc,a.pos+1)):a.nodeAfter.isBlock?i.setSelection(E.create(i.doc,a.pos)):i.setSelection(_.create(i.doc,a.pos));else{let c=(s=a.parent.type.contentMatch.defaultType)===null||s===void 0?void 0:s.create();c&&(i.insert(l,c),i.setSelection(_.create(i.doc,l+1)))}i.scrollIntoView()}return!0}).run()}}},addInputRules(){return[hD({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}});var nk=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,rk=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,ik=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,ok=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,PD=Ze.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",G(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Bt({find:nk,type:this.type}),Bt({find:ik,type:this.type})]},addPasteRules(){return[$t({find:rk,type:this.type}),$t({find:ok,type:this.type})]}});var FD=te.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",G(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}});var sk=te.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",G(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),LD=Ze.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["span",G(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{let n=Bo(t,this.type);return Object.entries(n).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),VD=/^(\d+)\.\s$/,jD=te.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){let r=t,{start:e}=r,n=Sh(r,["start"]);return e===1?["ol",G(this.options.HTMLAttributes,n),0]:["ol",G(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(sk.name,this.editor.getAttributes(LD.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=kn({find:VD,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=kn({find:VD,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>g({start:+e[1]},this.editor.getAttributes(LD.name)),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}});var BD=te.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",G(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}});var ak=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,lk=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,$D=Ze.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",G(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){let t={};return xl()?t["Mod-Shift-s"]=()=>this.editor.commands.toggleStrike():t["Ctrl-Shift-s"]=()=>this.editor.commands.toggleStrike(),t},addInputRules(){return[Bt({find:ak,type:this.type})]},addPasteRules(){return[$t({find:lk,type:this.type})]}});var HD=te.create({name:"text",group:"inline"});var ck=Ve.create({name:"starterKit",addExtensions(){var t,e,n,r,i,o,s,a,l,c,u,d,f,h,p,m,v,y;let b=[];return this.options.blockquote!==!1&&b.push(pD.configure((t=this.options)===null||t===void 0?void 0:t.blockquote)),this.options.bold!==!1&&b.push(mD.configure((e=this.options)===null||e===void 0?void 0:e.bold)),this.options.bulletList!==!1&&b.push(vD.configure((n=this.options)===null||n===void 0?void 0:n.bulletList)),this.options.code!==!1&&b.push(DD.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&b.push(CD.configure((i=this.options)===null||i===void 0?void 0:i.codeBlock)),this.options.document!==!1&&b.push(wD.configure((o=this.options)===null||o===void 0?void 0:o.document)),this.options.dropcursor!==!1&&b.push(ED.configure((s=this.options)===null||s===void 0?void 0:s.dropcursor)),this.options.gapcursor!==!1&&b.push(SD.configure((a=this.options)===null||a===void 0?void 0:a.gapcursor)),this.options.hardBreak!==!1&&b.push(xD.configure((l=this.options)===null||l===void 0?void 0:l.hardBreak)),this.options.heading!==!1&&b.push(ID.configure((c=this.options)===null||c===void 0?void 0:c.heading)),this.options.history!==!1&&b.push(OD.configure((u=this.options)===null||u===void 0?void 0:u.history)),this.options.horizontalRule!==!1&&b.push(RD.configure((d=this.options)===null||d===void 0?void 0:d.horizontalRule)),this.options.italic!==!1&&b.push(PD.configure((f=this.options)===null||f===void 0?void 0:f.italic)),this.options.listItem!==!1&&b.push(FD.configure((h=this.options)===null||h===void 0?void 0:h.listItem)),this.options.orderedList!==!1&&b.push(jD.configure((p=this.options)===null||p===void 0?void 0:p.orderedList)),this.options.paragraph!==!1&&b.push(BD.configure((m=this.options)===null||m===void 0?void 0:m.paragraph)),this.options.strike!==!1&&b.push($D.configure((v=this.options)===null||v===void 0?void 0:v.strike)),this.options.text!==!1&&b.push(HD.configure((y=this.options)===null||y===void 0?void 0:y.text)),b}});var Ti=(()=>{let e=class e{constructor(){}addNode(r,i){let s=(i.reduce((l,c)=>Math.max(+c.id,l),0)+1).toString(),a={x:40+i.length*160,y:40,id:s,deps:[r.id]};i.push(a)}deleteNodeI(r,i){if(r&&i.length>0){let o=i.findIndex(a=>a.id==r),s=i.splice(o,1)[0];return i.reduce((a,l)=>{let c=l.deps.length;return l.deps=l.deps.filter(u=>u!==s.id),(l.deps.length===c||l.deps.length>0)&&a.push(l),a},[])}return i}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function uk(t,e){if(t&1&&(z(0,"option",14),se(1),H()),t&2){let n=e.$index;et("value",n),Se(),er("Arrow ",n,"")}}var _l=(()=>{let e=class e{constructor(){this.zooming=!0,this.childDragging=!0,this.animatePath=!1,this.direction=new Qd("horizontal"),this.demoService=D(Ti),this.arrowType=new Qd(0),this.arrowFns=[La,tv,ev,Xy],this.direction.valueChanges.subscribe(r=>{this.demoService.flow.updateDirection(this.direction.value)}),this.arrowType.valueChanges.subscribe(r=>{this.demoService.flow.updateArrowFn(this.arrowFns[r])})}ngOnInit(){}fitToWindow(){this.demoService.flow.fitToWindow()}trigger(){this.demoService.flow.arrangeChildren(),this.demoService.flow.updateArrows()}childDraggingFn(){this.childDragging=!this.childDragging,this.demoService.flow.updateChildDragging(this.childDragging)}zoomingFn(){this.zooming=!this.zooming,this.demoService.flow.updateZooming(this.zooming)}animatePathFn(){this.animatePath=!this.animatePath,this.demoService.flow.el.nativeElement.classList.toggle("animate-path")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ke({type:e,selectors:[["app-toolbar"]],standalone:!0,features:[Re],decls:24,vars:8,consts:[[1,"flex","items-center","gap-3"],[3,"click"],["for","zoomingId"],["id","zoomingId","type","checkbox",3,"checked","click"],["for","childDraggingId"],["id","childDraggingId","type","checkbox",3,"checked","click"],["for","animatePath"],["id","animatePath","type","checkbox",3,"checked","click"],["for","arrowType"],["id","arrowType",3,"formControl"],["for","direction"],["id","direction","type","radio",3,"value","formControl"],["for","direction1"],["id","direction1","type","radio",3,"value","formControl"],[3,"value"]],template:function(i,o){i&1&&(z(0,"div",0)(1,"button",1),oe("click",function(){return o.trigger()}),se(2,"Auto Arrange"),H(),z(3,"label",2)(4,"input",3),oe("click",function(){return o.zoomingFn()}),H(),se(5,"zooming "),H(),z(6,"label",4)(7,"input",5),oe("click",function(){return o.childDraggingFn()}),H(),se(8,"Child Dragging "),H(),z(9,"label",6)(10,"input",7),oe("click",function(){return o.animatePathFn()}),H(),se(11,"Animate "),H(),z(12,"button",1),oe("click",function(){return o.fitToWindow()}),se(13,"Fit to window"),H(),z(14,"label",8)(15,"select",9),Dn(16,uk,2,2,"option",14,la),H()(),z(18,"label",10),ge(19,"input",11),se(20,"Horizontal "),H(),z(21,"label",12),ge(22,"input",13),se(23,"Vertical "),H()()),i&2&&(Se(4),et("checked",o.zooming),Se(3),et("checked",o.childDragging),Se(3),et("checked",o.animatePath),Se(5),et("formControl",o.arrowType),Se(),Cn(o.arrowFns),Se(3),et("value","horizontal")("formControl",o.direction),Se(3),et("value","vertical")("formControl",o.direction))},dependencies:[Av,xv,Tv,qa,Za,Xd,wv,ef],encapsulation:2});let t=e;return t})();var dk=(t,e)=>e.id;function fk(t,e){if(t&1){let n=Xr();z(0,"div",3)(1,"div",4),se(2),H(),z(3,"button",5),oe("click",function(){let o=gn(n).$implicit,s=wn();return yn(s.demoService.addNode(o,s.list))}),se(4,"Add"),H(),z(5,"button",5),oe("click",function(){let o=gn(n).$implicit,s=wn();return yn(s.deleteNode(o.id))}),se(6,"Delete"),H()()}if(t&2){let n=e.$implicit;et("flowChild",n),Se(2),er(" ",n.id," ")}}var UD=(()=>{let e=class e{constructor(){this.title="angular-flow",this.list=[],this.linkingFrom=null,this.demoService=D(Ti),this.list=structuredClone(hk)}ngAfterViewInit(){this.demoService.flow=this.flowComponent}deleteNode(r){this.list=structuredClone(this.demoService.deleteNodeI(r,this.list))}startLinking(r){if(this.linkingFrom===null)this.linkingFrom=r;else{if(this.linkingFrom!==r){let i=this.list[this.linkingFrom],o=this.list[r];i.deps.push(o.id)}this.linkingFrom=null}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ke({type:e,selectors:[["app-demo-one"]],viewQuery:function(i,o){if(i&1&&Ye(fi,5),i&2){let s;xe(s=Ie())&&(o.flowComponent=s.first)}},standalone:!0,features:[Re],decls:5,vars:0,consts:[[1,"flex","flex-col","items-center","justify-center","h-[700px]"],[1,"block","p-3"],[1,"max-w-[90%]","max-h-[90%]","border","bg-gray-100"],[1,"card","flex","items-center","justify-center","w-[250px]","h-[60px]","bg-white",3,"flowChild"],[1,"pointer-events-none","flex","items-center","justify-center","w-7","h-7","mr-6","bg-gray-200","rounded-full"],[3,"click"],["class","card flex items-center justify-center w-[250px] h-[60px] bg-white",3,"flowChild"]],template:function(i,o){i&1&&(z(0,"div",0),ge(1,"app-toolbar",1),z(2,"ngu-flow",2),Dn(3,fk,7,2,"div",6,dk),H()()),i&2&&(Se(3),Cn(o.list))},dependencies:[fi,di,_l],styles:[".card[_ngcontent-%COMP%]{box-shadow:0 0 5px #8e8e8e5e;border-radius:5px}button[_ngcontent-%COMP%]{padding:.25rem}"],changeDetection:0});let t=e;return t})(),hk=[{x:0,y:0,id:"1",deps:[]},{x:300,y:-400,id:"2",deps:["1"]},{x:300,y:-200,id:"3",deps:["1"]},{x:300,y:0,id:"4",deps:["1"]},{x:300,y:200,id:"5",deps:["1"]},{x:300,y:400,id:"6",deps:["1"]},{x:600,y:-500,id:"7",deps:["2"]},{x:600,y:-400,id:"8",deps:["2"]},{x:600,y:-200,id:"9",deps:["3"]},{x:600,y:-100,id:"10",deps:["3"]},{x:600,y:0,id:"11",deps:["4"]},{x:600,y:100,id:"12",deps:["4"]},{x:600,y:200,id:"13",deps:["5"]},{x:600,y:300,id:"14",deps:["5"]},{x:600,y:400,id:"15",deps:["6"]},{x:600,y:500,id:"16",deps:["6"]},{x:900,y:-500,id:"17",deps:["7"]},{x:900,y:-400,id:"18",deps:["8"]},{x:900,y:-200,id:"19",deps:["9"]},{x:900,y:-100,id:"20",deps:["10"]},{x:900,y:0,id:"21",deps:["11"]},{x:900,y:100,id:"22",deps:["12"]},{x:900,y:200,id:"23",deps:["13"]},{x:900,y:300,id:"24",deps:["14"]},{x:900,y:400,id:"25",deps:["15"]},{x:900,y:500,id:"26",deps:["16"]}];var pk=["g"],mk=["rects"];function gk(t,e){if(t&1){let n=Xr();Zi(),z(0,"rect",2,3),oe("click",function(i){gn(n);let o=wn();return yn(o.selectRect(i))}),H()}if(t&2){let n=e.$implicit;Qr("x",n.x)("y",n.y)("width",n.width)("height",n.height)}}var zD=(()=>{let e=class e{constructor(){this.rects=[],this.nodes=[];let r=60,i=r,o=r,s=0+i,a=0+o,l=100-r/2,c=100-r/2,u=0,d=0;for(;u<5;){for(;d<10;)this.rects.push({x:s,y:a,width:l,height:c}),s+=l+r,d++;a+=c+r,s=0+i,d=0,u++}}ngOnInit(){}selectRect(r){console.log(r),this.nodes.push(r.target),this.nodes.length===2&&(this.drawPath(document.querySelector("svg"),this.nodes[0],this.nodes[1]),this.nodes=[])}drawPath(r,i,o){let{width:s,height:a}=i.getBoundingClientRect(),l=+i.getAttribute("x")+s/2,c=+i.getAttribute("y")+a/2,{width:u,height:d}=o.getBoundingClientRect(),f=+o.getAttribute("x")+u/2,h=+o.getAttribute("y")+d/2,p=[],m=5,v=10,y=60,b=100,J=100,ne=y/2+b/2,ee=y/2+J/2,ae=ne+(v-1)*(b+y),Je=ee+(m-1)*(J+y);for(let Z=0;Z<m;Z++){let P=[];for(let q=0;q<v;q++){let ye=ne+q*(b+y),zt=ee+Z*(J+y);P.push({x:ye,y:zt})}p.push(P)}let yt=null,Rn=null,Ho=1/0;for(let Z=0;Z<m;Z++)for(let P=0;P<v;P++){let q=p[Z][P],ye=Math.sqrt((q.x-l)**2+(q.y-c)**2),zt=Math.sqrt((q.x-f)**2+(q.y-h)**2);ye<Ho&&(yt=q,Ho=ye),zt<Ho&&(Rn=q,Ho=zt)}let vr=[yt],Ch=new Map,Ai=new Map,Nl=new Map;for(Ai.set(yt,0),Nl.set(yt,wh(yt,Rn));vr.length>0;){let Z=KD(vr,Nl);if(Z===Rn){let P=ZD(Ch,Rn),q=`M${l},${c} ${P} ${f},${h}`,ye=document.createElementNS("http://www.w3.org/2000/svg","path");return ye.setAttribute("d",q),ye.setAttribute("stroke","black"),ye.setAttribute("stroke-width","2"),ye.setAttribute("fill","none"),this.g.nativeElement.appendChild(ye),ye}vr.splice(vr.indexOf(Z),1);for(let P of JD(Z,p)){let q=Ai.get(Z)+QD(Z,P);(!Ai.has(P)||q<Ai.get(P))&&(Ch.set(P,Z),Ai.set(P,q),Nl.set(P,q+wh(P,Rn)),vr.includes(P)||vr.push(P))}}function wh(Z,P){return Math.sqrt((Z.x-P.x)**2+(Z.y-P.y)**2)}function KD(Z,P){let q=Z[0],ye=P.get(q);for(let zt of Z){let Wt=P.get(zt);Wt<ye&&(q=zt,ye=Wt)}return q}function ZD(Z,P){let q="";for(;Z.has(P);){let ye=Z.get(P);q=`L${P.x},${P.y} ${q}`,P=ye}return q}function JD(Z,P){let q=[],ye=P.length,zt=P[0].length,Wt=Math.floor((Z.y-ee)/(J+y)),Dr=Math.floor((Z.x-ne)/(b+y));return Wt>0&&q.push(P[Wt-1][Dr]),Wt<ye-1&&q.push(P[Wt+1][Dr]),Dr>0&&q.push(P[Wt][Dr-1]),Dr<zt-1&&q.push(P[Wt][Dr+1]),q}function QD(Z,P){return Math.sqrt((Z.x-P.x)**2+(Z.y-P.y)**2)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ke({type:e,selectors:[["app-svg"]],viewQuery:function(i,o){if(i&1&&(Ye(pk,5),Ye(mk,5)),i&2){let s;xe(s=Ie())&&(o.g=s.first),xe(s=Ie())&&(o.boxes=s)}},standalone:!0,features:[Re],decls:5,vars:0,consts:[[1,"w-[1100px]","h-[720px]","border","border-red-500"],["g",""],["fill","cornflowerblue",3,"click"],["rects",""],["fill","cornflowerblue"]],template:function(i,o){i&1&&(Zi(),z(0,"svg",0),Dn(1,gk,2,4,":svg:rect",4,la),ge(3,"g",null,1),H()),i&2&&(Se(),Cn(o.rects))},encapsulation:2,changeDetection:0});let t=e;return t})();var yk=(t,e)=>e.id;function vk(t,e){if(t&1){let n=Xr();z(0,"div",3)(1,"div",4)(2,"div",5),se(3),H()(),z(4,"p",6),se(5," Lorem ipsum dolor sit amet consectetur, adipisicing elit. In alias porro ratione quis dolore laboriosam eveniet vel hic beatae eaque iste, neque quos, odit, explicabo nulla corporis iusto asperiores sequi! "),H(),z(6,"div",7)(7,"button",8),oe("click",function(){let o=gn(n).$implicit,s=wn();return yn(s.demoService.addNode(o,s.list))}),se(8," Add "),H(),z(9,"button",9),oe("click",function(){let o=gn(n).$implicit,s=wn();return yn(s.deleteNode(o.id))}),se(10," Delete "),H()()()}if(t&2){let n=e.$implicit;et("flowChild",n),Se(3),er(" ",n.id," ")}}var WD=(()=>{let e=class e{constructor(){this.title="angular-flow",this.list=[],this.linkingFrom=null,this.demoService=D(Ti),this.list=[{x:40,y:40,id:"1",deps:[]},{x:40,y:40,id:"2",deps:["1"]},{x:40,y:40,id:"3",deps:["2"]},{x:40,y:40,id:"4",deps:["1"]},{x:40,y:40,id:"5",deps:["3"]},{x:40,y:40,id:"6",deps:["2"]},{x:40,y:40,id:"7",deps:["4"]},{x:40,y:40,id:"9",deps:["7"]}]}ngAfterViewInit(){this.demoService.flow=this.flowComponent}deleteNode(r){this.list=structuredClone(this.demoService.deleteNodeI(r,this.list))}startLinking(r){if(this.linkingFrom===null)this.linkingFrom=r;else{if(this.linkingFrom!==r){let i=this.list[this.linkingFrom],o=this.list[r];i.deps.push(o.id)}this.linkingFrom=null}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ke({type:e,selectors:[["app-demo-two"]],viewQuery:function(i,o){if(i&1&&Ye(fi,5),i&2){let s;xe(s=Ie())&&(o.flowComponent=s.first)}},standalone:!0,features:[Re],decls:5,vars:0,consts:[[1,"flex","flex-col","items-center","justify-center","h-[700px]"],[1,"block","p-3"],[1,"max-w-[90%]","max-h-[90%]","border","bg-gray-100"],[1,"card","flex","flex-col","w-[250px]","bg-white","rounded-2xl",3,"flowChild"],[1,"bg-slate-100","border-b"],[1,"pointer-events-none","flex","items-center","justify-center","w-7","h-7","mr-6"],[1,"p-4"],[1,"p-4","flex","gap-2"],[1,"text-green-500",3,"click"],[1,"text-red-400",3,"click"],["class","card flex flex-col w-[250px] bg-white rounded-2xl",3,"flowChild"]],template:function(i,o){i&1&&(z(0,"div",0),ge(1,"app-toolbar",1),z(2,"ngu-flow",2),Dn(3,vk,11,2,"div",10,yk),H()()),i&2&&(Se(3),Cn(o.list))},dependencies:[fi,di,_l],styles:[".card[_ngcontent-%COMP%]{box-shadow:0 0 5px #8e8e8e5e}ngu-flow[_ngcontent-%COMP%]{--flow-dot-color: gray;--flow-path-color: gray;--dot-size: 1px}button[_ngcontent-%COMP%]{padding:.25rem}"],changeDetection:0});let t=e;return t})();var GD=[{path:"one",component:UD},{path:"two",component:WD},{path:"svg",component:zD},{path:"",redirectTo:"/one",pathMatch:"full"}];var qD={providers:[Zy(GD,Jy({skipInitialTransition:!0}))]};var YD=(()=>{let e=class e{constructor(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ke({type:e,selectors:[["app-root"]],standalone:!0,features:[Re],decls:6,vars:0,consts:[[1,"flex","gap-2","p-2"],["routerLinkActive","bg-gray-200","routerLink","/one",1,"p-2","rounded"],["routerLinkActive","bg-gray-200","routerLink","/two",1,"p-2","rounded"]],template:function(i,o){i&1&&(z(0,"div",0)(1,"a",1),se(2," Demo One "),H(),z(3,"a",2),se(4," Demo Two "),H()(),ge(5,"router-outlet"))},dependencies:[jd,ka,Ky],encapsulation:2,changeDetection:0});let t=e;return t})();hy(YD,qD).catch(t=>console.error(t));
